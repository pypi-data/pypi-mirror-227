import{r as a,k as C,j as l,a2 as H,d as y,l as R,i as $,c as m,R as K}from"./index-5f361499.js";import{I as A}from"./Input-bb35fd1d.js";import{k as T}from"./popover-b68ce716.js";const v="",D=40;function O(s,t){return s.replaceAll(t,`<b class="inline-block text-brand-500 bg-brand-10">${t}</b>`)}function U(s=[],t){return s.reduce((u,[o,r])=>{const n=r.indexOf(t.toLocaleLowerCase());if(n>-1){const i=Math.max(0,n-D),d=Math.min(r.length-1,n+t.length+D);u.push([o,`${i>0?"... ":v}${r.slice(i,d)}${d<r.length?" ...":v}`])}return u},[])}function S({nativeEvent:s}){return window.TouchEvent?s instanceof TouchEvent:"touches"in s}function P(s){return s.nativeEvent instanceof MouseEvent}function B(s){const t=a.useRef(null),u=a.useRef(s);return a.useEffect(()=>{const o=r=>{const n=t.current;n&&!n.contains(r.target)&&u.current(r)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[]),t}function Q(s,{threshold:t=400,onStart:u,onFinish:o,onCancel:r}={}){const n=a.useRef(!1),i=a.useRef(!1),d=a.useRef(),g=a.useRef(s),p=a.useCallback(()=>c=>{i.current||!P(c)&&!S(c)||(u&&u(c),i.current=!0,d.current=setTimeout(()=>{g.current(c),n.current=!0},t))},[u,t]),h=a.useCallback(()=>c=>{!P(c)&&!S(c)||(n.current?o&&o(c):i.current&&r&&r(c),n.current=!1,i.current=!1,d.current&&window.clearTimeout(d.current))},[o,r]);return a.useMemo(()=>{if(s===null)return{};const c={onMouseDown:p(),onMouseUp:h(),onMouseLeave:h()},w={onTouchStart:p(),onTouchEnd:h()};return{...c,...w}},[s,h,p])}const F=K.forwardRef(function({value:t,placeholder:u,size:o=m.md,autoFocus:r=!1,onInput:n,onKeyDown:i,className:d},g){return l.jsx(A,{className:d,size:o,children:({className:p})=>l.jsx(A.Textfield,{ref:g,className:y(p,"w-full"),autoFocus:r,placeholder:u,value:t,onInput:n,onKeyDown:i})})});function V({list:s,size:t=m.sm,searchBy:u,displayBy:o,onSelect:r,to:n,autoFocus:i=!1,isFullWidth:d=!1}){const g=C(),p=a.useRef(null),h=a.useRef(null),c=a.useMemo(()=>s.map(e=>[e,e[u]]),[s]),[w,N]=a.useState(v),[x,b]=a.useState(0),_=B(()=>{N(v)}),j=w!==v,E=U(c,w);function k(){var e;b(0),N(v),(e=h.current)==null||e.focus()}function M(){var f;const e=(f=E[x])==null?void 0:f[0];R(e)||(R(n)?r==null||r(e):g(n(e)),k())}return l.jsx("div",{className:"px-2 py-1 relative",ref:_,onKeyDown:e=>{e.key==="Escape"&&k()},children:l.jsxs(T,{className:"relative flex",children:[l.jsx(T.Button,{ref:h,as:F,className:"w-full !m-0",size:t,value:w,placeholder:"Search",onInput:e=>{N(e.target.value.trim())},onKeyDown:e=>{var f;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((f=p.current)==null||f.focus())},autoFocus:i}),l.jsx(H,{show:j,as:a.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(T.Panel,{static:!0,focus:!0,className:y("absolute z-10  transform cursor-pointer rounded-lg bg-theme border-4 border-primary-20","p-2 bg-theme dark:bg-theme-lighter max-h-[25vh] overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",t===m.sm&&"mt-10",t===m.md&&"mt-12",t===m.lg&&"mt-14",d?"w-full":"w-full max-w-[20rem]"),ref:p,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&b(x-1),e.key==="ArrowDown"&&x<E.length-1&&b(x+1),e.key==="Enter"&&(e.preventDefault(),M())},onMouseOver:e=>{e.stopPropagation();const f=e.target.closest('[role="menuitem"]');if(R(f))return;const L=Number(f.dataset.index);b(Number(L))},children:$(E)&&j?l.jsx("div",{className:y(t===m.sm&&"p-1",t===m.md&&"p-2",t===m.lg&&"p-3"),children:"No Results Found"},"not-found"):E.map(([e,f],L)=>l.jsx("div",{role:"menuitem","data-index":L,className:y("cursor-pointer rounded-lg",x===L&&"bg-primary-20"),children:l.jsx(G,{item:e,index:f,search:w,displayBy:o,size:t,onClick:I=>{I.stopPropagation(),I.preventDefault(),M()}})},f))})})]})})}function G({item:s,index:t,search:u,displayBy:o,size:r,onClick:n}){return l.jsxs("div",{onClick:n,className:y("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",r===m.sm&&"text-sm py-1",r===m.md&&"text-md py-2",r===m.lg&&"text-lg py-3"),children:[l.jsx("span",{className:"font-bold",children:s[o]}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:O(t,u)}})]})}export{V as S,Q as u};
