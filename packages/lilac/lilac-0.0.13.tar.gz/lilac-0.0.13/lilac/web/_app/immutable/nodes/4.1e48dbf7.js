import{S as we,i as $e,s as be,E as ve,Z as ke,_ as Se,m as $,h as m,n as D,$ as Me,b as I,a0 as b,L as Ue,a1 as x,N as Te,Q as Ce,q as Z,r as G,u as fe,e as ie,C as wt,o as Kn,Y as Zn,k,l as S,p as ct,w as He,y as B,z as q,A,V as Gn,g as p,d as v,B as H,R as ht,D as Wn,a as Y,c as Q,H as Pe,ae as Xn,I as xn,J as er,K as tr,a7 as Ve,a8 as Ye,O as ge,v as le,f as ne,M as xe,a4 as ze,ac as Fe,a2 as $t,af as lr,W as $n,X as kn,G as _e,P as nr,T as Ge,U as We,ag as rr,a9 as _t,a3 as pt,x as st,a6 as Rt,ah as sr}from"../chunks/index.0cab886b.js";import{n as ir,h as ar,g as Sn,e as or,a as fr,p as cr,i as ur,j as dr}from"../chunks/utils.840c08f0.js";import{C as Bt,O as mr,a as ot,P as hr}from"../chunks/Page.8447f916.js";import{d as rt,v as _r,h as Ne,w as Oe,x as Ee,y as Dt,t as tt,C as lt,z as ye,A as Xe,S as kt,D as It,E as pr,r as gr,F as br,c as Qe,a as dt,G as mt,H as vr,L as wr,I as Ze,J as $r,K as Vt,M as kr,N as Sr,O as En,B as yn,P as At,R as Dn,U as In,f as Er,b as Nt,V as nt,W as yr,X as Dr,Y as Vn,Z as Ir,_ as Vr,$ as it,a0 as Tt,a1 as gt,a2 as Et,a3 as Nr,a4 as Tr,a5 as Nn,a6 as ft,a7 as Cr,a8 as Tn,a9 as Fr,aa as Mr,ab as zr,ac as Cn,ad as Fn,ae as Mn,af as Pr,ag as Rr,ah as Br,ai as Ar,aj as Hr,ak as Or,al as qr,am as jr,an as Lr,ao as Ur,ap as Yr,aq as Qr,ar as Jr,as as Kr}from"../chunks/Commands.25d63466.js";import{d as bt,e as zn,f as Ct,h as Zr,i as Pn,j as Rn,k as Gr,l as Wr,m as Xr,I as xr,n as es,o as ts,p as ls,q as Bn,s as vt,D as at,r as ns,t as rs}from"../chunks/notificationsStore.5fbe1b4b.js";import{w as ss}from"../chunks/index.31baf5e1.js";import{C as is,a as yt,I as Ht,T as as}from"../chunks/ConceptView.0703e6fa.js";import{E as An,S as os,T as Hn}from"../chunks/StringSpanHighlight.8f571d33.js";import{M as Ft,C as fs}from"../chunks/ChevronUp.69f13843.js";import{R as cs,S as us,T as ds,a as Ot,b as qt}from"../chunks/RowItemMetadata.8b97a95c.js";import{g as On}from"../chunks/settingsStore.dece2a97.js";import{C as ms}from"../chunks/ComboBox.2661867f.js";import{S as hs}from"../chunks/Settings.db81ee85.js";function jt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function _s(s){let e,l,t=s[1]&&jt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ps(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class gs extends we{constructor(e){super(),$e(this,e,ps,_s,be,{size:0,title:1})}}function Lt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function bs(s){let e,l,t=s[1]&&Lt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Lt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function vs(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class ws extends we{constructor(e){super(),$e(this,e,vs,bs,be,{size:0,title:1})}}function Ut(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function $s(s){let e,l,t,n=s[1]&&Ut(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let i=0;i<o.length;i+=1)r=ve(r,o[i]);return{c(){e=ke("svg"),n&&n.c(),l=ke("path"),t=ke("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=$(e);n&&n.l(a),l=Se(a,"path",{d:!0}),$(l).forEach(m),t=Se(a,"path",{d:!0}),$(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),D(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Me(e,r)},m(i,a){I(i,e,a),n&&n.m(e,null),b(e,l),b(e,t)},p(i,[a]){i[1]?n?n.p(i,a):(n=Ut(i),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Me(e,r=Ue(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:i[0]},a&1&&{height:i[0]},a&4&&i[2],a&8&&i[3]]))},i:x,o:x,d(i){i&&m(e),n&&n.d()}}}function ks(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class ut extends we{constructor(e){super(),$e(this,e,ks,$s,be,{size:0,title:1})}}function Yt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ss(s){let e,l,t=s[1]&&Yt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Yt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Es(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class qn extends we{constructor(e){super(),$e(this,e,Es,Ss,be,{size:0,title:1})}}function Qt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ys(s){let e,l,t=s[1]&&Qt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Qt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Ds(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class Is extends we{constructor(e){super(),$e(this,e,Ds,ys,be,{size:0,title:1})}}function Jt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Vs(s){let e,l,t=s[1]&&Jt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Ns(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class jn extends we{constructor(e){super(),$e(this,e,Ns,Vs,be,{size:0,title:1})}}function Kt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ts(s){let e,l,t=s[1]&&Kt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Kt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Cs(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class Ln extends we{constructor(e){super(),$e(this,e,Cs,Ts,be,{size:0,title:1})}}function Zt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Fs(s){let e,l,t=s[1]&&Zt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Zt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Ms(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class zs extends we{constructor(e){super(),$e(this,e,Ms,Fs,be,{size:0,title:1})}}function Gt(s){let e,l;return{c(){e=ke("title"),l=Z(s[1])},l(t){e=Se(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ps(s){let e,l,t=s[1]&&Gt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=ve(o,n[r]);return{c(){e=ke("svg"),t&&t.c(),l=ke("path"),this.h()},l(r){e=Se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=Se(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){D(l,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),Me(e,o)},m(r,i){I(r,e,i),t&&t.m(e,null),b(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Gt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Me(e,o=Ue(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Rs(s,e,l){let t,n;const o=["size","title"];let r=Te(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=ve(ve({},e),Ce(f))),l(3,r=Te(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[i,a,n,r,t]}class Bs extends we{constructor(e){super(),$e(this,e,Rs,Ps,be,{size:0,title:1})}}function Wt(s){let e;return{c(){e=k("div"),this.h()},l(l){e=S(l,"DIV",{id:!0,style:!0}),$(e).forEach(m),this.h()},h(){D(e,"id","svelte-infinite-scroll"),ct(e,"width","0")},m(l,t){I(l,e,t),s[11](e)},p:x,d(l){l&&m(e),s[11](null)}}}function As(s){let e,l=!s[1]&&!s[0]&&Wt(s);return{c(){l&&l.c(),e=ie()},l(t){l&&l.l(t),e=ie()},m(t,n){l&&l.m(t,n),I(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=Wt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:x,o:x,d(t){l&&l.d(t),t&&m(e)}}}function Hs(s,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:r=!0}=e,{reverse:i=!1}=e,{window:a=!1}=e;const f=wt();let c=!1,d,u,_,h;const g=N=>{if(!r)return;const C=N.target;w(C,i,n)<=t?(!c&&r&&(f("loadMore"),l(8,u=C.scrollHeight),l(9,_=C.scrollTop)),l(7,c=!0)):l(7,c=!1)},w=(N,C,L)=>{const V=N.documentElement?N.documentElement:N;return C?L?V.scrollLeft:V.scrollTop:L?V.scrollWidth-V.clientWidth-V.scrollLeft:V.scrollHeight-V.clientHeight-V.scrollTop};Kn(()=>{a?l(10,h=document):o?l(10,h=o):l(10,h=d.parentNode)}),Zn(()=>{h&&(h.removeEventListener("scroll",g),h.removeEventListener("resize",g))});function y(N){He[N?"unshift":"push"](()=>{d=N,l(2,d)})}return s.$$set=N=>{"threshold"in N&&l(3,t=N.threshold),"horizontal"in N&&l(4,n=N.horizontal),"elementScroll"in N&&l(0,o=N.elementScroll),"hasMore"in N&&l(5,r=N.hasMore),"reverse"in N&&l(6,i=N.reverse),"window"in N&&l(1,a=N.window)},s.$$.update=()=>{s.$$.dirty&1088&&h&&(i&&l(10,h.scrollTop=h.scrollHeight,h),h.addEventListener("scroll",g),h.addEventListener("resize",g)),s.$$.dirty&1984&&c&&i&&l(10,h.scrollTop=h.scrollHeight-u+_,h)},[o,a,d,t,n,r,i,c,u,_,h,y]}class Os extends we{constructor(e){super(),$e(this,e,Hs,As,be,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function qs(s){let e,l,t,n,o,r,i,a;t=new _r({});const f=s[3].default,c=Wn(f,s,s[6],null);return{c(){e=k("div"),l=k("button"),B(t.$$.fragment),n=Y(),o=k("span"),c&&c.c(),this.h()},l(d){e=S(d,"DIV",{class:!0});var u=$(e);l=S(u,"BUTTON",{class:!0});var _=$(l);q(t.$$.fragment,_),_.forEach(m),n=Q(u),o=S(u,"SPAN",{class:!0});var h=$(o);c&&c.l(h),h.forEach(m),u.forEach(m),this.h()},h(){D(l,"class","p-0 opacity-50 hover:opacity-100"),D(o,"class","truncate"),D(e,"class","removable-tag flex items-center gap-x-1")},m(d,u){I(d,e,u),b(e,l),A(t,l,null),b(e,n),b(e,o),c&&c.m(o,null),r=!0,i||(a=Pe(l,"click",Xn(s[4])),i=!0)},p(d,u){c&&c.p&&(!r||u&64)&&xn(c,f,d,d[6],r?tr(f,d[6],u,null):er(d[6]),null)},i(d){r||(p(t.$$.fragment,d),p(c,d),r=!0)},o(d){v(t.$$.fragment,d),v(c,d),r=!1},d(d){d&&m(e),H(t),c&&c.d(d),i=!1,a()}}}function js(s){let e,l;const t=[{type:s[0]},s[2]];let n={$$slots:{default:[qs]},$$scope:{ctx:s}};for(let o=0;o<t.length;o+=1)n=ve(n,t[o]);return e=new rt({props:n}),e.$on("click",s[5]),{c(){B(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,r){A(e,o,r),l=!0},p(o,[r]){const i=r&5?Ue(t,[r&1&&{type:o[0]},r&4&&Gn(o[2])]):{};r&64&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){H(e,o)}}}function Ls(s,e,l){const t=["type"];let n=Te(e,t),{$$slots:o={},$$scope:r}=e;const i=wt();let{type:a}=e;const f=()=>i("remove");function c(d){ht.call(this,s,d)}return s.$$set=d=>{e=ve(ve({},e),Ce(d)),l(2,n=Te(e,t)),"type"in d&&l(0,a=d.type),"$$scope"in d&&l(6,r=d.$$scope)},[a,i,n,o,f,c,r]}class Mt extends we{constructor(e){super(),$e(this,e,Ls,js,be,{type:0})}}function Us(s){let e,l=(s[2]?"":s[5])+"",t,n,o=s[0][s[1].op]+"",r,i,a;return{c(){e=k("span"),t=Z(l),n=Y(),r=Z(o),i=Y(),a=Z(s[4]),this.h()},l(f){e=S(f,"SPAN",{class:!0});var c=$(e);t=G(c,l),c.forEach(m),n=Q(f),r=G(f,o),i=Q(f),a=G(f,s[4]),this.h()},h(){D(e,"class","font-mono")},m(f,c){I(f,e,c),b(e,t),I(f,n,c),I(f,r,c),I(f,i,c),I(f,a,c)},p(f,c){c&36&&l!==(l=(f[2]?"":f[5])+"")&&fe(t,l),c&2&&o!==(o=f[0][f[1].op]+"")&&fe(r,o),c&16&&fe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(r),f&&m(i),f&&m(a)}}}function Ys(s){let e,l,t=(s[2]?"":s[5])+"",n;return{c(){e=Z("has "),l=k("span"),n=Z(t),this.h()},l(o){e=G(o,"has "),l=S(o,"SPAN",{class:!0});var r=$(l);n=G(r,t),r.forEach(m),this.h()},h(){D(l,"class","font-mono")},m(o,r){I(o,e,r),I(o,l,r),b(l,n)},p(o,r){r&36&&t!==(t=(o[2]?"":o[5])+"")&&fe(n,t)},d(o){o&&m(e),o&&m(l)}}}function Qs(s){let e;function l(o,r){return o[1].op==="exists"?Ys:Us}let t=l(s),n=t(s);return{c(){n.c(),e=ie()},l(o){n.l(o),e=ie()},m(o,r){n.m(o,r),I(o,e,r)},p(o,r){t===(t=l(o))&&n?n.p(o,r):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function Js(s){let e,l,t,n,o,r;return l=new Mt({props:{interactive:!0,type:"magenta",$$slots:{default:[Qs]},$$scope:{ctx:s}}}),l.$on("click",s[9]),l.$on("remove",s[10]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","filter-pill items-center")},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=Ve(t=Ne.call(null,e,{text:s[6]})),o=!0)},p(i,[a]){const f={};a&2102&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Ye(t.update)&&a&64&&t.update.call(null,{text:i[6]})},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,r()}}}function Ks(s,e,l){let t,n,o,r,i;const a={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:f}=e,{hidePath:c=!1}=e;const d=Oe();ge(s,d,h=>l(7,i=h));const u=()=>tt({command:lt.EditFilter,namespace:i.namespace,datasetName:i.datasetName,path:n}),_=()=>d.removeFilter(f);return s.$$set=h=>{"filter"in h&&l(1,f=h.filter),"hidePath"in h&&l(2,c=h.hidePath)},s.$$.update=()=>{s.$$.dirty&2&&l(4,t=Ee(f.value||"false")),s.$$.dirty&2&&l(3,n=Dt(f.path)),s.$$.dirty&26&&l(6,o=f.op==="exists"?`has ${bt(n)}`:`${bt(n)} ${a[f.op]} ${t}`),s.$$.dirty&8&&l(5,r=zn(n))},[a,f,c,n,t,r,o,i,d,u,_]}class Un extends we{constructor(e){super(),$e(this,e,Ks,Js,be,{FILTER_SHORTHANDS:0,filter:1,hidePath:2})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Xt(s){let e,l=s[0].concept_namespace+"",t,n,o=s[0].concept_name+"",r;return{c(){e=k("div"),t=Z(l),n=Z(" / "),r=Z(o),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);t=G(a,l),n=G(a," / "),r=G(a,o),a.forEach(m),this.h()},h(){D(e,"class","mb-2 w-full text-center text-xs")},m(i,a){I(i,e,a),b(e,t),b(e,n),b(e,r)},p(i,a){a&1&&l!==(l=i[0].concept_namespace+"")&&fe(t,l),a&1&&o!==(o=i[0].concept_name+"")&&fe(r,o)},d(i){i&&m(e)}}}function Zs(s){let e=ye(s[0].path)+"",l,t,n=s[0].type+"",o;return{c(){l=Z(e),t=Z(": "),o=Z(n)},l(r){l=G(r,e),t=G(r,": "),o=G(r,n)},m(r,i){I(r,l,i),I(r,t,i),I(r,o,i)},p(r,i){i&1&&e!==(e=ye(r[0].path)+"")&&fe(l,e),i&1&&n!==(n=r[0].type+"")&&fe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o)}}}function xt(s){let e,l,t;return l=new An({props:{embedding:s[0].embedding}}),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(n){e=S(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","ml-2")},m(n,o){I(n,e,o),A(l,e,null),t=!0},p(n,o){const r={};o&1&&(r.embedding=n[0].embedding),l.$set(r)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),H(l)}}}function el(s){let e,l;return{c(){e=k("div"),l=Z(s[2]),this.h()},l(t){e=S(t,"DIV",{class:!0});var n=$(e);l=G(n,s[2]),n.forEach(m),this.h()},h(){D(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&4&&fe(l,t[2])},d(t){t&&m(e)}}}function Gs(s){let e,l,t,n,o,r,i,a,f=s[0].type==="concept"&&Xt(s);n=new rt({props:{type:s[1],$$slots:{default:[Zs]},$$scope:{ctx:s}}});let c=(s[0].type==="semantic"||s[0].type==="concept")&&xt(s),d=s[2]&&el(s);return{c(){f&&f.c(),e=Y(),l=k("div"),t=k("div"),B(n.$$.fragment),o=Y(),c&&c.c(),r=Y(),d&&d.c(),i=ie(),this.h()},l(u){f&&f.l(u),e=Q(u),l=S(u,"DIV",{class:!0});var _=$(l);t=S(_,"DIV",{class:!0});var h=$(t);q(n.$$.fragment,h),h.forEach(m),o=Q(_),c&&c.l(_),_.forEach(m),r=Q(u),d&&d.l(u),i=ie(),this.h()},h(){D(t,"class","whitespace-nowrap"),D(l,"class","flex items-center justify-items-center")},m(u,_){f&&f.m(u,_),I(u,e,_),I(u,l,_),b(l,t),A(n,t,null),b(l,o),c&&c.m(l,null),I(u,r,_),d&&d.m(u,_),I(u,i,_),a=!0},p(u,[_]){u[0].type==="concept"?f?f.p(u,_):(f=Xt(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const h={};_&2&&(h.type=u[1]),_&9&&(h.$$scope={dirty:_,ctx:u}),n.$set(h),u[0].type==="semantic"||u[0].type==="concept"?c?(c.p(u,_),_&1&&p(c,1)):(c=xt(u),c.c(),p(c,1),c.m(l,null)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),u[2]?d?d.p(u,_):(d=el(u),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null)},i(u){a||(p(n.$$.fragment,u),p(c),a=!0)},o(u){v(n.$$.fragment,u),v(c),a=!1},d(u){f&&f.d(u),u&&m(e),u&&m(l),H(n),c&&c.d(),u&&m(r),d&&d.d(u),u&&m(i)}}}function Ws(s,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return s.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,o=r.tagType)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,o,t]}class tl extends we{constructor(e){super(),$e(this,e,Ws,Gs,be,{search:0,tagType:1})}}function Xs(s){let e,l=ye(s[0].path)+"",t,n,o,r;return{c(){e=k("span"),t=Z(l),n=Z(' has "'),o=Z(s[2]),r=Z('"'),this.h()},l(i){e=S(i,"SPAN",{class:!0});var a=$(e);t=G(a,l),a.forEach(m),n=G(i,' has "'),o=G(i,s[2]),r=G(i,'"'),this.h()},h(){D(e,"class","font-mono")},m(i,a){I(i,e,a),b(e,t),I(i,n,a),I(i,o,a),I(i,r,a)},p(i,a){a&1&&l!==(l=ye(i[0].path)+"")&&fe(t,l),a&4&&fe(o,i[2])},d(i){i&&m(e),i&&m(n),i&&m(o),i&&m(r)}}}function xs(s){let e,l,t,n,o,r;return l=new Mt({props:{title:"query",interactive:!0,type:s[1],$$slots:{default:[Xs]},$$scope:{ctx:s}}}),l.$on("click",s[6]),l.$on("remove",s[7]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","search-pill items-center text-left")},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=Ve(t=Ne.call(null,e,{component:tl,props:{search:s[0],tagType:s[1]}})),o=!0)},p(i,[a]){const f={};a&2&&(f.type=i[1]),a&517&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Ye(t.update)&&a&3&&t.update.call(null,{component:tl,props:{search:i[0],tagType:i[1]}})},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,r()}}}function ei(s,e,l){let t,n,o,{search:r}=e;const i={keyword:"outline",semantic:"teal",concept:"green"},a=Oe(),f=Xe();ge(s,f,u=>l(3,o=u));function c(u){ht.call(this,s,u)}const d=()=>{var u;return a.removeSearch(r,((u=o.selectRowsSchema)==null?void 0:u.data)||null)};return s.$$set=u=>{"search"in u&&l(0,r=u.search)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=r.type==="concept"?r.concept_name:r.query),s.$$.dirty&1&&l(1,n=r.type!=null?i[r.type]:"outline")},[r,n,t,o,a,f,c,d]}class Yn extends we{constructor(e){super(),$e(this,e,ei,xs,be,{search:0})}}function ll(s,e,l){const t=s.slice();return t[26]=e[l][0],t[27]=e[l][1],t}function nl(s,e,l){const t=s.slice();return t[30]=e[l],t}function rl(s,e,l){const t=s.slice();return t[33]=e[l],t}function sl(s,e,l){const t=s.slice();return t[36]=e[l],t}function il(s,e,l){const t=s.slice();return t[39]=e[l],t}function ti(s){let e,l,t,n=s[13],o=[];for(let a=0;a<n.length;a+=1)o[a]=fl(sl(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[8]!=null&&s[8].length>0&&cl(s);return{c(){e=k("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),i&&i.c(),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),i&&i.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex w-full flex-row gap-x-4")},m(a,f){I(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);b(e,l),i&&i.m(e,null),t=!0},p(a,f){if(f[0]&57352){n=a[13];let c;for(c=0;c<n.length;c+=1){const d=sl(a,n,c);o[c]?(o[c].p(d,f),p(o[c],1)):(o[c]=fl(d),o[c].c(),p(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[8]!=null&&a[8].length>0?i?(i.p(a,f),f[0]&256&&p(i,1)):(i=cl(a),i.c(),p(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d()}}}function al(s){let e,l,t=s[14][s[36]]+"",n,o,r,i,a,f=s[3][s[36]],c=[];for(let u=0;u<f.length;u+=1)c[u]=ol(il(s,f,u));const d=u=>v(c[u],1,1,()=>{c[u]=null});return{c(){e=k("div"),l=k("div"),n=Z(t),o=Y(),r=k("div");for(let u=0;u<c.length;u+=1)c[u].c();i=Y(),this.h()},l(u){e=S(u,"DIV",{class:!0});var _=$(e);l=S(_,"DIV",{class:!0});var h=$(l);n=G(h,t),h.forEach(m),o=Q(_),r=S(_,"DIV",{class:!0});var g=$(r);for(let w=0;w<c.length;w+=1)c[w].l(g);g.forEach(m),i=Q(_),_.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(r,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){I(u,e,_),b(e,l),b(l,n),b(e,o),b(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(r,null);b(e,i),a=!0},p(u,_){if(_[0]&40968){f=u[3][u[36]];let h;for(h=0;h<f.length;h+=1){const g=il(u,f,h);c[h]?(c[h].p(g,_),p(c[h],1)):(c[h]=ol(g),c[h].c(),p(c[h],1),c[h].m(r,null))}for(le(),h=f.length;h<c.length;h+=1)d(h);ne()}},i(u){if(!a){for(let _=0;_<f.length;_+=1)p(c[_]);a=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)v(c[_]);a=!1},d(u){u&&m(e),ze(c,u)}}}function ol(s){let e,l;function t(){return s[23](s[39])}return e=new Yn({props:{search:s[39]}}),e.$on("click",t),{c(){B(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){s=n;const r={};o[0]&8&&(r.search=s[39]),e.$set(r)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function fl(s){let e,l,t=s[3][s[36]]&&al(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,o){t&&t.m(n,o),I(n,e,o),l=!0},p(n,o){n[3][n[36]]?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=al(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(le(),v(t,1,1,()=>{t=null}),ne())},i(n){l||(p(t),l=!0)},o(n){v(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function cl(s){let e,l,t,n,o,r,i=s[8],a=[];for(let c=0;c<i.length;c+=1)a[c]=ul(rl(s,i,c));const f=c=>v(a[c],1,1,()=>{a[c]=null});return{c(){e=k("div"),l=k("div"),t=Z("Filters"),n=Y(),o=k("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=S(c,"DIV",{class:!0});var d=$(e);l=S(d,"DIV",{class:!0});var u=$(l);t=G(u,"Filters"),u.forEach(m),n=Q(d),o=S(d,"DIV",{class:!0});var _=$(o);for(let h=0;h<a.length;h+=1)a[h].l(_);_.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(o,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){I(c,e,d),b(e,l),b(l,t),b(e,n),b(e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null);r=!0},p(c,d){if(d[0]&256){i=c[8];let u;for(u=0;u<i.length;u+=1){const _=rl(c,i,u);a[u]?(a[u].p(_,d),p(a[u],1)):(a[u]=ul(_),a[u].c(),p(a[u],1),a[u].m(o,null))}for(le(),u=i.length;u<a.length;u+=1)f(u);ne()}},i(c){if(!r){for(let d=0;d<i.length;d+=1)p(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)v(a[d]);r=!1},d(c){c&&m(e),ze(a,c)}}}function ul(s){let e,l;return e=new Un({props:{filter:s[33]}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.filter=t[33]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function dl(s){let e=Ee(s[0])+"",l,t,n=Ee(s[1].dataset_manifest.num_items)+"",o,r;return{c(){l=Z(e),t=Z(" of "),o=Z(n),r=Z(" rows")},l(i){l=G(i,e),t=G(i," of "),o=G(i,n),r=G(i," rows")},m(i,a){I(i,l,a),I(i,t,a),I(i,o,a),I(i,r,a)},p(i,a){a[0]&1&&e!==(e=Ee(i[0])+"")&&fe(l,e),a[0]&2&&n!==(n=Ee(i[1].dataset_manifest.num_items)+"")&&fe(o,n)},d(i){i&&m(l),i&&m(t),i&&m(o),i&&m(r)}}}function ml(s){let e,l;return e=new dt({props:{value:s[30].path!=null?ye(s[30].path):void 0,text:s[30].text,disabled:s[30].disabled}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.value=t[30].path!=null?ye(t[30].path):void 0),n[0]&128&&(o.text=t[30].text),n[0]&128&&(o.disabled=t[30].disabled),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function li(s){let e,l,t=s[27],n=[];for(let r=0;r<t.length;r+=1)n[r]=ml(nl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Y()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Q(r)},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[27];let a;for(a=0;a<t.length;a+=1){const f=nl(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=ml(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function hl(s){let e,l;return e=new br({props:{label:s[26],$$slots:{default:[li]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.label=t[26]),n[0]&128|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ni(s){let e,l,t=Object.entries(s[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=hl(ll(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&128){t=Object.entries(r[7]);let a;for(a=0;a<t.length;a+=1){const f=ll(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=hl(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function _l(s){let e,l,t,n,o,r;return l=new pr({}),{c(){e=k("button"),B(l.$$.fragment),this.h()},l(i){e=S(i,"BUTTON",{});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=s[4]==null},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=[Ve(Ne.call(null,e,{text:"Clear sort"})),Pe(e,"click",s[18])],o=!0)},p(i,a){(!n||a[0]&16&&t!==(t=i[4]==null))&&(e.disabled=t)},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,xe(r)}}}function ri(s){let e,l;return e=new Ln({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function si(s){let e,l;return e=new jn({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ii(s){let e,l;return e=new zs({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function pl(s){let e,l;return e=new Ft({props:{open:!0,modalHeading:"Concept",passiveModal:!0,size:"lg",$$slots:{default:[ci]},$$scope:{ctx:s}}}),e.$on("close",s[24]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1024|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ai(s){let e,l;return e=new is({props:{concept:s[10].data}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.concept=t[10].data),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function oi(s){let e,l=s[10].error.message+"",t;return{c(){e=k("p"),t=Z(l)},l(n){e=S(n,"P",{});var o=$(e);t=G(o,l),o.forEach(m)},m(n,o){I(n,e,o),b(e,t)},p(n,o){o[0]&1024&&l!==(l=n[10].error.message+"")&&fe(t,l)},i:x,o:x,d(n){n&&m(e)}}}function fi(s){let e,l;return e=new Qe({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ci(s){let e,l,t,n;const o=[fi,oi,ai],r=[];function i(a,f){var c,d,u;return(c=a[10])!=null&&c.isLoading?0:(d=a[10])!=null&&d.isError?1:(u=a[10])!=null&&u.isSuccess?2:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),I(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function ui(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T=s[13].length>0&&ti(s),z=s[0]&&s[1]&&dl(s);c=new kt({props:{noLabel:!0,size:"sm",class:"w-80",selected:s[5],$$slots:{default:[ni]},$$scope:{ctx:s}}}),c.$on("update",s[16]);let F=s[6]!=null&&_l(s);const E=[ii,si,ri],R=[];function ee(U,M){var P,X,j;return((P=U[4])==null?void 0:P.order)==null?0:((X=U[4])==null?void 0:X.order)==="ASC"?1:((j=U[4])==null?void 0:j.order)==="DESC"?2:-1}~(h=ee(s))&&(g=R[h]=E[h](s));let K=s[2]&&pl(s);return{c(){e=k("div"),T&&T.c(),l=Y(),t=k("div"),n=k("div"),z&&z.c(),o=Y(),r=k("div"),i=k("div"),a=Z("Sort by"),f=Y(),B(c.$$.fragment),d=Y(),F&&F.c(),u=Y(),_=k("button"),g&&g.c(),N=Y(),K&&K.c(),C=ie(),this.h()},l(U){e=S(U,"DIV",{class:!0});var M=$(e);T&&T.l(M),l=Q(M),t=S(M,"DIV",{class:!0});var P=$(t);n=S(P,"DIV",{class:!0});var X=$(n);z&&z.l(X),X.forEach(m),o=Q(P),r=S(P,"DIV",{class:!0});var j=$(r);i=S(j,"DIV",{class:!0});var J=$(i);a=G(J,"Sort by"),J.forEach(m),f=Q(j),q(c.$$.fragment,j),d=Q(j),F&&F.l(j),u=Q(j),_=S(j,"BUTTON",{});var de=$(_);g&&g.l(de),de.forEach(m),j.forEach(m),P.forEach(m),M.forEach(m),N=Q(U),K&&K.l(U),C=ie(),this.h()},h(){D(n,"class","py-1"),D(i,"class","mr-1"),_.disabled=w=s[4]==null,D(r,"class","sort-container flex flex-row items-center gap-x-1"),D(t,"class","flex w-full flex-row items-center justify-between"),D(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(U,M){var P;I(U,e,M),T&&T.m(e,null),b(e,l),b(e,t),b(t,n),z&&z.m(n,null),b(t,o),b(t,r),b(r,i),b(i,a),b(r,f),A(c,r,null),b(r,d),F&&F.m(r,null),b(r,u),b(r,_),~h&&R[h].m(_,null),I(U,N,M),K&&K.m(U,M),I(U,C,M),L=!0,V||(O=[Ve(y=Ne.call(null,_,{text:((P=s[4])==null?void 0:P.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Pe(_,"click",s[17])],V=!0)},p(U,M){var j;U[13].length>0&&T.p(U,M),U[0]&&U[1]?z?z.p(U,M):(z=dl(U),z.c(),z.m(n,null)):z&&(z.d(1),z=null);const P={};M[0]&32&&(P.selected=U[5]),M[0]&128|M[1]&2048&&(P.$$scope={dirty:M,ctx:U}),c.$set(P),U[6]!=null?F?(F.p(U,M),M[0]&64&&p(F,1)):(F=_l(U),F.c(),p(F,1),F.m(r,u)):F&&(le(),v(F,1,1,()=>{F=null}),ne());let X=h;h=ee(U),h!==X&&(g&&(le(),v(R[X],1,1,()=>{R[X]=null}),ne()),~h?(g=R[h],g||(g=R[h]=E[h](U),g.c()),p(g,1),g.m(_,null)):g=null),(!L||M[0]&16&&w!==(w=U[4]==null))&&(_.disabled=w),y&&Ye(y.update)&&M[0]&16&&y.update.call(null,{text:((j=U[4])==null?void 0:j.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),U[2]?K?(K.p(U,M),M[0]&4&&p(K,1)):(K=pl(U),K.c(),p(K,1),K.m(C.parentNode,C)):K&&(le(),v(K,1,1,()=>{K=null}),ne())},i(U){L||(p(T),p(c.$$.fragment,U),p(F),p(g),p(K),L=!0)},o(U){v(T),v(c.$$.fragment,U),v(F),v(g),v(K),L=!1},d(U){U&&m(e),T&&T.d(),z&&z.d(),H(c),F&&F.d(),~h&&R[h].d(),U&&m(N),K&&K.d(U),U&&m(C),V=!1,xe(O)}}}function di(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,h=x,g=()=>(h(),h=Fe(t,M=>l(10,_=M)),t);s.$$.on_destroy.push(()=>h());let{totalNumRows:w}=e,{manifest:y}=e,N=Oe();ge(s,N,M=>l(22,u=M));let C=Xe();ge(s,C,M=>l(21,d=M));let L=null;const V=["keyword","semantic","concept"],O={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let T={};function z(M){M.type==="concept"&&l(2,L={namespace:M.concept_namespace,name:M.concept_name})}let F={};const E=M=>{const P=M.detail;P!==i&&N.setSortBy(P===""?null:Dt(P))},R=()=>{r!=null&&N.setSortBy(r.path),N.setSortOrder((r==null?void 0:r.order)==="ASC"?"DESC":"ASC")},ee=()=>{N.clearSorts()},K=M=>z(M),U=()=>l(2,L=null);return s.$$set=M=>{"totalNumRows"in M&&l(0,w=M.totalNumRows),"manifest"in M&&l(1,y=M.manifest)},s.$$.update=()=>{var M,P,X,j;if(s.$$.dirty[0]&4&&g(l(9,t=L?gr(L.namespace,L.name):void 0)),s.$$.dirty[0]&4194304&&l(20,n=Ct(u)),s.$$.dirty[0]&4194304&&l(8,o=u.query.filters),s.$$.dirty[0]&1048584){l(3,T={});for(const J of n)J.type&&(J.type in T||l(3,T[J.type]=[],T),T[J.type].push(J))}if(s.$$.dirty[0]&2097152&&l(4,r=Zr(d)),s.$$.dirty[0]&2097152)for(const J of((P=(M=d.selectRowsSchema)==null?void 0:M.data)==null?void 0:P.search_results)||[])F[ye(J.result_path)]=J;s.$$.dirty[0]&16&&l(5,i=r!=null&&r.path?ye(r.path):""),s.$$.dirty[0]&4194304&&l(6,a=u.query.sort_by),s.$$.dirty[0]&2097248&&l(19,f=((j=(X=d.selectRowsSchema)==null?void 0:X.data)==null?void 0:j.schema)!=null?[{path:[""],text:"None",disabled:a==null&&i!==""},...It(d.selectRowsSchema.data.schema).filter(J=>J.dtype!="embedding"&&J.dtype!="string_span").map(J=>({path:J.path,text:bt(J.path.slice(1)),disabled:!1}))]:[]),s.$$.dirty[0]&524288&&l(7,c=f.reduce((J,de)=>{const me=de.path[0];return(J[me]=J[me]||[]).push(de),J},{}))},[w,y,L,T,r,i,a,c,o,t,_,N,C,V,O,z,E,R,ee,f,n,d,u,K,U]}class mi extends we{constructor(e){super(),$e(this,e,di,ui,be,{totalNumRows:0,manifest:1},null,[-1,-1])}}function gl(s,e,l){var r,i,a;const t=s.slice();t[14]=e[l],t[18]=l;const n=t[3].length>1?`[${t[18]}]`:"";t[15]=n;const o=((a=(i=(r=t[7].data)==null?void 0:r.ui)==null?void 0:i.markdown_paths)==null?void 0:a.find(f=>Ze(f,t[0])))!=null;return t[16]=o,t}function bl(s){let e,l,t,n=s[0].join(".")+s[15]+"",o,r,i,a,f,c;return a=new os({props:{text:Ee(s[14]),row:s[1],markdown:s[16],spanPaths:s[5].spanPaths,valuePaths:s[5].valuePaths,datasetViewStore:s[8],datasetStore:s[2],embeddings:s[6]}}),{c(){e=k("div"),l=k("div"),t=k("div"),o=Z(n),r=Y(),i=k("div"),B(a.$$.fragment),f=Y(),this.h()},l(d){e=S(d,"DIV",{class:!0});var u=$(e);l=S(u,"DIV",{class:!0});var _=$(l);t=S(_,"DIV",{class:!0});var h=$(t);o=G(h,n),h.forEach(m),r=Q(_),i=S(_,"DIV",{class:!0});var g=$(i);q(a.$$.fragment,g),g.forEach(m),_.forEach(m),f=Q(u),u.forEach(m),this.h()},h(){D(t,"class","sticky top-0 z-10 w-full self-start border-t border-neutral-200 bg-neutral-100 px-2 py-2 pb-2 font-mono font-medium text-neutral-500"),D(i,"class","mx-4 font-normal"),D(l,"class","flex w-full flex-col"),D(e,"class","flex flex-row")},m(d,u){I(d,e,u),b(e,l),b(l,t),b(t,o),b(l,r),b(l,i),A(a,i,null),b(e,f),c=!0},p(d,u){(!c||u&9)&&n!==(n=d[0].join(".")+d[15]+"")&&fe(o,n);const _={};u&8&&(_.text=Ee(d[14])),u&2&&(_.row=d[1]),u&129&&(_.markdown=d[16]),u&32&&(_.spanPaths=d[5].spanPaths),u&32&&(_.valuePaths=d[5].valuePaths),u&4&&(_.datasetStore=d[2]),u&64&&(_.embeddings=d[6]),a.$set(_)},i(d){c||(p(a.$$.fragment,d),c=!0)},o(d){v(a.$$.fragment,d),c=!1},d(d){d&&m(e),H(a)}}}function hi(s){let e,l,t=s[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=bl(gl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,[i]){if(i&495){t=r[3];let a;for(a=0;a<t.length;a+=1){const f=gl(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=bl(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function _i(s,e,l){let t,n,o,r,i,a,f,c,d,u=x,_=()=>(u(),u=Fe(i,C=>l(7,d=C)),i);s.$$.on_destroy.push(()=>u());let{path:h}=e,{row:g}=e,{field:w}=e;const y=Oe();ge(s,y,C=>l(13,f=C));const N=Xe();return ge(s,N,C=>l(2,c=C)),s.$$set=C=>{"path"in C&&l(0,h=C.path),"row"in C&&l(1,g=C.row),"field"in C&&l(10,w=C.field)},s.$$.update=()=>{s.$$.dirty&4&&l(11,t=c.visibleFields||[]),s.$$.dirty&8196&&l(12,n=Pn(f,c)),s.$$.dirty&4100&&l(6,o=Rn(c,n)),s.$$.dirty&3072&&l(5,r=Gr(w,t)),s.$$.dirty&8192&&_(l(4,i=mt(f.namespace,f.datasetName))),s.$$.dirty&3&&l(3,a=vr(g,h).map(C=>wr.value(C)).filter(ir))},[h,g,c,a,i,r,o,d,y,N,w,t,n,f]}class pi extends we{constructor(e){super(),$e(this,e,_i,hi,be,{path:0,row:1,field:10})}}function vl(s,e,l){const t=s.slice();return t[8]=e[l],t[10]=l,t}function wl(s){let e,l=[],t=new Map,n,o,r=s[1];const i=a=>ye(a[8].path);for(let a=0;a<r.length;a+=1){let f=vl(s,r,a),c=i(f);t.set(c,l[a]=$l(c,f))}return{c(){e=k("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(m),this.h()},h(){D(e,"class","w-2/3 overflow-hidden"),$t(()=>s[7].call(e))},m(a,f){I(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=lr(e,s[7].bind(e)),o=!0},p(a,f){f&3&&(r=a[1],le(),l=$n(l,f,i,1,a,r,t,e,kn,$l,null,vl),ne())},i(a){if(!o){for(let f=0;f<r.length;f+=1)p(l[f]);o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);o=!1},d(a){a&&m(e);for(let f=0;f<l.length;f+=1)l[f].d();n()}}}function $l(s,e){let l,t,n,o;return t=new pi({props:{row:e[0],path:e[8].path,field:e[8]}}),{key:s,first:null,c(){l=k("div"),B(t.$$.fragment),n=Y(),this.h()},l(r){l=S(r,"DIV",{class:!0});var i=$(l);q(t.$$.fragment,i),n=Q(i),i.forEach(m),this.h()},h(){D(l,"class","border-gray-100"),_e(l,"border-b",e[10]<e[1].length-1),this.first=l},m(r,i){I(r,l,i),A(t,l,null),b(l,n),o=!0},p(r,i){e=r;const a={};i&1&&(a.row=e[0]),i&2&&(a.path=e[8].path),i&2&&(a.field=e[8]),t.$set(a),(!o||i&2)&&_e(l,"border-b",e[10]<e[1].length-1)},i(r){o||(p(t.$$.fragment,r),o=!0)},o(r){v(t.$$.fragment,r),o=!1},d(r){r&&m(l),H(t)}}}function gi(s){let e,l,t,n,o,r,i,a,f,c=s[1].length>0&&wl(s);return i=new cs({props:{row:s[0],visibleFields:s[2],selectRowsSchema:s[4]}}),{c(){e=k("div"),l=k("div"),c&&c.c(),t=Y(),n=k("div"),o=k("div"),r=k("div"),B(i.$$.fragment),this.h()},l(d){e=S(d,"DIV",{class:!0});var u=$(e);l=S(u,"DIV",{class:!0});var _=$(l);c&&c.l(_),t=Q(_),n=S(_,"DIV",{class:!0});var h=$(n);o=S(h,"DIV",{class:!0});var g=$(o);r=S(g,"DIV",{style:!0,class:!0});var w=$(r);q(i.$$.fragment,w),w.forEach(m),g.forEach(m),h.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){D(r,"style",a=`max-height: ${Math.max(kl,s[3])}px`),D(r,"class","overflow-y-auto"),D(o,"class","sticky top-0 self-start"),D(n,"class","flex h-full w-1/3 bg-neutral-100"),D(l,"class","flex h-full w-full flex-row"),D(e,"class","rounded border-x border-b border-neutral-200 shadow-md")},m(d,u){I(d,e,u),b(e,l),c&&c.m(l,null),b(l,t),b(l,n),b(n,o),b(o,r),A(i,r,null),f=!0},p(d,[u]){d[1].length>0?c?(c.p(d,u),u&2&&p(c,1)):(c=wl(d),c.c(),p(c,1),c.m(l,t)):c&&(le(),v(c,1,1,()=>{c=null}),ne());const _={};u&1&&(_.row=d[0]),u&4&&(_.visibleFields=d[2]),u&16&&(_.selectRowsSchema=d[4]),i.$set(_),(!f||u&8&&a!==(a=`max-height: ${Math.max(kl,d[3])}px`))&&D(r,"style",a)},i(d){f||(p(c),p(i.$$.fragment,d),f=!0)},o(d){v(c),v(i.$$.fragment,d),f=!1},d(d){d&&m(e),c&&c.d(),H(i)}}}const kl=320;function bi(s,e,l){let t,n,{row:o}=e,{mediaFields:r}=e,{visibleFields:i}=e;const a=Xe();ge(s,a,d=>l(6,n=d));let f=0;function c(){f=this.clientHeight,l(3,f)}return s.$$set=d=>{"row"in d&&l(0,o=d.row),"mediaFields"in d&&l(1,r=d.mediaFields),"visibleFields"in d&&l(2,i=d.visibleFields)},s.$$.update=()=>{var d;s.$$.dirty&64&&l(4,t=(d=n.selectRowsSchema)==null?void 0:d.data)},[o,r,i,f,t,a,n,c]}class vi extends we{constructor(e){super(),$e(this,e,bi,gi,be,{row:0,mediaFields:1,visibleFields:2})}}function Sl(s,e,l){const t=s.slice();return t[23]=e[l],t}function wi(s){let e,l;return{c(){e=k("div"),l=Z("No results."),this.h()},l(t){e=S(t,"DIV",{class:!0});var n=$(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){D(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){I(t,e,n),b(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function $i(s){let e,l;return{c(){e=k("div"),l=Z("Select fields to display"),this.h()},l(t){e=S(t,"DIV",{class:!0});var n=$(e);l=G(n,"Select fields to display"),n.forEach(m),this.h()},h(){D(e,"class","mt-12 w-full text-center text-gray-600")},m(t,n){I(t,e,n),b(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function ki(s){let e,l;return e=new Qe({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Si(s){var t,n;let e,l;return e=new En({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=s[2].error.body)==null?void 0:t.detail)||((n=s[2])==null?void 0:n.error.message)}}),{c(){B(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,r){A(e,o,r),l=!0},p(o,r){var a,f;const i={};r&4&&(i.subtitle=((a=o[2].error.body)==null?void 0:a.detail)||((f=o[2])==null?void 0:f.error.message)),e.$set(i)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){H(e,o)}}}function Ei(s){var t;let e,l;return e=new En({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=s[4].error.body)==null?void 0:t.detail)||s[4].error.message}}),{c(){B(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o&16&&(r.subtitle=((i=n[4].error.body)==null?void 0:i.detail)||n[4].error.message),e.$set(r)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function El(s){let e,l,t,n=s[6],o=[];for(let a=0;a<n.length;a+=1)o[a]=yl(Sl(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[6].length>0&&Dl(s);return{c(){e=k("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),i&&i.c(),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),i&&i.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(a,f){I(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);b(e,l),i&&i.m(e,null),s[21](e),t=!0},p(a,f){if(f&98){n=a[6];let c;for(c=0;c<n.length;c+=1){const d=Sl(a,n,c);o[c]?(o[c].p(d,f),p(o[c],1)):(o[c]=yl(d),o[c].c(),p(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[6].length>0?i?(i.p(a,f),f&64&&p(i,1)):(i=Dl(a),i.c(),p(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d(),s[21](null)}}}function yl(s){let e,l;return e=new vi({props:{visibleFields:s[1],row:s[23],mediaFields:s[5]}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.visibleFields=t[1]),n&64&&(o.row=t[23]),n&32&&(o.mediaFields=t[5]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Dl(s){let e,l;return e=new Os({props:{threshold:100}}),e.$on("loadMore",s[20]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function yi(s){let e,l,t,n,o,r,i;e=new mi({props:{totalNumRows:s[7],manifest:s[12].data}});const a=[Ei,Si,ki,$i,wi],f=[];function c(u,_){var h,g,w,y;return u[4].isError?0:(h=u[2])!=null&&h.isError?1:(g=u[4])!=null&&g.isFetching||u[13].isFetching||(w=u[2])!=null&&w.isFetching||u[3].isFetching?2:u[1].length===0?3:(y=u[4])!=null&&y.isSuccess&&u[6]&&u[6].length===0?4:-1}~(t=c(s))&&(n=f[t]=a[t](s));let d=s[6]&&s[1].length>0&&s[13].isSuccess&&s[5]!=null&&El(s);return{c(){B(e.$$.fragment),l=Y(),n&&n.c(),o=Y(),d&&d.c(),r=ie()},l(u){q(e.$$.fragment,u),l=Q(u),n&&n.l(u),o=Q(u),d&&d.l(u),r=ie()},m(u,_){A(e,u,_),I(u,l,_),~t&&f[t].m(u,_),I(u,o,_),d&&d.m(u,_),I(u,r,_),i=!0},p(u,[_]){const h={};_&128&&(h.totalNumRows=u[7]),_&4096&&(h.manifest=u[12].data),e.$set(h);let g=t;t=c(u),t===g?~t&&f[t].p(u,_):(n&&(le(),v(f[g],1,1,()=>{f[g]=null}),ne()),~t?(n=f[t],n?n.p(u,_):(n=f[t]=a[t](u),n.c()),p(n,1),n.m(o.parentNode,o)):n=null),u[6]&&u[1].length>0&&u[13].isSuccess&&u[5]!=null?d?(d.p(u,_),_&8290&&p(d,1)):(d=El(u),d.c(),p(d,1),d.m(r.parentNode,r)):d&&(le(),v(d,1,1,()=>{d=null}),ne())},i(u){i||(p(e.$$.fragment,u),p(n),p(d),i=!0)},o(u){v(e.$$.fragment,u),v(n),v(d),i=!1},d(u){H(e,u),u&&m(l),~t&&f[t].d(u),u&&m(o),d&&d.d(u),u&&m(r)}}}function Di(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,h,g=x,w=()=>(g(),g=Fe(r,j=>l(3,h=j)),r),y,N,C=x,L=()=>(C(),C=Fe(a,j=>l(4,N=j)),a),V,O,T=x,z=()=>(T(),T=Fe(t,j=>l(12,O=j)),t),F,E=x,R=()=>(E(),E=Fe(n,j=>l(13,F=j)),n);s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>C()),s.$$.on_destroy.push(()=>T()),s.$$.on_destroy.push(()=>E());const ee=Oe();ge(s,ee,j=>l(19,V=j));const K=Xe();ge(s,K,j=>l(18,y=j));let U=null;const M=ss(U),P=()=>N==null?void 0:N.fetchNextPage();function X(j){He[j?"unshift":"push"](()=>{U=j,l(0,U)})}return s.$$.update=()=>{var j,J,de,me,ae,Ie;s.$$.dirty&524288&&z(l(11,t=$r(V.namespace,V.datasetName))),s.$$.dirty&524288&&R(l(10,n=Vt(V.namespace,V.datasetName))),s.$$.dirty&524288&&l(17,o=kr(V)),s.$$.dirty&524288&&w(l(9,r=mt(V.namespace,V.datasetName))),s.$$.dirty&262144&&l(2,i=y.selectRowsSchema),s.$$.dirty&655364&&L(l(8,a=Sr(V.namespace,V.datasetName,o||{},i!=null&&i.isSuccess?i.data.schema:void 0))),s.$$.dirty&16&&l(7,f=(j=N.data)==null?void 0:j.pages[0].total_num_rows),s.$$.dirty&16&&l(6,c=(J=N.data)==null?void 0:J.pages.flatMap(se=>se.rows)),s.$$.dirty&262144&&l(1,d=(y.visibleFields||[]).sort((se,re)=>ye(se.path)>ye(re.path)?1:-1)),s.$$.dirty&262146&&l(16,u=((me=(de=y.selectRowsSchema)==null?void 0:de.data)==null?void 0:me.schema)!=null?Wr((Ie=(ae=y.selectRowsSchema)==null?void 0:ae.data)==null?void 0:Ie.schema,d):null),s.$$.dirty&65544&&l(5,_=h.data?Xr(u,h.data):[]),s.$$.dirty&1&&M.set(U)},nr(xr,M),[U,d,i,h,N,_,c,f,a,r,n,t,O,F,ee,K,u,o,y,V,P,X]}class Ii extends we{constructor(e){super(),$e(this,e,Di,yi,be,{})}}function Il(s,e,l){const t=s.slice();return t[47]=e[l],t}function Vl(s,e,l){const t=s.slice();return t[50]=e[l],t}function Nl(s){const e=s[5].find(function(...o){return s[38](s[53],...o)});s[54]=e;const l=s[54]!=null&&typeof s[54].id=="object"&&s[54].id.type==="field"&&s[54].id.isSignal;s[55]=l;const t=s[54]!=null&&typeof s[54].id=="object"&&s[54].id.type==="concept";s[56]=t}function Vi(s){let e,l,t=s[54].text+"",n,o,r=s[54].description&&Tl(s);return{c(){e=k("div"),l=k("div"),n=Z(t),o=Y(),r&&r.c(),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);l=S(a,"DIV",{});var f=$(l);n=G(f,t),f.forEach(m),o=Q(a),r&&r.l(a),a.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8"),_e(e,"isSignal",s[55]),_e(e,"isConcept",s[56])},m(i,a){I(i,e,a),b(e,l),b(l,n),b(e,o),r&&r.m(e,null)},p(i,a){a[0]&32|a[1]&4194304&&t!==(t=i[54].text+"")&&fe(n,t),i[54].description?r?r.p(i,a):(r=Tl(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null),a[0]&32|a[1]&4194304&&_e(e,"isSignal",i[55]),a[0]&32|a[1]&4194304&&_e(e,"isConcept",i[56])},i:x,o:x,d(i){i&&m(e),r&&r.d()}}}function Ni(s){let e,l,t,n,o,r,i;return l=new rt({props:{$$slots:{default:[Mi]},$$scope:{ctx:s}}}),{c(){e=k("div"),B(l.$$.fragment),t=Y(),n=k("div"),o=Z(`Semantic search:
                    `),r=Z(s[0]),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),t=Q(f),n=S(f,"DIV",{class:!0});var c=$(n);o=G(c,`Semantic search:
                    `),r=G(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){I(a,e,f),A(l,e,null),b(e,t),b(e,n),b(n,o),b(n,r),i=!0},p(a,f){const c={};f[1]&67108864&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(p(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),H(l)}}}function Ti(s){let e,l,t,n,o,r,i;return l=new rt({props:{$$slots:{default:[zi]},$$scope:{ctx:s}}}),{c(){e=k("div"),B(l.$$.fragment),t=Y(),n=k("div"),o=Z(`Keyword search:
                    `),r=Z(s[0]),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),t=Q(f),n=S(f,"DIV",{class:!0});var c=$(n);o=G(c,`Keyword search:
                    `),r=G(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){I(a,e,f),A(l,e,null),b(e,t),b(e,n),b(n,o),b(n,r),i=!0},p(a,f){const c={};f[1]&67108864&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(p(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),H(l)}}}function Ci(s){let e,l,t,n,o,r=s[0]!=""?":":"",i,a,f,c;return l=new rt({props:{$$slots:{default:[Pi]},$$scope:{ctx:s}}}),{c(){e=k("div"),B(l.$$.fragment),t=Y(),n=k("div"),o=Z("New concept"),i=Z(r),a=Y(),f=Z(s[0]),this.h()},l(d){e=S(d,"DIV",{class:!0});var u=$(e);q(l.$$.fragment,u),t=Q(u),n=S(u,"DIV",{class:!0});var _=$(n);o=G(_,"New concept"),i=G(_,r),a=Q(_),f=G(_,s[0]),_.forEach(m),u.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(d,u){I(d,e,u),A(l,e,null),b(e,t),b(e,n),b(n,o),b(n,i),b(n,a),b(n,f),c=!0},p(d,u){const _={};u[1]&67108864&&(_.$$scope={dirty:u,ctx:d}),l.$set(_),(!c||u[0]&1)&&r!==(r=d[0]!=""?":":"")&&fe(i,r),(!c||u[0]&1)&&fe(f,d[0])},i(d){c||(p(l.$$.fragment,d),c=!0)},o(d){v(l.$$.fragment,d),c=!1},d(d){d&&m(e),H(l)}}}function Fi(s){let e;return{c(){e=k("div")},l(l){e=S(l,"DIV",{}),$(e).forEach(m)},m(l,t){I(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function Tl(s){let e,l=s[54].description+"",t;return{c(){e=k("div"),t=Z(l),this.h()},l(n){e=S(n,"DIV",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","truncate text-xs text-gray-500")},m(n,o){I(n,e,o),b(e,t)},p(n,o){o[0]&32|o[1]&4194304&&l!==(l=n[54].description+"")&&fe(t,l)},d(n){n&&m(e)}}}function Mi(s){let e,l;return e=new qn({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function zi(s){let e,l;return e=new qn({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Pi(s){let e,l;return e=new gs({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ri(s){Nl(s);let e,l,t,n;const o=[Fi,Ci,Ti,Ni,Vi],r=[];function i(a,f){return a[54]==null?0:a[54].id==="new-concept"?1:a[54].id==="keyword-search"?2:a[54].id==="semantic-search"?3:4}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),I(a,t,f),n=!0},p(a,f){Nl(a);let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Cl(s){let e,l;return e=new dt({props:{value:ye(s[50]),text:ye(s[50])}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=ye(t[50])),n[0]&512&&(o.text=ye(t[50])),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Bi(s){let e,l,t=s[9],n=[];for(let r=0;r<t.length;r+=1)n[r]=Cl(Vl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&512){t=r[9];let a;for(a=0;a<t.length;a+=1){const f=Vl(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=Cl(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Fl(s){let e,l;return e=new kt({props:{size:"xl",class:"field-select w-48",selected:s[2]?ye(s[2]):"",disabled:s[9].length===0,warn:s[9].length===0,$$slots:{default:[Bi]},$$scope:{ctx:s}}}),e.$on("change",s[21]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&4&&(o.selected=t[2]?ye(t[2]):""),n[0]&512&&(o.disabled=t[9].length===0),n[0]&512&&(o.warn=t[9].length===0),n[0]&512|n[1]&67108864&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ml(s){let e,l;return e=new dt({props:{value:s[47].name,text:s[47].name}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=t[47].name),n[0]&16&&(o.text=t[47].name),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ai(s){let e,l,t=s[4].data||[],n=[];for(let r=0;r<t.length;r+=1)n[r]=Ml(Il(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&16){t=r[4].data||[];let a;for(a=0;a<t.length;a+=1){const f=Il(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=Ml(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Hi(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h=s[9],g,w,y,N,C,L,V;t=new yn({props:{disabled:s[3]||s[8],iconDescription:"Compute embedding index. This may be expensive.",icon:s[3]?Bt:s[8]?At:yt}}),t.$on("click",s[37]);function O(F){s[40](F)}let T={size:"xl",items:s[5],shouldFilterItem:Oi,placeholder:s[7],$$slots:{default:[Ri,({item:F})=>({53:F}),({item:F})=>[0,F?4194304:0]]},$$scope:{ctx:s}};s[0]!==void 0&&(T.value=s[0]),c=new ms({props:T}),s[39](c),He.push(()=>Ge(c,"value",O)),c.$on("select",s[20]);let z=Fl(s);return N=new kt({props:{size:"xl",selected:s[1]||"",name:s[1]||"",$$slots:{default:[Ai]},$$scope:{ctx:s}}}),N.$on("change",s[18]),{c(){e=k("div"),l=k("div"),B(t.$$.fragment),n=Y(),o=k("div"),r=k("div"),i=k("div"),a=k("div"),f=k("div"),B(c.$$.fragment),u=Y(),_=k("div"),z.c(),g=Y(),w=k("div"),y=k("div"),B(N.$$.fragment),this.h()},l(F){e=S(F,"DIV",{class:!0});var E=$(e);l=S(E,"DIV",{class:!0});var R=$(l);q(t.$$.fragment,R),R.forEach(m),n=Q(E),o=S(E,"DIV",{class:!0});var ee=$(o);r=S(ee,"DIV",{class:!0});var K=$(r);i=S(K,"DIV",{class:!0});var U=$(i);a=S(U,"DIV",{class:!0});var M=$(a);f=S(M,"DIV",{class:!0});var P=$(f);q(c.$$.fragment,P),P.forEach(m),M.forEach(m),U.forEach(m),K.forEach(m),ee.forEach(m),u=Q(E),_=S(E,"DIV",{class:!0});var X=$(_);z.l(X),X.forEach(m),g=Q(E),w=S(E,"DIV",{class:!0});var j=$(w);y=S(j,"DIV",{class:!0});var J=$(y);q(N.$$.fragment,J),J.forEach(m),j.forEach(m),E.forEach(m),this.h()},h(){D(l,"class","compute-embedding mr-1"),_e(l,"compute-embedding-indexing",s[8]),D(f,"class","flex-grow"),D(a,"class","flex w-full flex-row items-start justify-items-start"),D(i,"class","flex flex-row"),D(r,"class","w-full"),D(o,"class","search-container flex w-full flex-grow flex-row"),D(_,"class","mx-1"),D(y,"class","w-32"),D(w,"class","embedding-select flex flex-row"),D(e,"class","border-1 flex w-full flex-row items-center")},m(F,E){I(F,e,E),b(e,l),A(t,l,null),b(e,n),b(e,o),b(o,r),b(r,i),b(i,a),b(a,f),A(c,f,null),b(e,u),b(e,_),z.m(_,null),b(e,g),b(e,w),b(w,y),A(N,y,null),C=!0,L||(V=[Ve(Ne.call(null,_,{text:"Select the field to search over."})),Ve(Ne.call(null,y,{text:"Select the embedding to use."}))],L=!0)},p(F,E){const R={};E[0]&264&&(R.disabled=F[3]||F[8]),E[0]&264&&(R.icon=F[3]?Bt:F[8]?At:yt),t.$set(R),(!C||E[0]&256)&&_e(l,"compute-embedding-indexing",F[8]);const ee={};E[0]&32&&(ee.items=F[5]),E[0]&128&&(ee.placeholder=F[7]),E[0]&33|E[1]&71303168&&(ee.$$scope={dirty:E,ctx:F}),!d&&E[0]&1&&(d=!0,ee.value=F[0],We(()=>d=!1)),c.$set(ee),E[0]&512&&be(h,h=F[9])?(le(),v(z,1,1,x),ne(),z=Fl(F),z.c(),p(z,1),z.m(_,null)):z.p(F,E);const K={};E[0]&2&&(K.selected=F[1]||""),E[0]&2&&(K.name=F[1]||""),E[0]&16|E[1]&67108864&&(K.$$scope={dirty:E,ctx:F}),N.$set(K)},i(F){C||(p(t.$$.fragment,F),p(c.$$.fragment,F),p(z),p(N.$$.fragment,F),C=!0)},o(F){v(t.$$.fragment,F),v(c.$$.fragment,F),v(z),v(N.$$.fragment,F),C=!1},d(F){F&&m(e),H(t),s[39](null),H(c),z.d(F),H(N),L=!1,xe(V)}}}const Oi=(s,e)=>s.text.toLowerCase().includes(e.toLowerCase())||s.id==="new-concept";function qi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T,z,F,E=x,R=()=>(E(),E=Fe(t,oe=>l(35,F=oe)),t),ee;s.$$.on_destroy.push(()=>E());const K=Oe();ge(s,K,oe=>l(34,z=oe));const U=Xe();ge(s,U,oe=>l(33,O=oe));const M=On();ge(s,M,oe=>l(36,ee=oe));function P(oe,De,Re){if(De==null||oe==null||r==null)return[];const Be=De?nt(De):[],Le=[];for(const Ae of Be){if(Ae.dtype==null||Ae.dtype==="embedding"||Ae.dtype==="binary"||!yr(Ae.path,r))continue;const Ke=Dr(Ae);if((Ke==null?void 0:Ke.signal_name)==="concept_score"||(Re==null?void 0:Re.some(Jn=>Jn.name===(Ke==null?void 0:Ke.signal_name))))continue;const zt=zn(Ae.path),Pt=bt(Ae.path.slice(r.length));if(Vn(Ae.dtype)){Le.push({id:{type:"field",path:Ae.path,sort:"DESC",isSignal:Ke!=null},text:Pt,description:`Sort descending by ${zt}`});continue}if(Ae.dtype==="string"||Ae.dtype==="string_span"){if(Ke==null)continue;Le.push({id:{type:"field",path:Ae.path,op:"exists",isSignal:Ke!=null},text:Pt,description:`Find documents with ${zt}`});continue}}return Le}const X=Dn();ge(s,X,oe=>l(43,C=oe));const j=In();ge(s,j,oe=>l(4,T=oe));const J=(oe,De)=>`${ye(oe||"")}_${De}`;let de={};const me=Er();ge(s,me,oe=>l(32,V=oe));const ae=Nt();ge(s,ae,oe=>l(31,L=oe));let Ie=[],se="",re;const ue=oe=>{l(1,c=oe.target.value),K.setSearchEmbedding(oe.target.value)},pe=()=>{c!=null&&(l(22,de[J(r,c)]=!0,de),C.mutate([n,o,{leaf_path:Dt(r||[]),signal:{signal_name:c}}]))};let W;const te=(oe,De)=>{r==null||c==null||(K.addSearch({path:r,type:"concept",concept_namespace:oe,concept_name:De,embedding:c}),W.clear())},ce=oe=>{if(r!=null){if(oe.detail.selectedId==="new-concept"){se===re.id&&l(0,se="");const De=se.split("/",2);let Re="",Be="";De.length===2?[Re,Be]=De:[Be]=De,tt({command:lt.CreateConcept,namespace:Re,conceptName:Be,dataset:{namespace:n,name:o},path:r,onCreate:Le=>te(Le.detail.namespace,Le.detail.name)})}else if(oe.detail.selectedId==="keyword-search"){if(se=="")return;K.addSearch({path:r,type:"keyword",query:se})}else if(oe.detail.selectedId=="semantic-search"){if(se==""||c==null)return;K.addSearch({path:r,type:"semantic",query:se,embedding:c})}else if(oe.detail.selectedId.type==="concept")te(oe.detail.selectedId.namespace,oe.detail.selectedId.name);else if(oe.detail.selectedId.type==="field"){const De=oe.detail.selectedId;if(De.sort!=null)K.setSortBy(De.path),K.setSortOrder(De.sort);else if(De.op!=null)K.addFilter({path:De.path,op:De.op});else throw new Error(`Unknown search type ${oe.detail.selectedId}`)}else throw new Error(`Unknown search type ${oe.detail.selectedId}`);W.clear()}},qe=oe=>{K.setSearchPath(oe.target.value)},et=()=>{pe()},he=(oe,De)=>De.id===oe.id;function je(oe){He[oe?"unshift":"push"](()=>{W=oe,l(6,W)})}function Je(oe){se=oe,l(0,se)}return s.$$.update=()=>{var oe,De;s.$$.dirty[1]&8&&R(l(10,t=mt(z.namespace,z.datasetName))),s.$$.dirty[1]&8&&(n=z.namespace),s.$$.dirty[1]&8&&(o=z.datasetName),s.$$.dirty[1]&12&&l(2,r=Pn(z,O)),s.$$.dirty[0]&4|s.$$.dirty[1]&8&&l(24,i=Ct(z,r)),s.$$.dirty[0]&16|s.$$.dirty[1]&4&&l(26,a=P(O.stats,O.schema,T.data)),s.$$.dirty[1]&4&&l(9,f=(O.visibleFields||[]).filter(Re=>Re.dtype==="string").map(Re=>ye(Re.path))),s.$$.dirty[0]&20|s.$$.dirty[1]&60&&l(1,c=es(ee,F.data,z,O,r,(T.data||[]).map(Re=>Re.name))),s.$$.dirty[0]&4|s.$$.dirty[1]&4&&l(30,d=Rn(O,r)),s.$$.dirty[0]&1073741826&&l(3,u=d!=null&&!!d.includes(c||"")),s.$$.dirty[0]&4194318&&l(8,_=!u&&de[J(r,c)]),s.$$.dirty[0]&8&&l(7,h=u?"Search by keyword, field or concept.":"Search by keyword or field. Compute embedding to enable concept search."),s.$$.dirty[1]&1&&l(29,g=(De=(oe=L.data)==null?void 0:oe.user)==null?void 0:De.id),s.$$.dirty[0]&536870912|s.$$.dirty[1]&2&&l(25,w=ts(V.data||[],g)),s.$$.dirty[0]&9&&l(23,re={id:"new-concept",text:se,disabled:!u}),s.$$.dirty[0]&1&&l(28,y={id:"keyword-search",text:se}),s.$$.dirty[0]&9&&l(27,N={id:"semantic-search",text:se,disabled:!u}),s.$$.dirty[0]&528482315|s.$$.dirty[1]&3&&l(5,Ie=V!=null&&V.data?[...se!=""?[y]:[],...se!=""&&c?[N]:[],re,...a,...w.flatMap(Re=>Re.concepts.map(Be=>({id:{namespace:Be.namespace,name:Be.name,type:"concept"},text:ls(Be.namespace,Be.name,L.data),description:Be.description,disabled:!u||i.some(Le=>Le.type==="concept"&&Le.concept_namespace===Be.namespace&&Le.concept_name===Be.name)})))]:[])},[se,c,r,u,T,Ie,W,h,_,f,t,K,U,M,X,j,me,ae,ue,pe,ce,qe,de,re,i,w,a,N,y,g,d,L,V,O,z,F,ee,et,he,je,Je]}class ji extends we{constructor(e){super(),$e(this,e,qi,Hi,be,{},null,[-1,-1])}}function Li(s){let e,l;return e=new yn({props:{$$slots:{default:[Yi]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ui(s){let e,l;return{c(){e=k("span"),l=Z("Invalid query"),this.h()},l(t){e=S(t,"SPAN",{class:!0});var n=$(e);l=G(n,"Invalid query"),n.forEach(m),this.h()},h(){D(e,"class","text-red-500")},m(t,n){I(t,e,n),b(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Yi(s){let e;return{c(){e=Z("Apply")},l(l){e=G(l,"Apply")},m(l,t){I(l,e,t)},d(l){l&&m(e)}}}function Qi(s){let e,l,t,n,o,r,i,a,f,c,d;const u=[Ui,Li],_=[];function h(g,w){return g[0]?g[3]?1:-1:0}return~(r=h(s))&&(i=_[r]=u[r](s)),{c(){e=k("pre"),l=Z(""),t=Z(s[2]),n=Z(`
`),o=Y(),i&&i.c(),a=ie(),this.h()},l(g){e=S(g,"PRE",{class:!0,contenteditable:!0});var w=$(e);l=G(w,""),t=G(w,s[2]),n=G(w,`
`),w.forEach(m),o=Q(g),i&&i.l(g),a=ie(),this.h()},h(){D(e,"class","whitespace-pre bg-gray-50 p-4 font-mono"),D(e,"contenteditable",""),s[1]===void 0&&$t(()=>s[8].call(e)),_e(e,"outline-red-500",!s[0])},m(g,w){I(g,e,w),b(e,l),b(e,t),b(e,n),s[1]!==void 0&&(e.innerText=s[1]),I(g,o,w),~r&&_[r].m(g,w),I(g,a,w),f=!0,c||(d=Pe(e,"input",s[8]),c=!0)},p(g,[w]){(!f||w&4)&&rr(t,g[2]),w&2&&g[1]!==e.innerText&&(e.innerText=g[1]),(!f||w&1)&&_e(e,"outline-red-500",!g[0]);let y=r;r=h(g),r===y?~r&&_[r].p(g,w):(i&&(le(),v(_[y],1,1,()=>{_[y]=null}),ne()),~r?(i=_[r],i?i.p(g,w):(i=_[r]=u[r](g),i.c()),p(i,1),i.m(a.parentNode,a)):i=null)},i(g){f||(p(i),f=!0)},o(g){v(i),f=!1},d(g){g&&m(e),g&&m(o),~r&&_[r].d(g),g&&m(a),c=!1,d()}}}function Ji(s,e,l){let t,n,o,r,i;const a=Oe();ge(s,a,u=>l(7,i=u));let f=!0;function c(){_t(a,i.query=JSON.parse(o),i)}function d(){o=this.innerText,l(1,o),l(2,n),l(6,t),l(7,i)}return s.$$.update=()=>{if(s.$$.dirty&128&&l(6,t=i.query),s.$$.dirty&64&&l(2,n=t?JSON.stringify(t,null,2):""),s.$$.dirty&4&&l(1,o=n),s.$$.dirty&2)try{JSON.parse(o),l(0,f=!0)}catch{l(0,f=!1)}s.$$.dirty&67&&l(3,r=f&&!Ir(JSON.parse(o),t))},[f,o,n,r,a,c,t,i,d]}class Ki extends we{constructor(e){super(),$e(this,e,Ji,Qi,be,{})}}function zl(s){let e,l;return e=new mr({props:{light:!0,flipped:!0,$$slots:{default:[Zi]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&536871167&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Pl(s){let e,l;return e=new ot({props:{text:"Sort by"}}),e.$on("click",s[19]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Rl(s){let e,l;return e=new ot({props:{text:"Filter"}}),e.$on("click",s[20]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Bl(s){let e,l,t,n,o,r;return l=new ot({props:{disabled:!s[7],text:"Compute embedding"}}),l.$on("click",s[21]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=Ve(t=Ne.call(null,e,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Ye(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,r()}}}function Al(s){let e,l;return e=new ot({props:{text:"Preview signal"}}),e.$on("click",s[22]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Hl(s){let e,l,t,n,o,r;return l=new ot({props:{text:"Compute signal",disabled:!s[7]}}),l.$on("click",s[23]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=Ve(t=Ne.call(null,e,{text:s[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Ye(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute signals over this dataset."})},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,r()}}}function Ol(s){let e,l,t,n,o,r;return l=new ot({props:{disabled:!s[6],text:"Delete signal"}}),l.$on("click",s[24]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(i,a){I(i,e,a),A(l,e,null),n=!0,o||(r=Ve(t=Ne.call(null,e,{text:s[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(i,a){const f={};a&64&&(f.disabled=!i[6]),l.$set(f),t&&Ye(t.update)&&a&64&&t.update.call(null,{text:i[6]?"":"User does not have access to delete signals for this dataset."})},i(i){n||(p(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),H(l),o=!1,r()}}}function Zi(s){let e=gt(s[0]),l,t=Et(s[0]),n,o,r,i,a,f,c=e&&Pl(s),d=t&&Rl(s),u=!s[2]&&Bl(s),_=!s[2]&&Al(s),h=!s[2]&&Hl(s),g=s[1]&&Ol(s);return{c(){c&&c.c(),l=Y(),d&&d.c(),n=Y(),u&&u.c(),o=Y(),_&&_.c(),r=Y(),h&&h.c(),i=Y(),g&&g.c(),a=ie()},l(w){c&&c.l(w),l=Q(w),d&&d.l(w),n=Q(w),u&&u.l(w),o=Q(w),_&&_.l(w),r=Q(w),h&&h.l(w),i=Q(w),g&&g.l(w),a=ie()},m(w,y){c&&c.m(w,y),I(w,l,y),d&&d.m(w,y),I(w,n,y),u&&u.m(w,y),I(w,o,y),_&&_.m(w,y),I(w,r,y),h&&h.m(w,y),I(w,i,y),g&&g.m(w,y),I(w,a,y),f=!0},p(w,y){y&1&&(e=gt(w[0])),e?c?(c.p(w,y),y&1&&p(c,1)):(c=Pl(w),c.c(),p(c,1),c.m(l.parentNode,l)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),y&1&&(t=Et(w[0])),t?d?(d.p(w,y),y&1&&p(d,1)):(d=Rl(w),d.c(),p(d,1),d.m(n.parentNode,n)):d&&(le(),v(d,1,1,()=>{d=null}),ne()),w[2]?u&&(le(),v(u,1,1,()=>{u=null}),ne()):u?(u.p(w,y),y&4&&p(u,1)):(u=Bl(w),u.c(),p(u,1),u.m(o.parentNode,o)),w[2]?_&&(le(),v(_,1,1,()=>{_=null}),ne()):_?(_.p(w,y),y&4&&p(_,1)):(_=Al(w),_.c(),p(_,1),_.m(r.parentNode,r)),w[2]?h&&(le(),v(h,1,1,()=>{h=null}),ne()):h?(h.p(w,y),y&4&&p(h,1)):(h=Hl(w),h.c(),p(h,1),h.m(i.parentNode,i)),w[1]?g?(g.p(w,y),y&2&&p(g,1)):(g=Ol(w),g.c(),p(g,1),g.m(a.parentNode,a)):g&&(le(),v(g,1,1,()=>{g=null}),ne())},i(w){f||(p(c),p(d),p(u),p(_),p(h),p(g),f=!0)},o(w){v(c),v(d),v(u),v(_),v(h),v(g),f=!1},d(w){c&&c.d(w),w&&m(l),d&&d.d(w),w&&m(n),u&&u.d(w),w&&m(o),_&&_.d(w),w&&m(r),h&&h.d(w),w&&m(i),g&&g.d(w),w&&m(a)}}}function Gi(s){let e,l,t,n=ye(s[0].path)+"",o,r,i,a,f;return{c(){e=k("p"),l=Z("Confirm deleting "),t=k("code"),o=Z(n),r=Z(" ?"),i=Y(),a=k("p"),f=Z("This is a permanent action and cannot be undone."),this.h()},l(c){e=S(c,"P",{class:!0});var d=$(e);l=G(d,"Confirm deleting "),t=S(d,"CODE",{});var u=$(t);o=G(u,n),u.forEach(m),r=G(d," ?"),d.forEach(m),i=Q(c),a=S(c,"P",{class:!0});var _=$(a);f=G(_,"This is a permanent action and cannot be undone."),_.forEach(m),this.h()},h(){D(e,"class","!text-lg"),D(a,"class","mt-2")},m(c,d){I(c,e,d),b(e,l),b(e,t),b(t,o),b(e,r),I(c,i,d),I(c,a,d),b(a,f)},p(c,d){d&1&&n!==(n=ye(c[0].path)+"")&&fe(o,n)},d(c){c&&m(e),c&&m(i),c&&m(a)}}}function Wi(s){let e,l,t,n,o=s[8]&&zl(s);function r(a){s[25](a)}let i={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:s[9].isLoading?Ht:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Gi]},$$scope:{ctx:s}};return s[3]!==void 0&&(i.open=s[3]),l=new Ft({props:i}),He.push(()=>Ge(l,"open",r)),l.$on("click:button--secondary",s[26]),l.$on("open",s[27]),l.$on("close",s[28]),l.$on("submit",s[14]),{c(){o&&o.c(),e=Y(),B(l.$$.fragment)},l(a){o&&o.l(a),e=Q(a),q(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),I(a,e,f),A(l,a,f),n=!0},p(a,[f]){a[8]?o?(o.p(a,f),f&256&&p(o,1)):(o=zl(a),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(le(),v(o,1,1,()=>{o=null}),ne());const c={};f&512&&(c.primaryButtonIcon=a[9].isLoading?Ht:void 0),f&536870913&&(c.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,c.open=a[3],We(()=>t=!1)),l.$set(c)},i(a){n||(p(o),p(l.$$.fragment,a),n=!0)},o(a){v(o),v(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),H(l,a)}}}function Xi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,h,{field:g}=e,w=!1;const y=Oe();ge(s,y,P=>l(18,h=P));const N=Xe();ge(s,N,P=>l(17,_=P));const C=Vr();ge(s,C,P=>l(9,d=P));const L=Nt();ge(s,L,P=>l(16,u=P));function V(){d.mutate([t,n,{signal_path:g.path}],{onSuccess:()=>{l(3,w=!1),y.deleteSignal(g.path)}})}const O=()=>y.addSortBy(g.path),T=()=>tt({command:lt.EditFilter,namespace:t,datasetName:n,path:g.path}),z=()=>tt({command:lt.ComputeEmbedding,namespace:t,datasetName:n,path:g==null?void 0:g.path}),F=()=>tt({command:lt.PreviewConcept,namespace:t,datasetName:n,path:g==null?void 0:g.path}),E=()=>tt({command:lt.ComputeSignal,namespace:t,datasetName:n,path:g==null?void 0:g.path}),R=()=>l(3,w=!0);function ee(P){w=P,l(3,w)}const K=()=>l(3,w=!1);function U(P){ht.call(this,s,P)}function M(P){ht.call(this,s,P)}return s.$$set=P=>{"field"in P&&l(0,g=P.field)},s.$$.update=()=>{var P,X,j;s.$$.dirty&262144&&l(5,t=h.namespace),s.$$.dirty&262144&&l(4,n=h.datasetName),s.$$.dirty&1&&l(2,o=it(g)),s.$$.dirty&1&&l(1,r=Tt(g)),s.$$.dirty&131073&&l(15,i=Bn(((P=_.selectRowsSchema)==null?void 0:P.data)||null,g.path)),s.$$.dirty&32775&&l(8,a=(gt(g)||Et(g)||!o||r)&&!i),s.$$.dirty&65536&&l(7,f=(X=u.data)==null?void 0:X.access.dataset.compute_signals),s.$$.dirty&65536&&l(6,c=(j=u.data)==null?void 0:j.access.dataset.delete_signals)},[g,r,o,w,n,t,c,f,a,d,y,N,C,L,V,i,u,_,h,O,T,z,F,E,R,ee,K,U,M]}class xi extends we{constructor(e){super(),$e(this,e,Xi,Wi,be,{field:0})}}function ql(s,e,l){const t=s.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const r=Ee(t[8]);return t[11]=r,t}function jl(s){let e,l,t=s[9]+"",n,o,r,i,a,f=s[11]+"",c,d,u,_,h;function g(){return s[6](s[7])}return{c(){e=k("button"),l=k("div"),n=Z(t),r=Y(),i=k("div"),a=k("div"),c=Z(f),u=Y(),this.h()},l(w){e=S(w,"BUTTON",{class:!0});var y=$(e);l=S(y,"DIV",{title:!0,class:!0});var N=$(l);n=G(N,t),N.forEach(m),r=Q(y),i=S(y,"DIV",{class:!0});var C=$(i);a=S(C,"DIV",{title:!0,class:!0});var L=$(a);c=G(L,f),L.forEach(m),C.forEach(m),u=Q(y),y.forEach(m),this.h()},h(){D(l,"title",o=s[9]),D(l,"class","w-48 flex-none truncate px-2"),D(a,"title",d=s[11]),D(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),ct(a,"width",s[10]),D(i,"class","w-36 border-l border-gray-300 pl-2"),D(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,y){I(w,e,y),b(e,l),b(l,n),b(e,r),b(e,i),b(i,a),b(a,c),b(e,u),_||(h=Pe(e,"click",g),_=!0)},p(w,y){s=w,y&1&&t!==(t=s[9]+"")&&fe(n,t),y&1&&o!==(o=s[9])&&D(l,"title",o),y&1&&f!==(f=s[11]+"")&&fe(c,f),y&1&&d!==(d=s[11])&&D(a,"title",d),y&3&&ct(a,"width",s[10])},d(w){w&&m(e),_=!1,h()}}}function ea(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=jl(ql(s,l,n));return{c(){e=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=S(n,"DIV",{class:!0});var o=$(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){D(e,"class","histogram")},m(n,o){I(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const i=ql(n,l,r);t[r]?t[r].p(i,o):(t[r]=jl(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:x,o:x,d(n){n&&m(e),ze(t,n)}}}function ta(s,e,l){let t,{field:n}=e,{counts:o}=e,{bins:r}=e;function i(c){if(c==null)return Ee(c);if(r==null||n.bins!=null)return Ee(c);const[d,u]=r[c.toString()];return d==null?`< ${Ee(u)}`:u==null?`≥ ${Ee(d)}`:`${Ee(d)} .. ${Ee(u)}`}const a=wt(),f=c=>a("row-click",{value:c});return s.$$set=c=>{"field"in c&&l(4,n=c.field),"counts"in c&&l(0,o=c.counts),"bins"in c&&l(5,r=c.bins)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=Math.max(...o.map(([c,d])=>d)))},[o,t,i,a,n,r,f]}class la extends we{constructor(e){super(),$e(this,e,ta,ea,be,{field:4,counts:0,bins:5})}}function na(s){let e,l,t,n,o,r,i,a,f,c,d,u=Ee(s[4].total_count)+"",_,h,g,w,y,N,C,L,V,O,T,z,F=Ee(s[4].approx_count_distinct)+"",E,R,ee,K,U,M;r=new ut({props:{class:"inline"}}),N=new ut({props:{class:"inline"}});let P=s[4].avg_text_length&&Ll(s),X=s[4].min_val&&s[4].max_val&&Ul(s);return{c(){e=k("table"),l=k("tbody"),t=k("tr"),n=k("td"),o=k("span"),B(r.$$.fragment),i=Y(),a=k("span"),f=Z("Total count"),c=Y(),d=k("td"),_=Z(u),h=Y(),g=k("tr"),w=k("td"),y=k("span"),B(N.$$.fragment),C=Y(),L=k("span"),V=Z("Unique values"),O=Y(),T=k("td"),z=Z("~"),E=Z(F),R=Y(),P&&P.c(),ee=Y(),X&&X.c(),this.h()},l(j){e=S(j,"TABLE",{class:!0});var J=$(e);l=S(J,"TBODY",{});var de=$(l);t=S(de,"TR",{});var me=$(t);n=S(me,"TD",{class:!0});var ae=$(n);o=S(ae,"SPAN",{});var Ie=$(o);q(r.$$.fragment,Ie),Ie.forEach(m),i=Q(ae),a=S(ae,"SPAN",{});var se=$(a);f=G(se,"Total count"),se.forEach(m),ae.forEach(m),c=Q(me),d=S(me,"TD",{class:!0});var re=$(d);_=G(re,u),re.forEach(m),me.forEach(m),h=Q(de),g=S(de,"TR",{});var ue=$(g);w=S(ue,"TD",{class:!0});var pe=$(w);y=S(pe,"SPAN",{});var W=$(y);q(N.$$.fragment,W),W.forEach(m),C=Q(pe),L=S(pe,"SPAN",{});var te=$(L);V=G(te,"Unique values"),te.forEach(m),pe.forEach(m),O=Q(ue),T=S(ue,"TD",{class:!0});var ce=$(T);z=G(ce,"~"),E=G(ce,F),ce.forEach(m),ue.forEach(m),R=Q(de),P&&P.l(de),ee=Q(de),X&&X.l(de),de.forEach(m),J.forEach(m),this.h()},h(){D(n,"class","svelte-1tctrjz"),D(d,"class","svelte-1tctrjz"),D(w,"class","svelte-1tctrjz"),D(T,"class","svelte-1tctrjz"),D(e,"class","stats-table w-full svelte-1tctrjz")},m(j,J){I(j,e,J),b(e,l),b(l,t),b(t,n),b(n,o),A(r,o,null),b(n,i),b(n,a),b(a,f),b(t,c),b(t,d),b(d,_),b(l,h),b(l,g),b(g,w),b(w,y),A(N,y,null),b(w,C),b(w,L),b(L,V),b(g,O),b(g,T),b(T,z),b(T,E),b(l,R),P&&P.m(l,null),b(l,ee),X&&X.m(l,null),K=!0,U||(M=[Ve(Ne.call(null,o,{text:"Total number of rows where the value is defined."})),Ve(Ne.call(null,y,{text:"An approximation of the total number of unique values."}))],U=!0)},p(j,J){(!K||J&16)&&u!==(u=Ee(j[4].total_count)+"")&&fe(_,u),(!K||J&16)&&F!==(F=Ee(j[4].approx_count_distinct)+"")&&fe(E,F),j[4].avg_text_length?P?(P.p(j,J),J&16&&p(P,1)):(P=Ll(j),P.c(),p(P,1),P.m(l,ee)):P&&(le(),v(P,1,1,()=>{P=null}),ne()),j[4].min_val&&j[4].max_val?X?(X.p(j,J),J&16&&p(X,1)):(X=Ul(j),X.c(),p(X,1),X.m(l,null)):X&&(le(),v(X,1,1,()=>{X=null}),ne())},i(j){K||(p(r.$$.fragment,j),p(N.$$.fragment,j),p(P),p(X),K=!0)},o(j){v(r.$$.fragment,j),v(N.$$.fragment,j),v(P),v(X),K=!1},d(j){j&&m(e),H(r),H(N),P&&P.d(),X&&X.d(),U=!1,xe(M)}}}function ra(s){let e,l;return e=new Qe({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function sa(s){let e,l,t=s[2].error.message+"",n;return{c(){e=k("p"),l=Z("Error: "),n=Z(t)},l(o){e=S(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){I(o,e,r),b(e,l),b(e,n)},p(o,r){r&4&&t!==(t=o[2].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function Ll(s){let e,l,t,n,o,r,i,a,f,c=Ee(s[4].avg_text_length)+"",d,u,_,h;return n=new ut({props:{class:"inline"}}),{c(){e=k("tr"),l=k("td"),t=k("span"),B(n.$$.fragment),o=Y(),r=k("span"),i=Z("Average text length"),a=Y(),f=k("td"),d=Z(c),this.h()},l(g){e=S(g,"TR",{});var w=$(e);l=S(w,"TD",{class:!0});var y=$(l);t=S(y,"SPAN",{});var N=$(t);q(n.$$.fragment,N),N.forEach(m),o=Q(y),r=S(y,"SPAN",{});var C=$(r);i=G(C,"Average text length"),C.forEach(m),y.forEach(m),a=Q(w),f=S(w,"TD",{class:!0});var L=$(f);d=G(L,c),L.forEach(m),w.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(g,w){I(g,e,w),b(e,l),b(l,t),A(n,t,null),b(l,o),b(l,r),b(r,i),b(e,a),b(e,f),b(f,d),u=!0,_||(h=Ve(Ne.call(null,t,{text:"The average length of the text in characters."})),_=!0)},p(g,w){(!u||w&16)&&c!==(c=Ee(g[4].avg_text_length)+"")&&fe(d,c)},i(g){u||(p(n.$$.fragment,g),u=!0)},o(g){v(n.$$.fragment,g),u=!1},d(g){g&&m(e),H(n),_=!1,h()}}}function Ul(s){let e,l,t,n,o,r,i,a,f,c=Ee(s[4].min_val)+"",d,u,_=Ee(s[4].max_val)+"",h,g,w,y;return n=new ut({props:{class:"inline"}}),{c(){e=k("tr"),l=k("td"),t=k("span"),B(n.$$.fragment),o=Y(),r=k("span"),i=Z("Range"),a=Y(),f=k("td"),d=Z(c),u=Z(" .. "),h=Z(_),this.h()},l(N){e=S(N,"TR",{});var C=$(e);l=S(C,"TD",{class:!0});var L=$(l);t=S(L,"SPAN",{});var V=$(t);q(n.$$.fragment,V),V.forEach(m),o=Q(L),r=S(L,"SPAN",{});var O=$(r);i=G(O,"Range"),O.forEach(m),L.forEach(m),a=Q(C),f=S(C,"TD",{class:!0});var T=$(f);d=G(T,c),u=G(T," .. "),h=G(T,_),T.forEach(m),C.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(N,C){I(N,e,C),b(e,l),b(l,t),A(n,t,null),b(l,o),b(l,r),b(r,i),b(e,a),b(e,f),b(f,d),b(f,u),b(f,h),g=!0,w||(y=Ve(Ne.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(N,C){(!g||C&16)&&c!==(c=Ee(N[4].min_val)+"")&&fe(d,c),(!g||C&16)&&_!==(_=Ee(N[4].max_val)+"")&&fe(h,_)},i(N){g||(p(n.$$.fragment,N),g=!0)},o(N){v(n.$$.fragment,N),g=!1},d(N){N&&m(e),H(n),w=!1,y()}}}function ia(s){let e,l,t;return l=new la({props:{counts:s[5],bins:s[3],field:s[0]}}),l.$on("row-click",s[13]),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(n){e=S(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","mt-4")},m(n,o){I(n,e,o),A(l,e,null),t=!0},p(n,o){const r={};o&32&&(r.counts=n[5]),o&8&&(r.bins=n[3]),o&1&&(r.field=n[0]),l.$set(r)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),H(l)}}}function aa(s){let e,l;return e=new Qe({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function oa(s){let e,l,t=s[1].error.message+"",n;return{c(){e=k("p"),l=Z("Error: "),n=Z(t)},l(o){e=S(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){I(o,e,r),b(e,l),b(e,n)},p(o,r){r&2&&t!==(t=o[1].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function fa(s){let e,l,t,n,o,r,i;const a=[sa,ra,na],f=[];function c(h,g){return h[2].error?0:h[4]==null?1:2}l=c(s),t=f[l]=a[l](s);const d=[oa,aa,ia],u=[];function _(h,g){return h[1].error?0:h[5]==null?1:h[5].length>0?2:-1}return~(o=_(s))&&(r=u[o]=d[o](s)),{c(){e=k("div"),t.c(),n=Y(),r&&r.c(),this.h()},l(h){e=S(h,"DIV",{class:!0});var g=$(e);t.l(g),n=Q(g),r&&r.l(g),g.forEach(m),this.h()},h(){D(e,"class","p-4")},m(h,g){I(h,e,g),f[l].m(e,null),b(e,n),~o&&u[o].m(e,null),i=!0},p(h,[g]){let w=l;l=c(h),l===w?f[l].p(h,g):(le(),v(f[w],1,1,()=>{f[w]=null}),ne(),t=f[l],t?t.p(h,g):(t=f[l]=a[l](h),t.c()),p(t,1),t.m(e,n));let y=o;o=_(h),o===y?~o&&u[o].p(h,g):(r&&(le(),v(u[y],1,1,()=>{u[y]=null}),ne()),~o?(r=u[o],r?r.p(h,g):(r=u[o]=d[o](h),r.c()),p(r,1),r.m(e,null)):r=null)},i(h){i||(p(t),p(r),i=!0)},o(h){v(t),v(r),i=!1},d(h){h&&m(e),f[l].d(),~o&&u[o].d()}}}function ca(s,e,l){let t,n,o,r,i,a=x,f=()=>(a(),a=Fe(n,V=>l(1,i=V)),n),c,d=x,u=()=>(d(),d=Fe(t,V=>l(2,c=V)),t),_;s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>d());let{field:h}=e;const g=Oe();ge(s,g,V=>l(12,_=V));let w,y,N=null;function C(V){if(V==null)return;if(N!=null){const[T,z]=N[V.toString()];if(T!=null){const F={path:h.path,op:"greater_equal",value:T};g.addFilter(F)}if(z!=null){const F={path:h.path,op:"less",value:z};g.addFilter(F)}return}const O={path:h.path,op:"equals",value:V};g.addFilter(O)}const L=V=>C(V.detail.value);return s.$$set=V=>{"field"in V&&l(0,h=V.field)},s.$$.update=()=>{var V;if(s.$$.dirty&4097&&u(l(7,t=Nr(_.namespace,_.datasetName,{leaf_path:h.path}))),s.$$.dirty&1&&l(10,w=Vn(h.dtype)&&!h.categorical?"value":"count"),s.$$.dirty&1024&&l(11,y=w==="value"?"ASC":"DESC"),s.$$.dirty&7169&&f(l(6,n=Tr(_.namespace,_.datasetName,{leaf_path:h.path,filters:_.query.filters,sort_by:w,sort_order:y}))),s.$$.dirty&2&&l(5,o=i.data!=null?i.data.counts:null),s.$$.dirty&4&&l(4,r=c.data!=null?c.data:null),s.$$.dirty&2)if(((V=i.data)==null?void 0:V.bins)!=null){l(3,N={});for(const[O,T,z]of Object.values(i.data.bins))l(3,N[O]=[T,z],N)}else l(3,N=null)},[h,i,c,N,r,o,n,t,g,C,w,y,_,L]}class ua extends we{constructor(e){super(),$e(this,e,ca,fa,be,{field:0})}}function Yl(s,e,l){const t=s.slice();return t[38]=e[l],t}function Ql(s,e,l){const t=s.slice();return t[41]=e[l],t}function Jl(s,e,l){const t=s.slice();return t[44]=e[l],t}function Kl(s,e,l){const t=s.slice();return t[47]=e[l],t}function da(s){let e,l="{}",t;return{c(){e=k("span"),t=Z(l),this.h()},l(n){e=S(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){I(n,e,o),b(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function ma(s){let e,l,t,n;var o=at[s[1].repeated_field.dtype];function r(i){return{props:{title:i[1].dtype}}}return o&&(l=st(o,r(s))),{c(){e=k("div"),l&&B(l.$$.fragment),t=Z("[]"),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=$(e);l&&q(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){D(e,"class","flex")},m(i,a){I(i,e,a),l&&A(l,e,null),b(e,t),n=!0},p(i,a){const f={};if(a[0]&2&&(f.title=i[1].dtype),a[0]&2&&o!==(o=at[i[1].repeated_field.dtype])){if(l){le();const c=l;v(c.$$.fragment,1,0,()=>{H(c,1)}),ne()}o?(l=st(o,r(i)),B(l.$$.fragment),p(l.$$.fragment,1),A(l,e,t)):l=null}else o&&l.$set(f)},i(i){n||(l&&p(l.$$.fragment,i),n=!0)},o(i){l&&v(l.$$.fragment,i),n=!1},d(i){i&&m(e),l&&H(l)}}}function ha(s){let e,l,t;var n=at[s[1].dtype];function o(r){return{props:{title:r[1].dtype}}}return n&&(e=st(n,o(s))),{c(){e&&B(e.$$.fragment),l=ie()},l(r){e&&q(e.$$.fragment,r),l=ie()},m(r,i){e&&A(e,r,i),I(r,l,i),t=!0},p(r,i){const a={};if(i[0]&2&&(a.title=r[1].dtype),i[0]&2&&n!==(n=at[r[1].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{H(f,1)}),ne()}n?(e=st(n,o(r)),B(e.$$.fragment),p(e.$$.fragment,1),A(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&p(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&H(e,r)}}}function Zl(s){let e,l;return e=new Mt({props:{interactive:!0,type:"green",$$slots:{default:[ga]},$$scope:{ctx:s}}}),e.$on("click",s[32]),e.$on("remove",s[33]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&16384|n[1]&524288&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function _a(s){let e,l;return e=new Ln({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function pa(s){let e,l;return e=new jn({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ga(s){let e,l,t,n,o,r,i,a;const f=[pa,_a],c=[];function d(u,_){return u[14]=="ASC"?0:1}return r=d(s),i=c[r]=f[r](s),{c(){e=k("div"),l=k("div"),t=Z("Sorted"),n=Y(),o=k("span"),i.c(),this.h()},l(u){e=S(u,"DIV",{class:!0});var _=$(e);l=S(_,"DIV",{class:!0});var h=$(l);t=G(h,"Sorted"),h.forEach(m),n=Q(_),o=S(_,"SPAN",{});var g=$(o);i.l(g),g.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","mr-1"),D(e,"class","flex flex-row")},m(u,_){I(u,e,_),b(e,l),b(l,t),b(e,n),b(e,o),c[r].m(o,null),a=!0},p(u,_){let h=r;r=d(u),r!==h&&(le(),v(c[h],1,1,()=>{c[h]=null}),ne(),i=c[r],i||(i=c[r]=f[r](u),i.c()),p(i,1),i.m(o,null))},i(u){a||(p(i),a=!0)},o(u){v(i),a=!1},d(u){u&&m(e),c[r].d()}}}function Gl(s){let e,l,t=s[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=Wl(Kl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[7];let a;for(a=0;a<t.length;a+=1){const f=Kl(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=Wl(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Wl(s){let e,l;return e=new Un({props:{filter:s[47],hidePath:!0}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.filter=t[47]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Xl(s){let e,l;return e=new Yn({props:{search:s[44]}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.search=t[44]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function xl(s){var t;let e,l;return e=new An({props:{embedding:(t=s[41].signal)==null?void 0:t.signal_name}}),{c(){B(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&65536&&(r.embedding=(i=n[41].signal)==null?void 0:i.signal_name),e.$set(r)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function en(s){let e,l,t,n,o,r,i;return l=new rt({props:{type:"cyan",icon:yt}}),l.$on("click",s[34]),n=new us({props:{isPreview:!0}}),n.$on("click",s[35]),{c(){e=k("div"),B(l.$$.fragment),t=Y(),B(n.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),f.forEach(m),t=Q(a),q(n.$$.fragment,a),this.h()},h(){D(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){I(a,e,f),A(l,e,null),I(a,t,f),A(n,a,f),o=!0,r||(i=Ve(Ne.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:x,i(a){o||(p(l.$$.fragment,a),p(n.$$.fragment,a),o=!0)},o(a){v(l.$$.fragment,a),v(n.$$.fragment,a),o=!1},d(a){a&&m(e),H(l),a&&m(t),H(n,a),r=!1,i()}}}function tn(s){let e,l,t,n,o,r,i;return t=new fs({}),{c(){e=k("button"),l=k("div"),B(t.$$.fragment),this.h()},l(a){e=S(a,"BUTTON",{});var f=$(e);l=S(f,"DIV",{class:!0});var c=$(l);q(t.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){D(l,"class","transition"),_e(l,"rotate-180",s[20]),_e(e,"bg-slate-300",s[20])},m(a,f){I(a,e,f),b(e,l),A(t,l,null),o=!0,r||(i=[Ve(n=Ne.call(null,e,{text:s[20]?"Close statistics":"See statistics"})),Pe(e,"click",s[36])],r=!0)},p(a,f){(!o||f[0]&1048576)&&_e(l,"rotate-180",a[20]),n&&Ye(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&_e(e,"bg-slate-300",a[20])},i(a){o||(p(t.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),o=!1},d(a){a&&m(e),H(t),r=!1,xe(i)}}}function ln(s){let e,l,t,n;return l=new ua({props:{field:s[1]}}),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(o){e=S(o,"DIV",{class:!0});var r=$(e);q(l.$$.fragment,r),r.forEach(m),this.h()},h(){D(e,"class","px-2")},m(o,r){I(o,e,r),A(l,e,null),n=!0},p(o,r){const i={};r[0]&2&&(i.field=o[1]),l.$set(i)},i(o){n||(p(l.$$.fragment,o),o&&$t(()=>{n&&(t||(t=pt(e,vt,{},!0)),t.run(1))}),n=!0)},o(o){v(l.$$.fragment,o),o&&(t||(t=pt(e,vt,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),H(l),o&&t&&t.end()}}}function nn(s){let e,l,t=s[18],n=[];for(let r=0;r<t.length;r+=1)n[r]=rn(Yl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,i){if(i[0]&262415){t=r[18];let a;for(a=0;a<t.length;a+=1){const f=Yl(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=rn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function rn(s){let e,l;return e=new Qn({props:{schema:s[0],field:s[38],indent:s[3]+1,sourceField:s[8]&&it(s[38])?s[1]:s[2]}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[38]),n[0]&8&&(o.indent=t[3]+1),n[0]&262406&&(o.sourceField=t[8]&&it(t[38])?t[1]:t[2]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ba(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T,z,F,E,R,ee;n=new Nn({props:{labelText:"Show",hideLabel:!0,checked:s[17]}}),n.$on("change",s[30]);const K=[ha,ma,da],U=[];function M(W,te){return W[1].dtype?0:W[1].repeated_field&&W[1].repeated_field.dtype?1:2}i=M(s),a=U[i]=K[i](s);let P=s[15]&&Zl(s),X=s[13]&&Gl(s),j=s[12],J=[];for(let W=0;W<j.length;W+=1)J[W]=Xl(Jl(s,j,W));const de=W=>v(J[W],1,1,()=>{J[W]=null});let me=s[16],ae=[];for(let W=0;W<me.length;W+=1)ae[W]=xl(Ql(s,me,W));const Ie=W=>v(ae[W],1,1,()=>{ae[W]=null});let se=s[4]&&s[21]&&en(s),re=s[10]&&tn(s);V=new xi({props:{field:s[1]}});let ue=s[20]&&ln(s),pe=s[18].length&&nn(s);return{c(){e=k("div"),l=k("div"),t=k("div"),B(n.$$.fragment),o=Y(),r=k("div"),a.c(),c=Y(),d=k("button"),u=Z(s[19]),h=Y(),P&&P.c(),g=Y(),X&&X.c(),w=Y();for(let W=0;W<J.length;W+=1)J[W].c();y=Y();for(let W=0;W<ae.length;W+=1)ae[W].c();N=Y(),se&&se.c(),C=Y(),re&&re.c(),L=Y(),B(V.$$.fragment),O=Y(),ue&&ue.c(),T=Y(),z=k("div"),pe&&pe.c(),this.h()},l(W){e=S(W,"DIV",{class:!0});var te=$(e);l=S(te,"DIV",{class:!0});var ce=$(l);t=S(ce,"DIV",{});var qe=$(t);q(n.$$.fragment,qe),qe.forEach(m),o=Q(ce),r=S(ce,"DIV",{class:!0});var et=$(r);a.l(et),et.forEach(m),c=Q(ce),d=S(ce,"BUTTON",{class:!0});var he=$(d);u=G(he,s[19]),he.forEach(m),h=Q(ce),P&&P.l(ce),g=Q(ce),X&&X.l(ce),w=Q(ce);for(let Je=0;Je<J.length;Je+=1)J[Je].l(ce);y=Q(ce);for(let Je=0;Je<ae.length;Je+=1)ae[Je].l(ce);N=Q(ce),se&&se.l(ce),C=Q(ce),re&&re.l(ce),L=Q(ce),q(V.$$.fragment,ce),ce.forEach(m),O=Q(te),ue&&ue.l(te),T=Q(te),z=S(te,"DIV",{});var je=$(z);pe&&pe.l(je),je.forEach(m),te.forEach(m),this.h()},h(){ct(t,"margin-left",s[3]*1.5+"rem"),D(r,"class","rounded-md bg-blue-200 p-0.5"),_e(r,"bg-blue-200",s[5]),D(d,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),d.disabled=_=!s[10],_e(d,"cursor-default",!s[10]),D(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),_e(l,"bg-blue-50",s[5]),_e(l,"bg-emerald-100",s[4]),_e(l,"hover:bg-blue-100",s[5]),D(e,"class","border-gray-300"),_e(e,"border-b",!s[5])},m(W,te){I(W,e,te),b(e,l),b(l,t),A(n,t,null),b(l,o),b(l,r),U[i].m(r,null),b(l,c),b(l,d),b(d,u),b(l,h),P&&P.m(l,null),b(l,g),X&&X.m(l,null),b(l,w);for(let ce=0;ce<J.length;ce+=1)J[ce]&&J[ce].m(l,null);b(l,y);for(let ce=0;ce<ae.length;ce+=1)ae[ce]&&ae[ce].m(l,null);b(l,N),se&&se.m(l,null),b(l,C),re&&re.m(l,null),b(l,L),A(V,l,null),b(e,O),ue&&ue.m(e,null),b(e,T),b(e,z),pe&&pe.m(z,null),E=!0,R||(ee=[Ve(f=Ne.call(null,r,{text:s[11]})),Pe(d,"click",s[31])],R=!0)},p(W,te){const ce={};te[0]&131072&&(ce.checked=W[17]),n.$set(ce),te[0]&8&&ct(t,"margin-left",W[3]*1.5+"rem");let qe=i;if(i=M(W),i===qe?U[i].p(W,te):(le(),v(U[qe],1,1,()=>{U[qe]=null}),ne(),a=U[i],a?a.p(W,te):(a=U[i]=K[i](W),a.c()),p(a,1),a.m(r,null)),f&&Ye(f.update)&&te[0]&2048&&f.update.call(null,{text:W[11]}),(!E||te[0]&32)&&_e(r,"bg-blue-200",W[5]),(!E||te[0]&524288)&&fe(u,W[19]),(!E||te[0]&1024&&_!==(_=!W[10]))&&(d.disabled=_),(!E||te[0]&1024)&&_e(d,"cursor-default",!W[10]),W[15]?P?(P.p(W,te),te[0]&32768&&p(P,1)):(P=Zl(W),P.c(),p(P,1),P.m(l,g)):P&&(le(),v(P,1,1,()=>{P=null}),ne()),W[13]?X?(X.p(W,te),te[0]&8192&&p(X,1)):(X=Gl(W),X.c(),p(X,1),X.m(l,w)):X&&(le(),v(X,1,1,()=>{X=null}),ne()),te[0]&4096){j=W[12];let he;for(he=0;he<j.length;he+=1){const je=Jl(W,j,he);J[he]?(J[he].p(je,te),p(J[he],1)):(J[he]=Xl(je),J[he].c(),p(J[he],1),J[he].m(l,y))}for(le(),he=j.length;he<J.length;he+=1)de(he);ne()}if(te[0]&65536){me=W[16];let he;for(he=0;he<me.length;he+=1){const je=Ql(W,me,he);ae[he]?(ae[he].p(je,te),p(ae[he],1)):(ae[he]=xl(je),ae[he].c(),p(ae[he],1),ae[he].m(l,N))}for(le(),he=me.length;he<ae.length;he+=1)Ie(he);ne()}W[4]&&W[21]?se?(se.p(W,te),te[0]&2097168&&p(se,1)):(se=en(W),se.c(),p(se,1),se.m(l,C)):se&&(le(),v(se,1,1,()=>{se=null}),ne()),W[10]?re?(re.p(W,te),te[0]&1024&&p(re,1)):(re=tn(W),re.c(),p(re,1),re.m(l,L)):re&&(le(),v(re,1,1,()=>{re=null}),ne());const et={};te[0]&2&&(et.field=W[1]),V.$set(et),(!E||te[0]&32)&&_e(l,"bg-blue-50",W[5]),(!E||te[0]&16)&&_e(l,"bg-emerald-100",W[4]),(!E||te[0]&32)&&_e(l,"hover:bg-blue-100",W[5]),W[20]?ue?(ue.p(W,te),te[0]&1048576&&p(ue,1)):(ue=ln(W),ue.c(),p(ue,1),ue.m(e,T)):ue&&(le(),v(ue,1,1,()=>{ue=null}),ne()),W[18].length?pe?(pe.p(W,te),te[0]&262144&&p(pe,1)):(pe=nn(W),pe.c(),p(pe,1),pe.m(z,null)):pe&&(le(),v(pe,1,1,()=>{pe=null}),ne()),(!E||te[0]&32)&&_e(e,"border-b",!W[5])},i(W){if(!E){p(n.$$.fragment,W),p(a),p(P),p(X);for(let te=0;te<j.length;te+=1)p(J[te]);for(let te=0;te<me.length;te+=1)p(ae[te]);p(se),p(re),p(V.$$.fragment,W),p(ue),p(pe),W&&$t(()=>{E&&(F||(F=pt(z,vt,{},!0)),F.run(1))}),E=!0}},o(W){v(n.$$.fragment,W),v(a),v(P),v(X),J=J.filter(Boolean);for(let te=0;te<J.length;te+=1)v(J[te]);ae=ae.filter(Boolean);for(let te=0;te<ae.length;te+=1)v(ae[te]);v(se),v(re),v(V.$$.fragment,W),v(ue),v(pe),W&&(F||(F=pt(z,vt,{},!1)),F.run(0)),E=!1},d(W){W&&m(e),H(n),U[i].d(),P&&P.d(),X&&X.d(),ze(J,W),ze(ae,W),se&&se.d(),re&&re.d(),H(V),ue&&ue.d(),pe&&pe.d(),W&&F&&F.end(),R=!1,xe(ee)}}}function va(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T,z,F,{schema:E}=e,{field:R}=e,{sourceField:ee=void 0}=e,{indent:K=0}=e;const U=Dn();ge(s,U,re=>l(22,F=re));const M=Oe();ge(s,M,re=>l(9,T=re));const P=Xe();ge(s,P,re=>l(29,z=re));function X(re){return re!=null&&re.repeated_field?X(re.repeated_field):re!=null&&re.fields?[...Object.values(re.fields).filter(ue=>ue.path.at(-1)!==Cr)].filter(ue=>{var pe,W,te,ce;return!(ue.dtype==="embedding"||ue.signal!=null&&nt(ue).some(qe=>qe.dtype==="embedding")||((pe=ue.signal)==null?void 0:pe.signal_name)==="sentences"||((W=ue.signal)==null?void 0:W.signal_name)==="substring_search"||((te=ue.signal)==null?void 0:te.signal_name)==="semantic_similarity"||((ce=ue.signal)==null?void 0:ce.signal_name)==="concept_labels")}):[]}const j=()=>{d?(M.removeSelectedColumn(r),R.repeated_field!=null&&M.removeSelectedColumn([...r,ft])):(R.signal!=null&&nt(R).forEach(ue=>{M.addSelectedColumn(ue.path)}),M.addSelectedColumn(r),R.repeated_field!=null&&M.addSelectedColumn([...r,ft]))},J=()=>{O&&(i?M.removeExpandedColumn(r):M.addExpandedColumn(r))},de=()=>h==="ASC"?_t(M,T.query.sort_order="DESC",T):_t(M,T.query.sort_order="ASC",T),me=()=>M.removeSortBy(r),ae=()=>R.signal&&y&&ee&&F.mutate([T.namespace,T.datasetName,{leaf_path:ee.path,signal:R.signal}]),Ie=()=>{var re;return R.signal&&y&&tt({command:lt.EditPreviewConcept,namespace:T.namespace,datasetName:T.datasetName,path:ee==null?void 0:ee.path,signalName:(re=R.signal)==null?void 0:re.signal_name,value:R.signal})},se=()=>{i?M.removeExpandedColumn(r):M.addExpandedColumn(r)};return s.$$set=re=>{"schema"in re&&l(0,E=re.schema),"field"in re&&l(1,R=re.field),"sourceField"in re&&l(2,ee=re.sourceField),"indent"in re&&l(3,K=re.indent)},s.$$.update=()=>{var re,ue,pe,W;s.$$.dirty[0]&2&&l(5,t=it(R)),s.$$.dirty[0]&2&&l(21,n=Tt(R)),s.$$.dirty[0]&32&&l(8,o=!t),s.$$.dirty[0]&2&&l(6,r=R.path),s.$$.dirty[0]&576&&l(20,i=T.expandedColumns[ye(r)]||!1),s.$$.dirty[0]&64&&l(28,a=r.at(-1)===ft),s.$$.dirty[0]&268435520&&l(19,f=a?r.at(-2):r.at(-1)),s.$$.dirty[0]&2&&l(18,c=X(R)),s.$$.dirty[0]&536870976&&l(17,d=(re=z.visibleFields)==null?void 0:re.some(te=>Ze(te.path,r))),s.$$.dirty[0]&258&&l(16,u=o?nt(R).filter(te=>te.signal!=null&&nt(te).some(ce=>ce.dtype==="embedding")):[]),s.$$.dirty[0]&576&&l(15,_=(ue=T.query.sort_by)==null?void 0:ue.some(te=>Ze(te,r))),s.$$.dirty[0]&512&&l(14,h=T.query.sort_order),s.$$.dirty[0]&576&&l(7,g=((pe=T.query.filters)==null?void 0:pe.filter(te=>Ze(te.path,r)))||[]),s.$$.dirty[0]&128&&l(13,w=g.length>0),s.$$.dirty[0]&536870976&&l(4,y=Bn(((W=z.selectRowsSchema)==null?void 0:W.data)||null,r)),s.$$.dirty[0]&576&&l(12,N=Ct(T,r)),s.$$.dirty[0]&32&&l(26,C=t?". Generated by a signal":""),s.$$.dirty[0]&2&&l(27,L=R.dtype??(R.repeated_field&&R.repeated_field.dtype?`${R.repeated_field.dtype}[]`:"object")),s.$$.dirty[0]&201326592&&l(11,V=`${L}${C}`),s.$$.dirty[0]&18&&l(10,O=gt(R)&&!y)},[E,R,ee,K,y,t,r,g,o,T,O,V,N,w,h,_,u,d,c,f,i,n,F,U,M,P,C,L,a,z,j,J,de,me,ae,Ie,se]}class Qn extends we{constructor(e){super(),$e(this,e,va,ba,be,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function sn(s,e,l){const t=s.slice();return t[3]=e[l],t}function wa(s){let e,l,t,n;return e=new Ot({props:{label:"Schema",class:"w-1/3"}}),t=new Ot({props:{label:"Query",class:"w-1/3"}}),{c(){B(e.$$.fragment),l=Y(),B(t.$$.fragment)},l(o){q(e.$$.fragment,o),l=Q(o),q(t.$$.fragment,o)},m(o,r){A(e,o,r),I(o,l,r),A(t,o,r),n=!0},p:x,i(o){n||(p(e.$$.fragment,o),p(t.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),v(t.$$.fragment,o),n=!1},d(o){H(e,o),o&&m(l),H(t,o)}}}function $a(s){let e=[],l=new Map,t,n,o=Object.keys(s[0].data.schema.fields);const r=i=>i[3];for(let i=0;i<o.length;i+=1){let a=sn(s,o,i),f=r(a);l.set(f,e[i]=an(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=ie()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=ie()},m(i,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(i,a);I(i,t,a),n=!0},p(i,a){a&1&&(o=Object.keys(i[0].data.schema.fields),le(),e=$n(e,a,r,1,i,o,l,t.parentNode,kn,an,t,sn),ne())},i(i){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)v(e[a]);n=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&m(t)}}}function ka(s){let e,l;return e=new Qe({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function an(s,e){let l,t,n;return t=new Qn({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:s,first:null,c(){l=ie(),B(t.$$.fragment),this.h()},l(o){l=ie(),q(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){I(o,l,r),A(t,o,r),n=!0},p(o,r){e=o;const i={};r&1&&(i.schema=e[0].data.schema),r&1&&(i.field=e[0].data.schema.fields[e[3]]),t.$set(i)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&m(l),H(t,o)}}}function Sa(s){let e,l,t,n;const o=[ka,$a],r=[];function i(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),I(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function Ea(s){let e,l;return e=new Ki({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ya(s){let e,l,t,n,o;return l=new qt({props:{$$slots:{default:[Sa]},$$scope:{ctx:s}}}),n=new qt({props:{$$slots:{default:[Ea]},$$scope:{ctx:s}}}),{c(){e=k("div"),B(l.$$.fragment),t=Y(),B(n.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0,slot:!0});var i=$(e);q(l.$$.fragment,i),t=Q(i),q(n.$$.fragment,i),i.forEach(m),this.h()},h(){D(e,"class","h-full overflow-y-auto"),D(e,"slot","content")},m(r,i){I(r,e,i),A(l,e,null),b(e,t),A(n,e,null),o=!0},p(r,i){const a={};i&65&&(a.$$scope={dirty:i,ctx:r}),l.$set(a);const f={};i&64&&(f.$$scope={dirty:i,ctx:r}),n.$set(f)},i(r){o||(p(l.$$.fragment,r),p(n.$$.fragment,r),o=!0)},o(r){v(l.$$.fragment,r),v(n.$$.fragment,r),o=!1},d(r){r&&m(e),H(l),H(n)}}}function Da(s){let e,l,t;return l=new ds({props:{class:"overflow-hidden border-b border-gray-200",$$slots:{content:[ya],default:[wa]},$$scope:{ctx:s}}}),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(n){e=S(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","schema flex h-full flex-col pt-4")},m(n,o){I(n,e,o),A(l,e,null),t=!0},p(n,[o]){const r={};o&65&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),H(l)}}}function Ia(s,e,l){let t,n;const o=Xe();return ge(s,o,r=>l(2,n=r)),s.$$.update=()=>{s.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class Va extends we{constructor(e){super(),$e(this,e,Ia,Da,be,{})}}function on(s,e,l){const t=s.slice();return t[5]=e[l],t}function Na(s){let e,l="{}",t;return{c(){e=k("span"),t=Z(l),this.h()},l(n){e=S(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){I(n,e,o),b(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function Ta(s){let e,l,t;var n=at[s[5].dtype];function o(r){return{props:{title:r[5].dtype}}}return n&&(e=st(n,o(s))),{c(){e&&B(e.$$.fragment),l=ie()},l(r){e&&q(e.$$.fragment,r),l=ie()},m(r,i){e&&A(e,r,i),I(r,l,i),t=!0},p(r,i){const a={};if(i&2&&(a.title=r[5].dtype),i&2&&n!==(n=at[r[5].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{H(f,1)}),ne()}n?(e=st(n,o(r)),B(e.$$.fragment),p(e.$$.fragment,1),A(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&p(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&H(e,r)}}}function fn(s){let e;return{c(){e=Z("[]")},l(l){e=G(l,"[]")},m(l,t){I(l,e,t)},d(l){l&&m(e)}}}function cn(s){let e,l,t,n,o,r,i,a,f,c=s[5].path.indexOf(ft)>=0,d,u,_=ye(s[5].path)+"",h,g,w;function y(...T){return s[3](s[5],...T)}function N(...T){return s[4](s[5],...T)}t=new Nn({props:{labelText:"Download",hideLabel:!0,checked:s[0].find(y)!=null}}),t.$on("change",N);const C=[Ta,Na],L=[];function V(T,z){return T[5].dtype?0:1}i=V(s),a=L[i]=C[i](s);let O=c&&fn();return{c(){e=k("div"),l=k("div"),B(t.$$.fragment),n=Y(),o=k("div"),r=k("div"),a.c(),f=Y(),O&&O.c(),d=Y(),u=k("div"),h=Z(_),g=Y(),this.h()},l(T){e=S(T,"DIV",{class:!0});var z=$(e);l=S(z,"DIV",{class:!0});var F=$(l);q(t.$$.fragment,F),F.forEach(m),n=Q(z),o=S(z,"DIV",{class:!0});var E=$(o);r=S(E,"DIV",{class:!0});var R=$(r);a.l(R),f=Q(R),O&&O.l(R),R.forEach(m),E.forEach(m),d=Q(z),u=S(z,"DIV",{class:!0});var ee=$(u);h=G(ee,_),ee.forEach(m),g=Q(z),z.forEach(m),this.h()},h(){D(l,"class","mr-2"),D(r,"class","inline-flex items-center rounded-md bg-blue-200 p-0.5"),D(o,"class","flex w-10"),D(u,"class","flex-grow"),D(e,"class","flex items-center")},m(T,z){I(T,e,z),b(e,l),A(t,l,null),b(e,n),b(e,o),b(o,r),L[i].m(r,null),b(r,f),O&&O.m(r,null),b(e,d),b(e,u),b(u,h),b(e,g),w=!0},p(T,z){s=T;const F={};z&3&&(F.checked=s[0].find(y)!=null),t.$set(F);let E=i;i=V(s),i===E?L[i].p(s,z):(le(),v(L[E],1,1,()=>{L[E]=null}),ne(),a=L[i],a?a.p(s,z):(a=L[i]=C[i](s),a.c()),p(a,1),a.m(r,f)),z&2&&(c=s[5].path.indexOf(ft)>=0),c?O||(O=fn(),O.c(),O.m(r,null)):O&&(O.d(1),O=null),(!w||z&2)&&_!==(_=ye(s[5].path)+"")&&fe(h,_)},i(T){w||(p(t.$$.fragment,T),p(a),w=!0)},o(T){v(t.$$.fragment,T),v(a),w=!1},d(T){T&&m(e),H(t),L[i].d(),O&&O.d()}}}function Ca(s){let e,l,t=s[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=cn(on(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);I(r,e,i),l=!0},p(r,[i]){if(i&7){t=r[1];let a;for(a=0;a<t.length;a+=1){const f=on(r,t,a);n[a]?(n[a].p(f,i),p(n[a],1)):(n[a]=cn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)p(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Fa(s,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(d=>!Ze(d.path,a.path)))}const r=(a,f)=>Ze(f.path,a.path),i=(a,f)=>o(a,f);return s.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,r,i]}class St extends we{constructor(e){super(),$e(this,e,Fa,Ca,be,{fields:1,checkedFields:0})}}function un(s,e,l){const t=s.slice();return t[29]=e[l],t}function Ma(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T,z,F,E,R,ee;function K(M){s[23](M)}let U={invalid:s[8]!=s[9]};return s[8]!==void 0&&(U.value=s[8]),C=new Rr({props:U}),He.push(()=>Ge(C,"value",K)),z=new as({}),{c(){e=k("div"),l=k("section"),t=k("div"),n=Z("Delete this dataset"),o=Y(),r=k("div"),i=k("p"),a=Z("This action cannot be undone."),f=Y(),c=k("p"),d=Z(`This will permanently delete the
                  `),u=k("span"),_=Z(s[9]),h=Z(` dataset and all its files. Please type
                  `),g=k("span"),w=Z(s[9]),y=Z(" to confirm."),N=Y(),B(C.$$.fragment),V=Y(),O=k("button"),T=Z(`I understand, delete this dataset
                `),B(z.$$.fragment),this.h()},l(M){e=S(M,"DIV",{class:!0});var P=$(e);l=S(P,"SECTION",{class:!0});var X=$(l);t=S(X,"DIV",{class:!0});var j=$(t);n=G(j,"Delete this dataset"),j.forEach(m),o=Q(X),r=S(X,"DIV",{class:!0});var J=$(r);i=S(J,"P",{class:!0});var de=$(i);a=G(de,"This action cannot be undone."),de.forEach(m),f=Q(J),c=S(J,"P",{});var me=$(c);d=G(me,`This will permanently delete the
                  `),u=S(me,"SPAN",{class:!0});var ae=$(u);_=G(ae,s[9]),ae.forEach(m),h=G(me,` dataset and all its files. Please type
                  `),g=S(me,"SPAN",{class:!0});var Ie=$(g);w=G(Ie,s[9]),Ie.forEach(m),y=G(me," to confirm."),me.forEach(m),J.forEach(m),N=Q(X),q(C.$$.fragment,X),V=Q(X),O=S(X,"BUTTON",{class:!0});var se=$(O);T=G(se,`I understand, delete this dataset
                `),q(z.$$.fragment,se),se.forEach(m),X.forEach(m),P.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(i,"class","mb-2"),D(u,"class","font-bold"),D(g,"class","font-bold"),D(r,"class","mb-4 text-sm text-gray-500"),D(O,"class","flex cursor-pointer flex-row justify-between p-4 text-left hover:bg-gray-200"),O.disabled=F=s[8]!=s[9],_e(O,"cursor-not-allowed",s[8]!=s[9]),D(l,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(M,P){I(M,e,P),b(e,l),b(l,t),b(t,n),b(l,o),b(l,r),b(r,i),b(i,a),b(r,f),b(r,c),b(c,d),b(c,u),b(u,_),b(c,h),b(c,g),b(g,w),b(c,y),b(l,N),A(C,l,null),b(l,V),b(l,O),b(O,T),A(z,O,null),E=!0,R||(ee=Pe(O,"click",s[24]),R=!0)},p(M,P){(!E||P[0]&512)&&fe(_,M[9]),(!E||P[0]&512)&&fe(w,M[9]);const X={};P[0]&768&&(X.invalid=M[8]!=M[9]),!L&&P[0]&256&&(L=!0,X.value=M[8],We(()=>L=!1)),C.$set(X),(!E||P[0]&768&&F!==(F=M[8]!=M[9]))&&(O.disabled=F),(!E||P[0]&768)&&_e(O,"cursor-not-allowed",M[8]!=M[9])},i(M){E||(p(C.$$.fragment,M),p(z.$$.fragment,M),E=!0)},o(M){v(C.$$.fragment,M),v(z.$$.fragment,M),E=!1},d(M){M&&m(e),H(C),H(z),R=!1,ee()}}}function za(s){let e,l,t,n;const o=[Ra,Pa],r=[];function i(a,f){return a[6].isFetching?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),I(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Pa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L,V,O,T,z,F,E=s[3]!=null&&dn(s);const R=[Aa,Ba],ee=[];function K(M,P){return M[11].isFetching?0:1}N=K(s),C=ee[N]=R[N](s);let U=s[3]!=null&&s[4]!=null&&hn(s);return{c(){e=k("div"),l=k("section"),t=k("div"),n=Z("Media fields"),o=Y(),r=k("div"),i=Z("These fields will be presented differently from the rest of the metadata fields."),a=Y(),E&&E.c(),f=Y(),c=k("section"),d=k("div"),u=Z("Preferred embedding"),_=Y(),h=k("div"),g=Z("This embedding will be used by default when indexing and querying the data."),w=Y(),y=k("div"),C.c(),L=Y(),V=k("section"),O=k("div"),T=Z("Render as markdown"),z=Y(),U&&U.c(),this.h()},l(M){e=S(M,"DIV",{class:!0});var P=$(e);l=S(P,"SECTION",{class:!0});var X=$(l);t=S(X,"DIV",{class:!0});var j=$(t);n=G(j,"Media fields"),j.forEach(m),o=Q(X),r=S(X,"DIV",{class:!0});var J=$(r);i=G(J,"These fields will be presented differently from the rest of the metadata fields."),J.forEach(m),a=Q(X),E&&E.l(X),X.forEach(m),f=Q(P),c=S(P,"SECTION",{class:!0});var de=$(c);d=S(de,"DIV",{class:!0});var me=$(d);u=G(me,"Preferred embedding"),me.forEach(m),_=Q(de),h=S(de,"DIV",{class:!0});var ae=$(h);g=G(ae,"This embedding will be used by default when indexing and querying the data."),ae.forEach(m),w=Q(de),y=S(de,"DIV",{class:!0});var Ie=$(y);C.l(Ie),Ie.forEach(m),de.forEach(m),L=Q(P),V=S(P,"SECTION",{class:!0});var se=$(V);O=S(se,"DIV",{class:!0});var re=$(O);T=G(re,"Render as markdown"),re.forEach(m),z=Q(se),U&&U.l(se),se.forEach(m),P.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(r,"class","text-sm text-gray-500"),D(l,"class","flex flex-col gap-y-1"),D(d,"class","text-lg text-gray-700"),D(h,"class","text-sm text-gray-500"),D(y,"class","w-60"),D(c,"class","flex flex-col gap-y-1"),D(O,"class","text-lg text-gray-700"),D(V,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(M,P){I(M,e,P),b(e,l),b(l,t),b(t,n),b(l,o),b(l,r),b(r,i),b(l,a),E&&E.m(l,null),b(e,f),b(e,c),b(c,d),b(d,u),b(c,_),b(c,h),b(h,g),b(c,w),b(c,y),ee[N].m(y,null),b(e,L),b(e,V),b(V,O),b(O,T),b(V,z),U&&U.m(V,null),F=!0},p(M,P){M[3]!=null?E?(E.p(M,P),P[0]&8&&p(E,1)):(E=dn(M),E.c(),p(E,1),E.m(l,null)):E&&(le(),v(E,1,1,()=>{E=null}),ne());let X=N;N=K(M),N===X?ee[N].p(M,P):(le(),v(ee[X],1,1,()=>{ee[X]=null}),ne(),C=ee[N],C?C.p(M,P):(C=ee[N]=R[N](M),C.c()),p(C,1),C.m(y,null)),M[3]!=null&&M[4]!=null?U?(U.p(M,P),P[0]&24&&p(U,1)):(U=hn(M),U.c(),p(U,1),U.m(V,null)):U&&(le(),v(U,1,1,()=>{U=null}),ne())},i(M){F||(p(E),p(C),p(U),F=!0)},o(M){v(E),v(C),v(U),F=!1},d(M){M&&m(e),E&&E.d(),ee[N].d(),U&&U.d()}}}function Ra(s){let e,l;return e=new Qe({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function dn(s){let e,l,t;function n(r){s[21](r)}let o={fields:s[5]};return s[3]!==void 0&&(o.checkedFields=s[3]),e=new St({props:o}),He.push(()=>Ge(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i[0]&32&&(a.fields=r[5]),!l&&i[0]&8&&(l=!0,a.checkedFields=r[3],We(()=>l=!1)),e.$set(a)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Ba(s){var t;let e,l;return e=new kt({props:{selected:(t=s[6].data)==null?void 0:t.preferred_embedding,$$slots:{default:[Ha]},$$scope:{ctx:s}}}),e.$on("change",s[16]),{c(){B(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&64&&(r.selected=(i=n[6].data)==null?void 0:i.preferred_embedding),o[0]&2048|o[1]&2&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Aa(s){let e,l;return e=new Br({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function mn(s){let e,l;return e=new dt({props:{value:s[29].name}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ha(s){let e,l,t,n;e=new dt({props:{value:void 0,text:"None"}});let o=s[11].data||[],r=[];for(let a=0;a<o.length;a+=1)r[a]=mn(un(s,o,a));const i=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){B(e.$$.fragment),l=Y();for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){q(e.$$.fragment,a),l=Q(a);for(let f=0;f<r.length;f+=1)r[f].l(a);t=ie()},m(a,f){A(e,a,f),I(a,l,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);I(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let c;for(c=0;c<o.length;c+=1){const d=un(a,o,c);r[c]?(r[c].p(d,f),p(r[c],1)):(r[c]=mn(d),r[c].c(),p(r[c],1),r[c].m(t.parentNode,t))}for(le(),c=o.length;c<r.length;c+=1)i(c);ne()}},i(a){if(!n){p(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)p(r[f]);n=!0}},o(a){v(e.$$.fragment,a),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);n=!1},d(a){H(e,a),a&&m(l),ze(r,a),a&&m(t)}}}function hn(s){let e,l,t;function n(r){s[22](r)}let o={fields:s[3]};return s[4]!==void 0&&(o.checkedFields=s[4]),e=new St({props:o}),He.push(()=>Ge(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i[0]&8&&(a.fields=r[3]),!l&&i[0]&16&&(l=!0,a.checkedFields=r[4],We(()=>l=!1)),e.$set(a)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Oa(s){let e,l,t,n,o,r,i,a;t=new Pr({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:s[7]}}),t.$on("select",s[20]);const f=[za,Ma],c=[];function d(u,_){return u[7]==="fields"?0:u[7]==="administration"?1:-1}return~(r=d(s))&&(i=c[r]=f[r](s)),{c(){e=k("div"),l=k("div"),B(t.$$.fragment),n=Y(),o=k("div"),i&&i.c(),this.h()},l(u){e=S(u,"DIV",{class:!0});var _=$(e);l=S(_,"DIV",{class:!0});var h=$(l);q(t.$$.fragment,h),h.forEach(m),n=Q(_),o=S(_,"DIV",{class:!0});var g=$(o);i&&i.l(g),g.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","-ml-4 mr-4 w-96 grow-0"),D(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),D(e,"class","flex flex-row")},m(u,_){I(u,e,_),b(e,l),A(t,l,null),b(e,n),b(e,o),~r&&c[r].m(o,null),a=!0},p(u,_){const h={};_[0]&128&&(h.item=u[7]),t.$set(h);let g=r;r=d(u),r===g?~r&&c[r].p(u,_):(i&&(le(),v(c[g],1,1,()=>{c[g]=null}),ne()),~r?(i=c[r],i?i.p(u,_):(i=c[r]=f[r](u),i.c()),p(i,1),i.m(o,null)):i=null)},i(u){a||(p(t.$$.fragment,u),p(i),a=!0)},o(u){v(t.$$.fragment,u),v(i),a=!1},d(u){u&&m(e),H(t),~r&&c[r].d()}}}function qa(s){let e,l,t,n,o,r;return e=new Cn({props:{label:"Changes",title:"Dataset settings"}}),t=new Fn({props:{hasForm:!0,$$slots:{default:[Oa]},$$scope:{ctx:s}}}),o=new Mn({props:{primaryButtonText:"Save",secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",close),{c(){B(e.$$.fragment),l=Y(),B(t.$$.fragment),n=Y(),B(o.$$.fragment)},l(i){q(e.$$.fragment,i),l=Q(i),q(t.$$.fragment,i),n=Q(i),q(o.$$.fragment,i)},m(i,a){A(e,i,a),I(i,l,a),A(t,i,a),I(i,n,a),A(o,i,a),r=!0},p(i,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){r||(p(e.$$.fragment,i),p(t.$$.fragment,i),p(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){H(e,i),i&&m(l),H(t,i),i&&m(n),H(o,i)}}}function ja(s){let e,l;return e=new Tn({props:{open:s[0],$$slots:{default:[qa]},$$scope:{ctx:s}}}),e.$on("submit",s[17]),e.$on("close",s[25]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function La(s,e,l){let t,n,o,r,i,a=x,f=()=>(a(),a=Fe(t,j=>l(6,i=j)),t),c,d,u;s.$$.on_destroy.push(()=>a());let{namespace:_}=e,{name:h}=e,{open:g=!1}=e,{schema:w}=e;const y=On();ge(s,y,j=>l(28,c=j));const N=In();ge(s,N,j=>l(11,d=j));const C=Fr();ge(s,C,j=>l(27,r=j));let L="fields",V=null,O=null,T=c.embedding;function z(j){T=j.target.value,T===""&&(T=void 0)}function F(){if(V==null)return;const j={ui:{media_paths:V.map(J=>J.path),markdown_paths:O==null?void 0:O.map(J=>J.path)},preferred_embedding:T};r.mutate([_,h,j],{onSuccess:()=>{l(0,g=!1)}})}let E="";const R=Mr();ge(s,R,j=>l(12,u=j));const ee=j=>l(7,L=j.detail);function K(j){V=j,l(3,V),l(6,i),l(5,o),l(19,w)}function U(j){O=j,l(4,O),l(6,i),l(5,o),l(19,w)}function M(j){E=j,l(8,E)}const P=()=>u.mutate([_,h],{onSuccess:()=>Sn("/")}),X=()=>l(0,g=!1);return s.$$set=j=>{"namespace"in j&&l(1,_=j.namespace),"name"in j&&l(2,h=j.name),"open"in j&&l(0,g=j.open),"schema"in j&&l(19,w=j.schema)},s.$$.update=()=>{var j,J,de,me;if(s.$$.dirty[0]&6&&f(l(10,t=mt(_,h))),s.$$.dirty[0]&6&&l(9,n=ar(_,h)),s.$$.dirty[0]&524288&&l(5,o=It(w).filter(ae=>ae.dtype==="string"&&!Ze(ae.path,[zr])&&!it(ae))),s.$$.dirty[0]&104&&V==null){const ae=(J=(j=i.data)==null?void 0:j.ui)==null?void 0:J.media_paths;ae!=null&&l(3,V=o.filter(Ie=>ae.some(se=>Ze(Ie.path,se))))}if(s.$$.dirty[0]&112&&O==null){const ae=(me=(de=i.data)==null?void 0:de.ui)==null?void 0:me.markdown_paths;ae!=null&&l(4,O=o.filter(Ie=>ae.some(se=>Ze(Ie.path,se))))}},[g,_,h,V,O,o,i,L,E,n,t,d,u,y,N,C,z,F,R,w,ee,K,U,M,P,X]}class Ua extends we{constructor(e){super(),$e(this,e,La,ja,be,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function Ya(s){let e,l,t;function n(r){s[13](r)}let o={fields:s[6]};return s[1]!==void 0&&(o.checkedFields=s[1]),e=new St({props:o}),He.push(()=>Ge(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i&64&&(a.fields=r[6]),!l&&i&2&&(l=!0,a.checkedFields=r[1],We(()=>l=!1)),e.$set(a)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Qa(s){let e,l;return e=new Qe({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function _n(s){let e,l,t,n,o,r,i;const a=[Ka,Ja],f=[];function c(d,u){return d[5]==null?0:1}return o=c(s),r=f[o]=a[o](s),{c(){e=k("section"),l=k("h4"),t=Z("Select enriched fields"),n=Y(),r.c(),this.h()},l(d){e=S(d,"SECTION",{});var u=$(e);l=S(u,"H4",{class:!0});var _=$(l);t=G(_,"Select enriched fields"),_.forEach(m),n=Q(u),r.l(u),u.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(d,u){I(d,e,u),b(e,l),b(l,t),b(e,n),f[o].m(e,null),i=!0},p(d,u){let _=o;o=c(d),o===_?f[o].p(d,u):(le(),v(f[_],1,1,()=>{f[_]=null}),ne(),r=f[o],r?r.p(d,u):(r=f[o]=a[o](d),r.c()),p(r,1),r.m(e,null))},i(d){i||(p(r),i=!0)},o(d){v(r),i=!1},d(d){d&&m(e),f[o].d()}}}function Ja(s){let e,l,t;function n(r){s[14](r)}let o={fields:s[5]};return s[2]!==void 0&&(o.checkedFields=s[2]),e=new St({props:o}),He.push(()=>Ge(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i&32&&(a.fields=r[5]),!l&&i&4&&(l=!0,a.checkedFields=r[2],We(()=>l=!1)),e.$set(a)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Ka(s){let e,l;return e=new Qe({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function pn(s){let e,l;return{c(){e=k("p"),l=Z("No fields selected. Please select at least one field to download."),this.h()},l(t){e=S(t,"P",{class:!0});var n=$(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){D(e,"class","text-gray-600")},m(t,n){I(t,e,n),b(e,l)},d(t){t&&m(e)}}}function Za(s){let e,l;return e=new Hn({props:{value:JSON.stringify(s[7].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&128&&(o.value=JSON.stringify(t[7].data,null,2)),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Ga(s){let e,l;return e=new Qe({props:{paragraph:!0}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function Wa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y;const N=[Qa,Ya],C=[];function L(E,R){return E[6]==null?0:1}o=L(s),r=C[o]=N[o](s);let V=(s[5]==null||s[5].length>0)&&_n(s),O=s[3].length===0&&pn();const T=[Ga,Za],z=[];function F(E,R){return E[7]&&E[7].isFetching?0:E[4]&&E[7]?1:-1}return~(g=F(s))&&(w=z[g]=T[g](s)),{c(){e=k("section"),l=k("h4"),t=Z("Select source fields"),n=Y(),r.c(),i=Y(),V&&V.c(),a=Y(),f=k("section"),c=k("h4"),d=Z("Download preview"),u=Y(),O&&O.c(),_=Y(),h=k("div"),w&&w.c(),this.h()},l(E){e=S(E,"SECTION",{});var R=$(e);l=S(R,"H4",{class:!0});var ee=$(l);t=G(ee,"Select source fields"),ee.forEach(m),n=Q(R),r.l(R),R.forEach(m),i=Q(E),V&&V.l(E),a=Q(E),f=S(E,"SECTION",{});var K=$(f);c=S(K,"H4",{class:!0});var U=$(c);d=G(U,"Download preview"),U.forEach(m),u=Q(K),O&&O.l(K),_=Q(K),h=S(K,"DIV",{class:!0});var M=$(h);w&&w.l(M),M.forEach(m),K.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j"),D(c,"class","svelte-1ge817j"),D(h,"class","preview svelte-1ge817j")},m(E,R){I(E,e,R),b(e,l),b(l,t),b(e,n),C[o].m(e,null),I(E,i,R),V&&V.m(E,R),I(E,a,R),I(E,f,R),b(f,c),b(c,d),b(f,u),O&&O.m(f,null),b(f,_),b(f,h),~g&&z[g].m(h,null),y=!0},p(E,R){let ee=o;o=L(E),o===ee?C[o].p(E,R):(le(),v(C[ee],1,1,()=>{C[ee]=null}),ne(),r=C[o],r?r.p(E,R):(r=C[o]=N[o](E),r.c()),p(r,1),r.m(e,null)),E[5]==null||E[5].length>0?V?(V.p(E,R),R&32&&p(V,1)):(V=_n(E),V.c(),p(V,1),V.m(a.parentNode,a)):V&&(le(),v(V,1,1,()=>{V=null}),ne()),E[3].length===0?O||(O=pn(),O.c(),O.m(f,_)):O&&(O.d(1),O=null);let K=g;g=F(E),g===K?~g&&z[g].p(E,R):(w&&(le(),v(z[K],1,1,()=>{z[K]=null}),ne()),~g?(w=z[g],w?w.p(E,R):(w=z[g]=T[g](E),w.c()),p(w,1),w.m(h,null)):w=null)},i(E){y||(p(r),p(V),p(w),y=!0)},o(E){v(r),v(V),v(w),y=!1},d(E){E&&m(e),C[o].d(),E&&m(i),V&&V.d(E),E&&m(a),E&&m(f),O&&O.d(),~g&&z[g].d()}}}function Xa(s){let e,l,t,n,o,r;return e=new Cn({props:{title:"Download data"}}),t=new Fn({props:{hasForm:!0,$$slots:{default:[Wa]},$$scope:{ctx:s}}}),o=new Mn({props:{primaryButtonText:"Download",primaryButtonDisabled:s[3].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",s[10]),{c(){B(e.$$.fragment),l=Y(),B(t.$$.fragment),n=Y(),B(o.$$.fragment)},l(i){q(e.$$.fragment,i),l=Q(i),q(t.$$.fragment,i),n=Q(i),q(o.$$.fragment,i)},m(i,a){A(e,i,a),I(i,l,a),A(t,i,a),I(i,n,a),A(o,i,a),r=!0},p(i,a){const f={};a&262398&&(f.$$scope={dirty:a,ctx:i}),t.$set(f);const c={};a&8&&(c.primaryButtonDisabled=i[3].length===0),o.$set(c)},i(i){r||(p(e.$$.fragment,i),p(t.$$.fragment,i),p(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){H(e,i),i&&m(l),H(t,i),i&&m(n),H(o,i)}}}function xa(s){let e,l;return e=new Tn({props:{size:"lg",open:s[0],$$slots:{default:[Xa]},$$scope:{ctx:s}}}),e.$on("submit",s[9]),e.$on("close",s[15]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&262398&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function eo(s,e,l){let t,n,o,r,i,a,f=x,c=()=>(f(),f=Fe(r,T=>l(7,a=T)),r);s.$$.on_destroy.push(()=>f());let{open:d=!1}=e,{schema:u}=e;const _=wt(),h=Oe();ge(s,h,T=>l(12,i=T));let g=[],w=[];function y(T){if(T==null)return{sourceFields:null,enrichedFields:null};const F=It(T).filter(R=>["embedding"].indexOf(R.dtype)===-1).filter(R=>!it(R)),E=nt(T).filter(R=>Tt(R)).filter(R=>!nt(R).some(ee=>ee.dtype==="embedding"));return{sourceFields:F,enrichedFields:E}}async function N(){const T=i.namespace,z=i.datasetName,F={combine_columns:!1,columns:o.map(ee=>ee.path)},E=`/api/v1/datasets/${T}/${z}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(F))}`,R=document.createElement("a");R.download=`${T}_${z}.json`,R.href=E,document.body.appendChild(R),R.click(),R.remove()}function C(){l(0,d=!1),_("close")}function L(T){g=T,l(1,g)}function V(T){w=T,l(2,w)}const O=()=>l(0,d=!1);return s.$$set=T=>{"open"in T&&l(0,d=T.open),"schema"in T&&l(11,u=T.schema)},s.$$.update=()=>{s.$$.dirty&2048&&l(6,{sourceFields:t,enrichedFields:n}=y(u),t,(l(5,n),l(11,u))),s.$$.dirty&6&&l(3,o=[...g,...w]),s.$$.dirty&4104&&c(l(4,r=o.length>0?Ar(i.namespace,i.datasetName,{columns:o.map(T=>T.path),limit:3,combine_columns:!1}):null))},[d,g,w,o,r,n,t,a,h,N,C,u,i,L,V,O]}class to extends we{constructor(e){super(),$e(this,e,eo,xa,be,{open:0,schema:11})}}function gn(s){let e,l,t,n,o,r;function i(d){s[23](d)}let a={schema:s[12].data,namespace:s[0],name:s[1]};s[4]!==void 0&&(a.open=s[4]),e=new Ua({props:a}),He.push(()=>Ge(e,"open",i));function f(d){s[24](d)}let c={schema:s[12].data};return s[5]!==void 0&&(c.open=s[5]),n=new to({props:c}),He.push(()=>Ge(n,"open",f)),{c(){B(e.$$.fragment),t=Y(),B(n.$$.fragment)},l(d){q(e.$$.fragment,d),t=Q(d),q(n.$$.fragment,d)},m(d,u){A(e,d,u),I(d,t,u),A(n,d,u),r=!0},p(d,u){const _={};u&4096&&(_.schema=d[12].data),u&1&&(_.namespace=d[0]),u&2&&(_.name=d[1]),!l&&u&16&&(l=!0,_.open=d[4],We(()=>l=!1)),e.$set(_);const h={};u&4096&&(h.schema=d[12].data),!o&&u&32&&(o=!0,h.open=d[5],We(()=>o=!1)),n.$set(h)},i(d){r||(p(e.$$.fragment,d),p(n.$$.fragment,d),r=!0)},o(d){v(e.$$.fragment,d),v(n.$$.fragment,d),r=!1},d(d){H(e,d),d&&m(t),H(n,d)}}}function bn(s){let e,l;return e=new Ft({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[ro]},$$scope:{ctx:s}}}),e.$on("click:button--secondary",s[25]),e.$on("close",s[26]),e.$on("submit",s[27]),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&268443648&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function lo(s){let e,l;return e=new Hn({props:{value:`${s[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function no(s){let e,l;return e=new Qe({}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ro(s){let e,l,t,n,o,r,i,a,f,c;const d=[no,lo],u=[];function _(h,g){var w,y;return(w=h[13])!=null&&w.isFetching?0:(y=h[13])!=null&&y.data?1:-1}return~(i=_(s))&&(a=u[i]=d[i](s)),{c(){e=k("div"),l=Z(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Y(),n=k("div"),o=Z("config.yml"),r=Y(),a&&a.c(),f=ie(),this.h()},l(h){e=S(h,"DIV",{class:!0});var g=$(e);l=G(g,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),g.forEach(m),t=Q(h),n=S(h,"DIV",{class:!0});var w=$(n);o=G(w,"config.yml"),w.forEach(m),r=Q(h),a&&a.l(h),f=ie(),this.h()},h(){D(e,"class","mb-4 text-sm"),D(n,"class","font-mono text-xs")},m(h,g){I(h,e,g),b(e,l),I(h,t,g),I(h,n,g),b(n,o),I(h,r,g),~i&&u[i].m(h,g),I(h,f,g),c=!0},p(h,g){let w=i;i=_(h),i===w?~i&&u[i].p(h,g):(a&&(le(),v(u[w],1,1,()=>{u[w]=null}),ne()),~i?(a=u[i],a?a.p(h,g):(a=u[i]=d[i](h),a.c()),p(a,1),a.m(f.parentNode,f)):a=null)},i(h){c||(p(a),c=!0)},o(h){v(a),c=!1},d(h){h&&m(e),h&&m(t),h&&m(n),h&&m(r),~i&&u[i].d(h),h&&m(f)}}}function so(s){let e,l,t,n,o,r,i,a,f,c,d;t=new Va({}),i=new Ii({});let u=s[12].data&&gn(s),_=s[2]&&bn(s);return{c(){e=k("div"),l=k("div"),B(t.$$.fragment),o=Y(),r=k("div"),B(i.$$.fragment),a=Y(),u&&u.c(),f=Y(),_&&_.c(),c=ie(),this.h()},l(h){e=S(h,"DIV",{class:!0});var g=$(e);l=S(g,"DIV",{class:!0});var w=$(l);q(t.$$.fragment,w),w.forEach(m),o=Q(g),r=S(g,"DIV",{class:!0});var y=$(r);q(i.$$.fragment,y),y.forEach(m),g.forEach(m),a=Q(h),u&&u.l(h),f=Q(h),_&&_.l(h),c=ie(),this.h()},h(){D(l,"class",n=Rt(`schema-container relative h-full ${s[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),D(r,"class","h-full w-2/3 flex-grow"),D(e,"class","flex h-full w-full")},m(h,g){I(h,e,g),b(e,l),A(t,l,null),b(e,o),b(e,r),A(i,r,null),I(h,a,g),u&&u.m(h,g),I(h,f,g),_&&_.m(h,g),I(h,c,g),d=!0},p(h,g){(!d||g&2048&&n!==(n=Rt(`schema-container relative h-full ${h[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&D(l,"class",n),h[12].data?u?(u.p(h,g),g&4096&&p(u,1)):(u=gn(h),u.c(),p(u,1),u.m(f.parentNode,f)):u&&(le(),v(u,1,1,()=>{u=null}),ne()),h[2]?_?(_.p(h,g),g&4&&p(_,1)):(_=bn(h),_.c(),p(_,1),_.m(c.parentNode,c)):_&&(le(),v(_,1,1,()=>{_=null}),ne())},i(h){d||(p(t.$$.fragment,h),p(i.$$.fragment,h),p(u),p(_),d=!0)},o(h){v(t.$$.fragment,h),v(i.$$.fragment,h),v(u),v(_),d=!1},d(h){h&&m(e),H(t),H(i),h&&m(a),u&&u.d(h),h&&m(f),_&&_.d(h),h&&m(c)}}}function io(s){let e,l,t=s[3].namespace+"",n,o,r=s[3].datasetName+"",i,a,f;return{c(){e=k("div"),l=k("a"),n=Z(t),o=Z("/"),i=Z(r),this.h()},l(c){e=S(c,"DIV",{class:!0});var d=$(e);l=S(d,"A",{class:!0,href:!0});var u=$(l);n=G(u,t),o=G(u,"/"),i=G(u,r),u.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","font-semibold text-black"),D(l,"href",s[8]),D(e,"class","dataset-name svelte-1xlsh2v")},m(c,d){I(c,e,d),b(e,l),b(l,n),b(l,o),b(l,i),a||(f=Pe(l,"click",s[21]),a=!0)},p(c,d){d&8&&t!==(t=c[3].namespace+"")&&fe(n,t),d&8&&r!==(r=c[3].datasetName+"")&&fe(i,r),d&256&&D(l,"href",c[8])},d(c){c&&m(e),a=!1,f()}}}function ao(s){let e,l,t,n,o,r,i,a,f,c,d,u;return t=new Bs({}),r=new rt({props:{type:"outline",$$slots:{default:[io]},$$scope:{ctx:s}}}),f=new ut({}),{c(){e=k("div"),l=k("button"),B(t.$$.fragment),o=Y(),B(r.$$.fragment),i=Y(),a=k("button"),B(f.$$.fragment),this.h()},l(_){e=S(_,"DIV",{slot:!0,class:!0});var h=$(e);l=S(h,"BUTTON",{class:!0});var g=$(l);q(t.$$.fragment,g),g.forEach(m),o=Q(h),q(r.$$.fragment,h),i=Q(h),a=S(h,"BUTTON",{});var w=$(a);q(f.$$.fragment,w),w.forEach(m),h.forEach(m),this.h()},h(){D(l,"class","mr-2"),_e(l,"bg-blue-100",!s[11]),_e(l,"outline-blue-400",!s[11]),_e(l,"outline",!s[11]),D(e,"slot","header-subtext"),D(e,"class","flex flex-row items-center gap-x-1")},m(_,h){I(_,e,h),b(e,l),A(t,l,null),b(e,o),A(r,e,null),b(e,i),b(e,a),A(f,a,null),c=!0,d||(u=[Ve(n=Ne.call(null,l,{text:s[11]?"Show Schema":"Hide Schema"})),Pe(l,"click",s[15]),Pe(l,"keypress",s[15]),Pe(a,"click",s[22]),Ve(Ne.call(null,a,{text:"Dataset information"}))],d=!0)},p(_,h){n&&Ye(n.update)&&h&2048&&n.update.call(null,{text:_[11]?"Show Schema":"Hide Schema"}),(!c||h&2048)&&_e(l,"bg-blue-100",!_[11]),(!c||h&2048)&&_e(l,"outline-blue-400",!_[11]),(!c||h&2048)&&_e(l,"outline",!_[11]);const g={};h&268435720&&(g.$$scope={dirty:h,ctx:_}),r.$set(g)},i(_){c||(p(t.$$.fragment,_),p(r.$$.fragment,_),p(f.$$.fragment,_),c=!0)},o(_){v(t.$$.fragment,_),v(r.$$.fragment,_),v(f.$$.fragment,_),c=!1},d(_){_&&m(e),H(t),H(r),H(f),d=!1,xe(u)}}}function oo(s){let e,l,t;return l=new ji({}),{c(){e=k("div"),B(l.$$.fragment),this.h()},l(n){e=S(n,"DIV",{slot:!0,class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"slot","header-center"),D(e,"class","flex w-full items-center")},m(n,o){I(n,e,o),A(l,e,null),t=!0},p:x,i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),H(l)}}}function vn(s){let e,l,t,n;return{c(){e=k("div"),l=Z("Copied!"),this.h()},l(o){e=S(o,"DIV",{class:!0});var r=$(e);l=G(r,"Copied!"),r.forEach(m),this.h()},h(){D(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,r){I(o,e,r),b(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=sr(e,ns,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function fo(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,h,g,w,y,N,C,L=s[6]&&vn();return i=new Is({}),c=new ws({}),h=new hs({}),{c(){e=k("div"),l=k("div"),t=k("div"),n=k("div"),L&&L.c(),o=Y(),r=k("button"),B(i.$$.fragment),a=Y(),f=k("button"),B(c.$$.fragment),d=Y(),u=k("div"),_=k("button"),B(h.$$.fragment),this.h()},l(V){e=S(V,"DIV",{slot:!0});var O=$(e);l=S(O,"DIV",{class:!0});var T=$(l);t=S(T,"DIV",{class:!0});var z=$(t);n=S(z,"DIV",{class:!0});var F=$(n);L&&L.l(F),o=Q(F),r=S(F,"BUTTON",{});var E=$(r);q(i.$$.fragment,E),E.forEach(m),F.forEach(m),a=Q(z),f=S(z,"BUTTON",{});var R=$(f);q(c.$$.fragment,R),R.forEach(m),d=Q(z),u=S(z,"DIV",{class:!0});var ee=$(u);_=S(ee,"BUTTON",{});var K=$(_);q(h.$$.fragment,K),K.forEach(m),ee.forEach(m),z.forEach(m),T.forEach(m),O.forEach(m),this.h()},h(){D(n,"class","relative"),_.disabled=g=!s[9],D(u,"class","mr-2"),_e(u,"opacity-40",!s[9]),D(t,"class","flex"),D(l,"class","flex h-full flex-col"),D(e,"slot","header-right")},m(V,O){I(V,e,O),b(e,l),b(l,t),b(t,n),L&&L.m(n,null),b(n,o),b(n,r),A(i,r,null),b(t,a),b(t,f),A(c,f,null),b(t,d),b(t,u),b(u,_),A(h,_,null),y=!0,N||(C=[Ve(Ne.call(null,r,{text:"Copy the URL"})),Pe(r,"click",s[18]),Ve(Ne.call(null,f,{text:"Download data"})),Pe(f,"click",s[19]),Ve(Ne.call(null,_,{text:"Dataset settings"})),Pe(_,"click",s[20]),Ve(w=Ne.call(null,u,{text:s[9]?"":"User does not have access to update settings of this dataset."}))],N=!0)},p(V,O){V[6]?L?O&64&&p(L,1):(L=vn(),L.c(),p(L,1),L.m(n,o)):L&&(le(),v(L,1,1,()=>{L=null}),ne()),(!y||O&512&&g!==(g=!V[9]))&&(_.disabled=g),w&&Ye(w.update)&&O&512&&w.update.call(null,{text:V[9]?"":"User does not have access to update settings of this dataset."}),(!y||O&512)&&_e(u,"opacity-40",!V[9])},i(V){y||(p(L),p(i.$$.fragment,V),p(c.$$.fragment,V),p(h.$$.fragment,V),y=!0)},o(V){v(L),v(i.$$.fragment,V),v(c.$$.fragment,V),v(h.$$.fragment,V),y=!1},d(V){V&&m(e),L&&L.d(),H(i),H(c),H(h),N=!1,xe(C)}}}function co(s){let e,l;return e=new hr({props:{$$slots:{"header-right":[fo],"header-center":[oo],"header-subtext":[ao],default:[so]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,[n]){const o={};n&268450687&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function uo(s,e,l){let t,n,o,r,i,a,f,c,d=x,u=()=>(d(),d=Fe(n,J=>l(12,c=J)),n),_,h=x,g=()=>(h(),h=Fe(i,J=>l(13,_=J)),i);s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>h());let{namespace:w}=e,{datasetName:y}=e;const N=Oe();ge(s,N,J=>l(3,f=J));function C(){_t(N,f.schemaCollapsed=!f.schemaCollapsed,f)}let L=!1,V=!1;const O=Nt();ge(s,O,J=>l(17,a=J));let T=!1,z=!1;const F=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,T=!0),setTimeout(()=>l(6,T=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),E=()=>l(5,V=!0),R=()=>l(4,L=!0),ee=()=>Sn(r),K=()=>l(2,z=!0);function U(J){L=J,l(4,L)}function M(J){V=J,l(5,V)}const P=()=>l(2,z=!1),X=()=>l(2,z=!1),j=()=>l(2,z=!1);return s.$$set=J=>{"namespace"in J&&l(0,w=J.namespace),"datasetName"in J&&l(1,y=J.datasetName)},s.$$.update=()=>{var J;s.$$.dirty&8&&l(11,t=f.schemaCollapsed),s.$$.dirty&8&&u(l(10,n=Vt(f.namespace,f.datasetName))),s.$$.dirty&131072&&l(9,o=(J=a.data)==null?void 0:J.access.dataset.update_settings),s.$$.dirty&3&&l(8,r=or(w,y)),s.$$.dirty&7&&g(l(7,i=z?Hr(w,y,"yaml"):null))},[w,y,z,f,L,V,T,i,r,o,n,t,c,_,N,C,O,a,F,E,R,ee,K,U,M,P,X,j]}class mo extends we{constructor(e){super(),$e(this,e,uo,co,be,{namespace:0,datasetName:1})}}function ho(s){let e;return{c(){e=Z("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){I(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function _o(s){let e=s[2],l,t,n=wn(s);return{c(){n.c(),l=ie()},l(o){n.l(o),l=ie()},m(o,r){n.m(o,r),I(o,l,r),t=!0},p(o,r){r&4&&be(e,e=o[2])?(le(),v(n,1,1,x),ne(),n=wn(o),n.c(),p(n,1),n.m(l.parentNode,l)):n.p(o,r)},i(o){t||(p(n),t=!0)},o(o){v(n),t=!1},d(o){o&&m(l),n.d(o)}}}function wn(s){let e,l;return e=new mo({props:{namespace:s[0],datasetName:s[1]}}),{c(){B(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function po(s){let e,l,t,n;const o=[_o,ho],r=[];function i(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),I(a,t,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function go(s,e,l){let t,n,o,r,i,a,f,c,d=x,u=()=>(d(),d=Fe(f,K=>l(10,c=K)),f),_,h=x,g=()=>(h(),h=Fe(t,K=>l(11,_=K)),t),w,y=x,N=()=>(y(),y=Fe(a,K=>l(12,w=K)),a),C,L=x,V=()=>(L(),L=Fe(r,K=>l(13,C=K)),r),O,T=x,z=()=>(T(),T=Fe(o,K=>l(14,O=K)),o),F;s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>h()),s.$$.on_destroy.push(()=>y()),s.$$.on_destroy.push(()=>L()),s.$$.on_destroy.push(()=>T());let E,R;const ee=fr();return ge(s,ee,K=>l(15,F=K)),s.$$.update=()=>{if(s.$$.dirty&32771&&F.page==="datasets")if(F.identifier==""||F.identifier==null)l(0,E=void 0),l(1,R=void 0);else{const[K,U]=F.identifier.split("/");(E!=K||R!=U)&&(l(0,E=K),l(1,R=U))}if(s.$$.dirty&3&&g(l(2,t=E&&R?jr(E,R):null)),s.$$.dirty&7&&t!=null){const K=Kr(E,R);cr("datasets",`${E}/${R}`,t,ee,U=>dr(U,K),U=>ur(U,K))}if(s.$$.dirty&4&&t!=null&&Or(t),s.$$.dirty&3&&l(8,n=E&&R?Lr(E,R):null),s.$$.dirty&256&&n!=null&&qr(n),s.$$.dirty&3&&z(l(6,o=E&&R?mt(E,R):null)),s.$$.dirty&16640&&n&&O!=null&&O.data&&n.setSettings(O.data),s.$$.dirty&3&&V(l(5,r=E&&R?Vt(E,R):null)),s.$$.dirty&8448&&n&&C!=null&&C.data&&n.setSchema(C.data),s.$$.dirty&8192&&l(9,i=C!=null&&C.data?Ur("string",C.data):null),s.$$.dirty&515&&N(l(4,a=E&&R&&i?Yr(E,R,i.map(K=>K.path)):null)),s.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),s.$$.dirty&2051&&u(l(3,f=E&&R&&_?Qr(E,R,Jr(_)):null)),s.$$.dirty&1280&&n&&c!=null&&c.data&&n.setSelectRowsSchema(c),s.$$.dirty&3328&&n&&_&&c!=null&&c.data){const K=rs(_.selectedColumns||{},_.query,(c==null?void 0:c.data)||null);n.setVisibleFields(K)}},[E,R,t,f,a,r,o,ee,n,i,c,_,w,C,O,F]}class Fo extends we{constructor(e){super(),$e(this,e,go,po,be,{})}}export{Fo as component};
