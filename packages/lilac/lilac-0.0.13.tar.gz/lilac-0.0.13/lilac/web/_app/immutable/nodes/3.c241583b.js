import{S as le,i as ce,s as ie,y as P,z as V,A as B,g as _,d as g,B as N,O,k as v,a as X,e as q,l as k,m as C,h as d,c as Y,n as w,b as y,a0 as $,v as U,f as R,G,H as Z,a7 as fe,a8 as ue,M as pe,a1 as L,ac as de,q as S,r as I,u as M,ad as me}from"../chunks/index.0cab886b.js";import{a as _e,c as he,g as K,f as F}from"../chunks/utils.840c08f0.js";import{P as $e}from"../chunks/Page.8447f916.js";import{f as ge,n as be,d as ve,h as ke,p as Ce,r as we,c as ye,u as Ee}from"../chunks/Commands.25d63466.js";import{T as Te,I as J,C as Se}from"../chunks/ConceptView.0703e6fa.js";import{M as Ie}from"../chunks/ChevronUp.69f13843.js";function Q(a){let e,n,t,o;const l=[Ve,Pe,De],s=[];function c(r,i){var f,p,b;return(f=r[7])!=null&&f.isLoading?0:(p=r[7])!=null&&p.isError?1:(b=r[7])!=null&&b.isSuccess?2:-1}return~(e=c(a))&&(n=s[e]=l[e](a)),{c(){n&&n.c(),t=q()},l(r){n&&n.l(r),t=q()},m(r,i){~e&&s[e].m(r,i),y(r,t,i),o=!0},p(r,i){let f=e;e=c(r),e===f?~e&&s[e].p(r,i):(n&&(U(),g(s[f],1,1,()=>{s[f]=null}),R()),~e?(n=s[e],n?n.p(r,i):(n=s[e]=l[e](r),n.c()),_(n,1),n.m(t.parentNode,t)):n=null)},i(r){o||(_(n),o=!0)},o(r){g(n),o=!1},d(r){~e&&s[e].d(r),r&&d(t)}}}function De(a){let e,n;return e=new Se({props:{concept:a[7].data}}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.concept=t[7].data),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Pe(a){let e,n=a[7].error+"",t;return{c(){e=v("p"),t=S(n)},l(o){e=k(o,"P",{});var l=C(e);t=I(l,n),l.forEach(d)},m(o,l){y(o,e,l),$(e,t)},p(o,l){l&128&&n!==(n=o[7].error+"")&&M(t,n)},i:L,o:L,d(o){o&&d(e)}}}function Ve(a){let e,n;return e=new ye({}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p:L,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function W(a){let e,n;return e=new Ie({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:a[6].isLoading?J:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Be]},$$scope:{ctx:a}}}),e.$on("click:button--secondary",a[17]),e.$on("close",a[18]),e.$on("submit",a[19]),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const l={};o&64&&(l.primaryButtonIcon=t[6].isLoading?J:void 0),o&1048580&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Be(a){let e,n,t,o=a[2].namespace+"",l,s,c=a[2].name+"",r,i,f,p,b;return{c(){e=v("p"),n=S("Confirm deleting "),t=v("code"),l=S(o),s=S("/"),r=S(c),i=S(" ?"),f=X(),p=v("p"),b=S("This is a permanent action and cannot be undone."),this.h()},l(u){e=k(u,"P",{class:!0});var m=C(e);n=I(m,"Confirm deleting "),t=k(m,"CODE",{});var D=C(t);l=I(D,o),s=I(D,"/"),r=I(D,c),D.forEach(d),i=I(m," ?"),m.forEach(d),f=Y(u),p=k(u,"P",{class:!0});var E=C(p);b=I(E,"This is a permanent action and cannot be undone."),E.forEach(d),this.h()},h(){w(e,"class","!text-lg"),w(p,"class","mt-2")},m(u,m){y(u,e,m),$(e,n),$(e,t),$(t,l),$(t,s),$(t,r),$(e,i),y(u,f,m),y(u,p,m),$(p,b)},p(u,m){m&4&&o!==(o=u[2].namespace+"")&&M(l,o),m&4&&c!==(c=u[2].name+"")&&M(r,c)},d(u){u&&d(e),u&&d(f),u&&d(p)}}}function Ne(a){let e,n,t,o,l,s=a[0]!=null&&a[1]!=null&&Q(a),c=a[2]&&W(a);return{c(){e=v("div"),n=v("div"),s&&s.c(),t=X(),c&&c.c(),o=q(),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=C(e);n=k(i,"DIV",{class:!0});var f=C(n);s&&s.l(f),f.forEach(d),i.forEach(d),t=Y(r),c&&c.l(r),o=q(),this.h()},h(){w(n,"class","lilac-page flex w-full"),w(e,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(r,i){y(r,e,i),$(e,n),s&&s.m(n,null),y(r,t,i),c&&c.m(r,i),y(r,o,i),l=!0},p(r,i){r[0]!=null&&r[1]!=null?s?(s.p(r,i),i&3&&_(s,1)):(s=Q(r),s.c(),_(s,1),s.m(n,null)):s&&(U(),g(s,1,1,()=>{s=null}),R()),r[2]?c?(c.p(r,i),i&4&&_(c,1)):(c=W(r),c.c(),_(c,1),c.m(o.parentNode,o)):c&&(U(),g(c,1,1,()=>{c=null}),R())},i(r){l||(_(s),_(c),l=!0)},o(r){g(s),g(c),l=!1},d(r){r&&d(e),s&&s.d(),r&&d(t),c&&c.d(r),r&&d(o)}}}function He(a){let e,n=F(a[0],a[1])+"",t,o,l;return{c(){e=v("a"),t=S(n),this.h()},l(s){e=k(s,"A",{class:!0,href:!0});var c=C(e);t=I(c,n),c.forEach(d),this.h()},h(){w(e,"class","font-semibold text-black"),w(e,"href",a[3])},m(s,c){y(s,e,c),$(e,t),o||(l=Z(e,"click",a[16]),o=!0)},p(s,c){c&3&&n!==(n=F(s[0],s[1])+"")&&M(t,n),c&8&&w(e,"href",s[3])},d(s){s&&d(e),o=!1,l()}}}function qe(a){let e,n,t;return n=new ve({props:{type:"green",$$slots:{default:[He]},$$scope:{ctx:a}}}),{c(){e=v("div"),P(n.$$.fragment),this.h()},l(o){e=k(o,"DIV",{slot:!0});var l=C(e);V(n.$$.fragment,l),l.forEach(d),this.h()},h(){w(e,"slot","header-subtext")},m(o,l){y(o,e,l),B(n,e,null),t=!0},p(o,l){const s={};l&1048587&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){t||(_(n.$$.fragment,o),t=!0)},o(o){g(n.$$.fragment,o),t=!1},d(o){o&&d(e),N(n)}}}function Le(a){let e,n,t,o,l,s,c,r,i;return o=new Te({props:{size:16}}),{c(){e=v("div"),n=v("div"),t=v("button"),P(o.$$.fragment),this.h()},l(f){e=k(f,"DIV",{slot:!0});var p=C(e);n=k(p,"DIV",{});var b=C(n);t=k(b,"BUTTON",{title:!0,class:!0});var u=C(t);V(o.$$.fragment,u),u.forEach(d),b.forEach(d),p.forEach(d),this.h()},h(){w(t,"title","Remove concept"),t.disabled=l=!a[4],w(t,"class","p-3 hover:text-red-400 hover:opacity-100"),G(n,"opacity-40",!a[4]),w(e,"slot","header-right")},m(f,p){y(f,e,p),$(e,n),$(n,t),B(o,t,null),c=!0,r||(i=[Z(t,"click",a[15]),fe(s=ke.call(null,n,{text:a[4]?"":"User does not have access to delete this concept."}))],r=!0)},p(f,p){(!c||p&16&&l!==(l=!f[4]))&&(t.disabled=l),s&&ue(s.update)&&p&16&&s.update.call(null,{text:f[4]?"":"User does not have access to delete this concept."}),(!c||p&16)&&G(n,"opacity-40",!f[4])},i(f){c||(_(o.$$.fragment,f),c=!0)},o(f){g(o.$$.fragment,f),c=!1},d(f){f&&d(e),N(o),r=!1,pe(i)}}}function Me(a){let e,n;return e=new $e({props:{$$slots:{"header-right":[Le],"header-subtext":[qe],default:[Ne]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,[o]){const l={};o&1048799&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Oe(a,e,n){let t,o,l,s,c,r,i,f,p=L,b=()=>(p(),p=de(t,h=>n(7,f=h)),t);a.$$.on_destroy.push(()=>p());let u,m;const D=_e();O(a,D,h=>n(14,i=h));let E=null;const z=ge();O(a,z,h=>n(13,r=h));const A=be();O(a,A,h=>n(6,c=h));function j(){if(E==null)return;const{namespace:h,name:T}=E;c.mutate([h,T],{onSuccess:()=>{var H;for(const[se,re]of Object.entries(Ce)){const ae=(H=me(Ee[se]).selectRowsSchema)==null?void 0:H.data;re.deleteConcept(h,T,ae)}n(2,E=null),K("/")}})}const x=()=>n(2,E={namespace:u,name:m}),ee=()=>K(s),te=()=>n(2,E=null),ne=()=>n(2,E=null),oe=()=>j();return a.$$.update=()=>{var h;if(a.$$.dirty&16387&&i.page==="concepts"&&i.identifier!=null){const[T,H]=i.identifier.split("/");(u!=T||m!=H)&&(n(0,u=T),n(1,m=H))}a.$$.dirty&3&&b(n(5,t=u&&m?we(u,m):void 0)),a.$$.dirty&8195&&n(12,o=(h=r.data)==null?void 0:h.find(T=>T.namespace===u&&T.name===m)),a.$$.dirty&4096&&n(4,l=o==null?void 0:o.acls.write),a.$$.dirty&3&&n(3,s=he(u,m))},[u,m,E,s,l,t,c,f,D,z,A,j,o,r,i,x,ee,te,ne,oe]}class Ke extends le{constructor(e){super(),ce(this,e,Oe,Me,ie,{})}}export{Ke as component};
