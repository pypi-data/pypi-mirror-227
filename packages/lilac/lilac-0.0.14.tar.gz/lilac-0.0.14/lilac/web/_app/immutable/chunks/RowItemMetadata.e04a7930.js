import{S as W,i as X,s as H,E as S,Z as T,_ as F,m as _,h as d,n as b,$ as G,b as B,a0 as h,L as x,a1 as j,N as L,Q as Z,q as O,r as Q,u as U,k as E,y as $,l as M,z as ee,A as te,a7 as _e,V as ve,g as P,d as N,B as le,e as oe,v as ie,f as ae,O as be,W as pe,X as we,a as J,c as K,p as fe,G as ue}from"./index.d15f259d.js";import{d as Ae,h as ze,V as ke,aU as Ee,L as Y,aC as Me,aD as Pe,a1 as Se,z as Ve,D as Re}from"./Commands.8cc00222.js";import{v as Ne,q as Be}from"./notificationsStore.1b999dea.js";import{E as ye}from"./StringSpanHighlight.5be8ed01.js";function de(n){let e,l;return{c(){e=T("title"),l=O(n[1])},l(t){e=F(t,"title",{});var i=_(e);l=Q(i,n[1]),i.forEach(d)},m(t,i){B(t,e,i),h(e,l)},p(t,i){i&2&&U(l,t[1])},d(t){t&&d(e)}}}function Ce(n){let e,l,t=n[1]&&de(n),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],f={};for(let o=0;o<i.length;o+=1)f=S(f,i[o]);return{c(){e=T("svg"),t&&t.c(),l=T("path"),this.h()},l(o){e=F(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=_(e);t&&t.l(s),l=F(s,"path",{d:!0}),_(l).forEach(d),s.forEach(d),this.h()},h(){b(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),G(e,f)},m(o,s){B(o,e,s),t&&t.m(e,null),h(e,l)},p(o,[s]){o[1]?t?t.p(o,s):(t=de(o),t.c(),t.m(e,l)):t&&(t.d(1),t=null),G(e,f=x(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:o[0]},s&1&&{height:o[0]},s&4&&o[2],s&8&&o[3]]))},i:j,o:j,d(o){o&&d(e),t&&t.d()}}}function De(n,e,l){let t,i;const f=["size","title"];let o=L(e,f),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=r=>{l(5,e=S(S({},e),Z(r))),l(3,o=L(e,f)),"size"in r&&l(0,s=r.size),"title"in r&&l(1,a=r.title)},n.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,i={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Z(e),[s,a,i,o,t]}class Te extends W{constructor(e){super(),X(this,e,De,Ce,H,{size:0,title:1})}}function ce(n){let e,l;return{c(){e=T("title"),l=O(n[1])},l(t){e=F(t,"title",{});var i=_(e);l=Q(i,n[1]),i.forEach(d)},m(t,i){B(t,e,i),h(e,l)},p(t,i){i&2&&U(l,t[1])},d(t){t&&d(e)}}}function Fe(n){let e,l,t,i=n[1]&&ce(n),f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let s=0;s<f.length;s+=1)o=S(o,f[s]);return{c(){e=T("svg"),i&&i.c(),l=T("path"),t=T("path"),this.h()},l(s){e=F(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=_(e);i&&i.l(a),l=F(a,"path",{d:!0}),_(l).forEach(d),t=F(a,"path",{d:!0}),_(t).forEach(d),a.forEach(d),this.h()},h(){b(l,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),b(t,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),G(e,o)},m(s,a){B(s,e,a),i&&i.m(e,null),h(e,l),h(e,t)},p(s,[a]){s[1]?i?i.p(s,a):(i=ce(s),i.c(),i.m(e,l)):i&&(i.d(1),i=null),G(e,o=x(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:j,o:j,d(s){s&&d(e),i&&i.d()}}}function Le(n,e,l){let t,i;const f=["size","title"];let o=L(e,f),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=r=>{l(5,e=S(S({},e),Z(r))),l(3,o=L(e,f)),"size"in r&&l(0,s=r.size),"title"in r&&l(1,a=r.title)},n.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,i={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Z(e),[s,a,i,o,t]}class Ie extends W{constructor(e){super(),X(this,e,Le,Fe,H,{size:0,title:1})}}function Ze(n){let e,l,t,i,f;const o=[n[3],{type:n[0]?"green":"blue"},{icon:n[2]}];let s={};for(let a=0;a<o.length;a+=1)s=S(s,o[a]);return l=new Ae({props:s}),{c(){e=E("div"),$(l.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var r=_(e);ee(l.$$.fragment,r),r.forEach(d),this.h()},h(){b(e,"class","signal-badge")},m(a,r){B(a,e,r),te(l,e,null),t=!0,i||(f=_e(ze.call(null,e,{text:n[1]})),i=!0)},p(a,[r]){const u=r&13?x(o,[r&8&&ve(a[3]),r&1&&{type:a[0]?"green":"blue"},r&4&&{icon:a[2]}]):{};l.$set(u)},i(a){t||(P(l.$$.fragment,a),t=!0)},o(a){N(l.$$.fragment,a),t=!1},d(a){a&&d(e),le(l),i=!1,f()}}}function qe(n,e,l){const t=["isPreview"];let i=L(e,t),{isPreview:f=!1}=e;const o=f?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",s=f?Ie:Te;return n.$$set=a=>{e=S(S({},e),Z(a)),l(3,i=L(e,t)),"isPreview"in a&&l(0,f=a.isPreview)},[f,o,s,i]}class Ye extends W{constructor(e){super(),X(this,e,qe,Ze,H,{isPreview:0})}}function me(n,e,l){const t=n.slice();return t[0]=e[l],t}function ge(n){let e,l,t=[],i=new Map,f,o=n[1];const s=a=>Re(a[0].path);for(let a=0;a<o.length;a+=1){let r=me(n,o,a),u=s(r);i.set(u,t[a]=he(u,r))}return{c(){e=E("div"),l=E("table");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var r=_(e);l=M(r,"TABLE",{class:!0});var u=_(l);for(let c=0;c<t.length;c+=1)t[c].l(u);u.forEach(d),r.forEach(d),this.h()},h(){b(l,"class","table w-full table-fixed border-collapse px-2 pt-1"),b(e,"class","border-t border-neutral-200 px-2 py-4")},m(a,r){B(a,e,r),h(e,l);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,null);f=!0},p(a,r){r&2&&(o=a[1],ie(),t=pe(t,r,s,1,a,o,i,l,we,he,null,me),ae())},i(a){if(!f){for(let r=0;r<o.length;r+=1)P(t[r]);f=!0}},o(a){for(let r=0;r<t.length;r+=1)N(t[r]);f=!1},d(a){a&&d(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function Ge(n){let e,l;return e=new Ye({props:{isPreview:n[0].isPreviewSignal}}),{c(){$(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,i){te(e,t,i),l=!0},p(t,i){const f={};i&2&&(f.isPreview=t[0].isPreviewSignal),e.$set(f)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){le(e,t)}}}function je(n){var t;let e,l;return e=new ye({props:{hideEmbeddingName:!0,embedding:(t=n[0].field.signal)==null?void 0:t.signal_name}}),{c(){$(e.$$.fragment)},l(i){ee(e.$$.fragment,i)},m(i,f){te(e,i,f),l=!0},p(i,f){var s;const o={};f&2&&(o.embedding=(s=i[0].field.signal)==null?void 0:s.signal_name),e.$set(o)},i(i){l||(P(e.$$.fragment,i),l=!0)},o(i){N(e.$$.fragment,i),l=!1},d(i){le(e,i)}}}function he(n,e){let l,t,i,f=e[0].fieldName+"",o,s,a,r,u,c,z,p,g,k=e[0].formattedValue+"",y,C,V,A;const D=[je,Ge],v=[];function I(w,m){return w[0].isEmbeddingSignal?0:w[0].isSignal?1:-1}return~(u=I(e))&&(c=v[u]=D[u](e)),{key:n,first:null,c(){l=E("tr"),t=E("td"),i=E("span"),o=O(f),a=J(),r=E("td"),c&&c.c(),z=J(),p=E("td"),g=E("div"),y=O(k),V=J(),this.h()},l(w){l=M(w,"TR",{class:!0});var m=_(l);t=M(m,"TD",{class:!0});var R=_(t);i=M(R,"SPAN",{title:!0});var q=_(i);o=Q(q,f),q.forEach(d),R.forEach(d),a=K(m),r=M(m,"TD",{class:!0});var se=_(r);c&&c.l(se),se.forEach(d),z=K(m),p=M(m,"TD",{class:!0});var ne=_(p);g=M(ne,"DIV",{title:!0,class:!0});var re=_(g);y=Q(re,k),re.forEach(d),ne.forEach(d),V=K(m),m.forEach(d),this.h()},h(){b(i,"title",s=e[0].fieldName),fe(i,"padding-left",`${e[0].indentLevel*12}px`),b(t,"class","truncate p-2 font-mono text-xs font-medium text-neutral-500"),b(r,"class","w-10"),b(g,"title",C=`${e[0].value}`),b(g,"class","truncate pr-2 text-xs"),ue(g,"italic",e[0].formattedValue===null),b(p,"class","p-2"),b(l,"class","border-gray-300"),this.first=l},m(w,m){B(w,l,m),h(l,t),h(t,i),h(i,o),h(l,a),h(l,r),~u&&v[u].m(r,null),h(l,z),h(l,p),h(p,g),h(g,y),h(l,V),A=!0},p(w,m){e=w,(!A||m&2)&&f!==(f=e[0].fieldName+"")&&U(o,f),(!A||m&2&&s!==(s=e[0].fieldName))&&b(i,"title",s),m&2&&fe(i,"padding-left",`${e[0].indentLevel*12}px`);let R=u;u=I(e),u===R?~u&&v[u].p(e,m):(c&&(ie(),N(v[R],1,1,()=>{v[R]=null}),ae()),~u?(c=v[u],c?c.p(e,m):(c=v[u]=D[u](e),c.c()),P(c,1),c.m(r,null)):c=null),(!A||m&2)&&k!==(k=e[0].formattedValue+"")&&U(y,k),(!A||m&2&&C!==(C=`${e[0].value}`))&&b(g,"title",C),(!A||m&2)&&ue(g,"italic",e[0].formattedValue===null)},i(w){A||(P(c),A=!0)},o(w){N(c),A=!1},d(w){w&&d(l),~u&&v[u].d()}}}function Oe(n){let e,l,t=n[1].length>0&&ge(n);return{c(){t&&t.c(),e=oe()},l(i){t&&t.l(i),e=oe()},m(i,f){t&&t.m(i,f),B(i,e,f),l=!0},p(i,[f]){i[1].length>0?t?(t.p(i,f),f&2&&P(t,1)):(t=ge(i),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(ie(),N(t,1,1,()=>{t=null}),ae())},i(i){l||(P(t),l=!0)},o(i){N(t),l=!1},d(i){t&&t.d(i),i&&d(e)}}}function Qe(n,e,l){let t,i,{row:f}=e,{visibleFields:o}=e,{selectRowsSchema:s=void 0}=e;const a=ke();be(n,a,u=>l(5,i=u));function r(u){return Ee(u).filter(z=>Ne(z,o)).map(z=>{var A;const p=Y.field(z),g=Y.path(z);let k=Y.value(z);if(p.dtype==="string_span"){if(s==null)return null;const D=[];for(let v=g.length-1;v>=0;v--){const I=g.slice(0,v);if(Me(s==null?void 0:s.schema,I).dtype==="string"){const m=Y.value(Pe(u,I)),{start:R,end:q}=k;D.push(m.slice(R,q));break}}k=D}const y=((A=i.data)==null?void 0:A.some(D=>{var v;return D.name===((v=p.signal)==null?void 0:v.signal_name)}))||!1,C=Se(p);let V;return y||C&&p.dtype==null||p.dtype==="embedding"||p.repeated_field!=null?V="":k==null?V=null:V=Ve(k),{indentLevel:g.length-1,fieldName:g[g.length-1],field:p,path:g,isSignal:C,isPreviewSignal:s!=null?Be(s,g):!1,isEmbeddingSignal:y,value:k,formattedValue:V}}).filter(z=>z!=null)}return n.$$set=u=>{"row"in u&&l(0,f=u.row),"visibleFields"in u&&l(3,o=u.visibleFields),"selectRowsSchema"in u&&l(4,s=u.selectRowsSchema)},n.$$.update=()=>{n.$$.dirty&1&&l(1,t=r(f))},[f,t,a,o,s]}class Je extends W{constructor(e){super(),X(this,e,Qe,Oe,H,{row:0,visibleFields:3,selectRowsSchema:4})}}export{Je as R,Ye as S};
