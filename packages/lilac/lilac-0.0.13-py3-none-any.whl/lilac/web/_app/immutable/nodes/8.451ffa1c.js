import{S as ke,i as we,s as se,k as V,q as Y,a as z,y as P,l as D,m as j,r as Z,h as d,c as B,z as y,n as F,G as ae,b as R,a0 as b,A as C,u as le,g as u,v as Q,d as _,f as W,B as T,o as Ie,w as ie,T as oe,U as fe,a1 as L,ac as ue,O as ce,e as me,H as Ve}from"../chunks/index.0cab886b.js";import{a as De,g as je,s as Pe}from"../chunks/utils.840c08f0.js";import{P as ye}from"../chunks/Page.8447f916.js";import{B as Ce,aP as Te,av as Fe,aQ as He,aL as Oe,aR as Re,aS as qe,aT as Ne,ax as Ae,ay as ze,D as Be,W as Je,c as re,i as Me,d as Le}from"../chunks/Commands.25d63466.js";import{k as Ue}from"../chunks/notificationsStore.5fbe1b4b.js";import{T as Ge,a as _e,b as pe,R as Qe}from"../chunks/RowItemMetadata.8b97a95c.js";import{T as Se,S as We}from"../chunks/StringSpanHighlight.8f571d33.js";function de(r){let t,n,e;return n=new He({props:{source:r[0].json_schema.description}}),{c(){t=V("div"),P(n.$$.fragment),this.h()},l(s){t=D(s,"DIV",{class:!0});var l=j(t);y(n.$$.fragment,l),l.forEach(d),this.h()},h(){F(t,"class","text text-base text-gray-600")},m(s,l){R(s,t,l),C(n,t,null),e=!0},p(s,l){const a={};l&1&&(a.source=s[0].json_schema.description),n.$set(a)},i(s){e||(u(n.$$.fragment,s),e=!0)},o(s){_(n.$$.fragment,s),e=!1},d(s){s&&d(t),T(n)}}}function Ke(r){let t;return{c(){t=Y("Compute")},l(n){t=Z(n,"Compute")},m(n,e){R(n,t,e)},d(n){n&&d(t)}}}function Xe(r){let t,n;return t=new Ge({props:{$$slots:{content:[tt],default:[Ze]},$$scope:{ctx:r}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&8389594&&(l.$$scope={dirty:s,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ye(r){let t,n;return t=new re({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p:L,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ze(r){let t,n,e,s;return t=new _e({props:{label:"Preview"}}),e=new _e({props:{label:"Raw response"}}),{c(){P(t.$$.fragment),n=z(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=B(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),R(l,n,a),C(e,l,a),s=!0},p:L,i(l){s||(u(t.$$.fragment,l),u(e.$$.fragment,l),s=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),s=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function ge(r){let t,n;return t=new We({props:{text:r[1],row:r[6],spanPaths:r[3],valuePaths:r[7],embeddings:[]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&2&&(l.text=e[1]),s&64&&(l.row=e[6]),s&8&&(l.spanPaths=e[3]),s&128&&(l.valuePaths=e[7]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function $e(r){let t,n;return t=new Qe({props:{row:r[6],visibleFields:r[8]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&64&&(l.row=e[6]),s&256&&(l.visibleFields=e[8]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function he(r){let t,n,e;return{c(){t=V("div"),n=V("div"),e=Y(r[9]),this.h()},l(s){t=D(s,"DIV",{class:!0});var l=j(t);n=D(l,"DIV",{class:!0});var a=j(n);e=Z(a,r[9]),a.forEach(d),l.forEach(d),this.h()},h(){F(n,"class","text text-base"),F(t,"class","flex flex-row items-center")},m(s,l){R(s,t,l),b(t,n),b(n,e)},p(s,l){l&512&&le(e,s[9])},d(s){s&&d(t)}}}function xe(r){let t,n,e,s,l=r[7].length>0&&ge(r),a=r[8].length>0&&$e(r),f=r[9]!=null&&he(r);return{c(){t=V("div"),l&&l.c(),n=z(),a&&a.c(),e=z(),f&&f.c(),this.h()},l(o){t=D(o,"DIV",{class:!0});var i=j(t);l&&l.l(i),n=B(i),a&&a.l(i),e=B(i),f&&f.l(i),i.forEach(d),this.h()},h(){F(t,"class","mt-2")},m(o,i){R(o,t,i),l&&l.m(t,null),b(t,n),a&&a.m(t,null),b(t,e),f&&f.m(t,null),s=!0},p(o,i){o[7].length>0?l?(l.p(o,i),i&128&&u(l,1)):(l=ge(o),l.c(),u(l,1),l.m(t,n)):l&&(Q(),_(l,1,1,()=>{l=null}),W()),o[8].length>0?a?(a.p(o,i),i&256&&u(a,1)):(a=$e(o),a.c(),u(a,1),a.m(t,e)):a&&(Q(),_(a,1,1,()=>{a=null}),W()),o[9]!=null?f?f.p(o,i):(f=he(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(o){s||(u(l),u(a),s=!0)},o(o){_(l),_(a),s=!1},d(o){o&&d(t),l&&l.d(),a&&a.d(),f&&f.d()}}}function et(r){let t,n;return t=new Se({props:{value:JSON.stringify(r[4].data.items[0],null,2),readonly:!0,rows:10,class:"mb-2 font-mono"}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&16&&(l.value=JSON.stringify(e[4].data.items[0],null,2)),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function tt(r){let t,n,e,s;return t=new pe({props:{$$slots:{default:[xe]},$$scope:{ctx:r}}}),e=new pe({props:{$$slots:{default:[et]},$$scope:{ctx:r}}}),{c(){P(t.$$.fragment),n=z(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=B(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),R(l,n,a),C(e,l,a),s=!0},p(l,a){const f={};a&8389578&&(f.$$scope={dirty:a,ctx:l}),t.$set(f);const o={};a&8388624&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){s||(u(t.$$.fragment,l),u(e.$$.fragment,l),s=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),s=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function ve(r){var O;let t,n,e,s,l,a,f,o;function i(c){r[21](c)}function g(c){r[22](c)}let m={schema:r[0].json_schema,showDescription:!1,hiddenProperties:["/signal_name"],customComponents:r[16][(O=r[0])==null?void 0:O.name]};return r[2]!==void 0&&(m.value=r[2]),r[10]!==void 0&&(m.validationErrors=r[10]),l=new Oe({props:m}),ie.push(()=>oe(l,"value",i)),ie.push(()=>oe(l,"validationErrors",g)),{c(){t=V("div"),n=V("h4"),e=Y("Signal options"),s=z(),P(l.$$.fragment)},l(c){t=D(c,"DIV",{});var $=j(t);n=D($,"H4",{});var k=j(n);e=Z(k,"Signal options"),k.forEach(d),s=B($),y(l.$$.fragment,$),$.forEach(d)},m(c,$){R(c,t,$),b(t,n),b(n,e),b(t,s),C(l,t,null),o=!0},p(c,$){var U;const k={};$&1&&(k.schema=c[0].json_schema),$&1&&(k.customComponents=c[16][(U=c[0])==null?void 0:U.name]),!a&&$&4&&(a=!0,k.value=c[2],fe(()=>a=!1)),!f&&$&1024&&(f=!0,k.validationErrors=c[10],fe(()=>f=!1)),l.$set(k)},i(c){o||(u(l.$$.fragment,c),o=!0)},o(c){_(l.$$.fragment,c),o=!1},d(c){c&&d(t),T(l)}}}function nt(r){let t,n,e,s=r[0].json_schema.title+"",l,a,f,o,i,g,m,O,c,$,k,U,H,S,I,K,J,v=r[0].json_schema.description&&de(r);m=new Se({props:{value:r[5],cols:50,placeholder:"Paste text to try the signal.",rows:6,class:"mb-2"}}),m.$on("input",r[14]),k=new Ce({props:{$$slots:{default:[Ke]},$$scope:{ctx:r}}}),k.$on("click",r[20]);const x=[Ye,Xe],q=[];function X(p,E){var N,h;return(N=p[4])!=null&&N.isFetching?0:p[6]!=null&&p[1]!=null&&((h=p[4])==null?void 0:h.data)!=null?1:-1}~(S=X(r))&&(I=q[S]=x[S](r));let w=r[11]&&ve(r);return{c(){t=V("div"),n=V("div"),e=V("div"),l=Y(s),a=z(),v&&v.c(),f=z(),o=V("div"),i=V("div"),g=V("div"),P(m.$$.fragment),O=z(),c=V("div"),$=V("div"),P(k.$$.fragment),U=z(),H=V("div"),I&&I.c(),K=z(),w&&w.c(),this.h()},l(p){t=D(p,"DIV",{class:!0});var E=j(t);n=D(E,"DIV",{});var N=j(n);e=D(N,"DIV",{class:!0});var h=j(e);l=Z(h,s),h.forEach(d),a=B(N),v&&v.l(N),N.forEach(d),f=B(E),o=D(E,"DIV",{class:!0});var M=j(o);i=D(M,"DIV",{class:!0});var A=j(i);g=D(A,"DIV",{});var G=j(g);y(m.$$.fragment,G),O=B(G),c=D(G,"DIV",{class:!0});var ee=j(c);$=D(ee,"DIV",{class:!0});var te=j($);y(k.$$.fragment,te),te.forEach(d),ee.forEach(d),G.forEach(d),U=B(A),H=D(A,"DIV",{class:!0});var ne=j(H);I&&I.l(ne),ne.forEach(d),K=B(A),w&&w.l(A),A.forEach(d),M.forEach(d),E.forEach(d),this.h()},h(){F(e,"class","mb-4 flex flex-row items-center text-2xl font-semibold"),F($,"class","pt-4"),F(c,"class","flex flex-row justify-between"),F(H,"class","mb-8 mt-4 border-gray-200 pt-4"),ae(H,"border-t",r[1]!=null),F(i,"class","flex w-full flex-col gap-x-8"),F(o,"class","w-full"),F(t,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(p,E){R(p,t,E),b(t,n),b(n,e),b(e,l),b(n,a),v&&v.m(n,null),b(t,f),b(t,o),b(o,i),b(i,g),C(m,g,null),b(g,O),b(g,c),b(c,$),C(k,$,null),b(i,U),b(i,H),~S&&q[S].m(H,null),b(i,K),w&&w.m(i,null),J=!0},p(p,[E]){(!J||E&1)&&s!==(s=p[0].json_schema.title+"")&&le(l,s),p[0].json_schema.description?v?(v.p(p,E),E&1&&u(v,1)):(v=de(p),v.c(),u(v,1),v.m(n,null)):v&&(Q(),_(v,1,1,()=>{v=null}),W());const N={};E&32&&(N.value=p[5]),m.$set(N);const h={};E&8388608&&(h.$$scope={dirty:E,ctx:p}),k.$set(h);let M=S;S=X(p),S===M?~S&&q[S].p(p,E):(I&&(Q(),_(q[M],1,1,()=>{q[M]=null}),W()),~S?(I=q[S],I?I.p(p,E):(I=q[S]=x[S](p),I.c()),u(I,1),I.m(H,null)):I=null),(!J||E&2)&&ae(H,"border-t",p[1]!=null),p[11]?w?(w.p(p,E),E&2048&&u(w,1)):(w=ve(p),w.c(),u(w,1),w.m(i,null)):w&&(Q(),_(w,1,1,()=>{w=null}),W())},i(p){J||(u(v),u(m.$$.fragment,p),u(k.$$.fragment,p),u(I),u(w),J=!0)},o(p){_(v),_(m.$$.fragment,p),_(k.$$.fragment,p),_(I),_(w),J=!1},d(p){p&&d(t),v&&v.d(),T(m),T(k),~S&&q[S].d(),w&&w.d()}}}function lt(r,t,n){let e,s,l,a,f,o=L,i=()=>(o(),o=ue(l,h=>n(19,f=h)),l),g,m=L,O=()=>(m(),m=ue(s,h=>n(4,g=h)),s);r.$$.on_destroy.push(()=>o()),r.$$.on_destroy.push(()=>m());let{signalInfo:c}=t,{text:$=void 0}=t,k=($==null?void 0:$.trim())||"";Ie(()=>{$!=null&&I()});function U(h){n(5,k=h.target.value),n(1,H=void 0)}let H,S={};function I(){n(1,H=k)}let K,J,v,x,q,X=[];const w={concept_score:{"/namespace":Re,"/concept_name":qe,"/embedding":Ne}},p=()=>I();function E(h){S=h,n(2,S)}function N(h){X=h,n(10,X)}return r.$$set=h=>{"signalInfo"in h&&n(0,c=h.signalInfo),"text"in h&&n(17,$=h.text)},r.$$.update=()=>{var h,M;if(r.$$.dirty&131072&&$!=null&&(n(5,k=$.trim()),n(1,H=void 0)),r.$$.dirty&5&&n(18,e={...S,signal_name:c.name}),r.$$.dirty&262146&&O(n(13,s=H!=null?Te({signal:e,inputs:[H]}):null)),r.$$.dirty&262144&&i(n(12,l=Fe({signal:e}))),r.$$.dirty&524312&&(g==null?void 0:g.data)!=null&&((h=f.data)==null?void 0:h.fields)!=null){n(9,q=null);const A=g.data.items[0],G=Ae(f.data.fields);n(6,K=ze(A,G));const ee=Ue(G);n(3,v=ee.spanPaths),n(7,J=ee.valuePaths);const te=Be(G);n(8,x=te.filter(ne=>!v.some(Ee=>Je(ne.path,Ee)))),te.length===0&&n(9,q=A)}r.$$.dirty&1&&n(11,a=Object.keys(((M=c==null?void 0:c.json_schema)==null?void 0:M.properties)||{}).filter(A=>A!="signal_name").length>0)},[c,H,S,v,g,k,K,J,x,q,X,a,l,s,U,I,w,$,e,f,p,E,N]}class st extends ke{constructor(t){super(),we(this,t,lt,nt,se,{signalInfo:0,text:17})}}function rt(r){let t=r[3],n,e,s=be(r);return{c(){s.c(),n=me()},l(l){s.l(l),n=me()},m(l,a){s.m(l,a),R(l,n,a),e=!0},p(l,a){a&8&&se(t,t=l[3])?(Q(),_(s,1,1,L),W(),s=be(l),s.c(),u(s,1),s.m(n.parentNode,n)):s.p(l,a)},i(l){e||(u(s),e=!0)},o(l){_(s),e=!1},d(l){l&&d(n),s.d(l)}}}function at(r){let t,n=r[1].error+"",e;return{c(){t=V("p"),e=Y(n)},l(s){t=D(s,"P",{});var l=j(t);e=Z(l,n),l.forEach(d)},m(s,l){R(s,t,l),b(t,e)},p(s,l){l&2&&n!==(n=s[1].error+"")&&le(e,n)},i:L,o:L,d(s){s&&d(t)}}}function it(r){let t,n;return t=new re({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p:L,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function be(r){let t,n;return t=new st({props:{signalInfo:r[3]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&8&&(l.signalInfo=e[3]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ot(r){let t,n,e,s,l;const a=[it,at,rt],f=[];function o(i,g){var m,O,c;return(m=i[1])!=null&&m.isFetching?0:(O=i[1])!=null&&O.isError?1:(c=i[1])!=null&&c.isSuccess&&i[3]?2:-1}return~(e=o(r))&&(s=f[e]=a[e](r)),{c(){t=V("div"),n=V("div"),s&&s.c(),this.h()},l(i){t=D(i,"DIV",{class:!0});var g=j(t);n=D(g,"DIV",{class:!0});var m=j(n);s&&s.l(m),m.forEach(d),g.forEach(d),this.h()},h(){F(n,"class","lilac-page flex w-full"),F(t,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(i,g){R(i,t,g),b(t,n),~e&&f[e].m(n,null),l=!0},p(i,g){let m=e;e=o(i),e===m?~e&&f[e].p(i,g):(s&&(Q(),_(f[m],1,1,()=>{f[m]=null}),W()),~e?(s=f[e],s?s.p(i,g):(s=f[e]=a[e](i),s.c()),u(s,1),s.m(n,null)):s=null)},i(i){l||(u(s),l=!0)},o(i){_(s),l=!1},d(i){i&&d(t),~e&&f[e].d()}}}function ft(r){let t,n;return t=new Le({props:{type:"blue",$$slots:{default:[ct]},$$scope:{ctx:r}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,s){const l={};s&261&&(l.$$scope={dirty:s,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ut(r){let t,n;return t=new re({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p:L,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ct(r){let t,n,e,s;return{c(){t=V("a"),n=Y(r[0]),this.h()},l(l){t=D(l,"A",{class:!0,href:!0});var a=j(t);n=Z(a,r[0]),a.forEach(d),this.h()},h(){F(t,"class","font-semibold text-black"),F(t,"href",r[2])},m(l,a){R(l,t,a),b(t,n),e||(s=Ve(t,"click",r[7]),e=!0)},p(l,a){a&1&&le(n,l[0]),a&4&&F(t,"href",l[2])},d(l){l&&d(t),e=!1,s()}}}function mt(r){let t,n,e,s;const l=[ut,ft],a=[];function f(o,i){return o[1].isFetching?0:1}return n=f(r),e=a[n]=l[n](r),{c(){t=V("div"),e.c(),this.h()},l(o){t=D(o,"DIV",{slot:!0});var i=j(t);e.l(i),i.forEach(d),this.h()},h(){F(t,"slot","header-subtext")},m(o,i){R(o,t,i),a[n].m(t,null),s=!0},p(o,i){let g=n;n=f(o),n===g?a[n].p(o,i):(Q(),_(a[g],1,1,()=>{a[g]=null}),W(),e=a[n],e?e.p(o,i):(e=a[n]=l[n](o),e.c()),u(e,1),e.m(t,null))},i(o){s||(u(e),s=!0)},o(o){_(e),s=!1},d(o){o&&d(t),a[n].d()}}}function _t(r){let t,n;return t=new ye({props:{$$slots:{"header-subtext":[mt],default:[ot]},$$scope:{ctx:r}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,[s]){const l={};s&271&&(l.$$scope={dirty:s,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function pt(r,t,n){let e,s,l,a,f;const o=De();ce(r,o,m=>n(6,a=m));const i=Me();ce(r,i,m=>n(1,l=m));const g=()=>je(s);return r.$$.update=()=>{var m;r.$$.dirty&65&&a.page==="signals"&&a.identifier!=null&&f!=a.identifier&&n(0,f=a.identifier),r.$$.dirty&3&&n(3,e=(m=l.data)==null?void 0:m.find(O=>O.name===f)),r.$$.dirty&1&&n(2,s=f!=null?Pe(f):"")},[f,l,s,e,o,i,a,g]}class wt extends ke{constructor(t){super(),we(this,t,pt,_t,se,{})}}export{wt as component};
