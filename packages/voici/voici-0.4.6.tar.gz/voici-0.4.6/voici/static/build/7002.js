(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[7002],{27693:e=>{e.exports={name:"@voila-dashboards/voici",version:"0.4.6",description:"The Voici Frontend",author:"VoilÃ  contributors",license:"BSD-3-Clause",main:"lib/index.js",browserslist:">0.8%, not ie 11, not op_mini all, not dead",dependencies:{"@jupyter-widgets/base":"^6.0.1","@jupyter-widgets/jupyterlab-manager":"^5.0.3","@jupyterlab/application":"^3.0.0","@jupyterlab/apputils":"^3.0.0","@jupyterlab/apputils-extension":"^3.4.8","@jupyterlab/coreutils":"^5.0.0","@jupyterlab/docregistry":"^3.0.0","@jupyterlab/json-extension":"^3.0.0","@jupyterlab/logconsole":"^3.0.0","@jupyterlab/mainmenu":"^3.0.0","@jupyterlab/markdownviewer-extension":"^3.0.0","@jupyterlab/mathjax2-extension":"^3.0.0","@jupyterlab/nbconvert-css":"^3.4.8","@jupyterlab/nbformat":"^3.0.0","@jupyterlab/notebook":"^3.0.0","@jupyterlab/outputarea":"^3.0.0","@jupyterlab/rendermime":"^3.0.0","@jupyterlab/rendermime-extension":"^3.0.0","@jupyterlab/services":"^6.1.8","@jupyterlab/settingregistry":"^3.0.0","@jupyterlab/theme-dark-extension":"^3.4.8","@jupyterlab/theme-light-extension":"^3.4.8","@jupyterlab/translation":"^3.0.0","@jupyterlab/ui-components":"^3.0.0","@jupyterlite/contents":"^0.1.2","@jupyterlite/iframe-extension":"^0.1.2","@jupyterlite/kernel":"^0.1.2","@jupyterlite/server":"^0.1.2","@jupyterlite/server-extension":"^0.1.2","@lumino/algorithm":"^1.6.2","@lumino/application":"^1.31.3","@lumino/commands":"^1.15.2","@lumino/coreutils":"^1.8.2","@lumino/datagrid":"^0.36.0","@lumino/disposable":"^1.7.2","@lumino/domutils":"^1.5.2","@lumino/dragdrop":"^1.10.2","@lumino/keyboard":"^1.8.0","@lumino/messaging":"^1.7.2","@lumino/polling":"^1.11.4","@lumino/properties":"^1.5.2","@lumino/signaling":"^1.7.2","@lumino/virtualdom":"^1.11.2","@lumino/widgets":"^1.26.2","@voila-dashboards/voila":"^0.5.0-alpha.3",react:"^17.0.1","react-dom":"^17.0.1"},devDependencies:{"@babel/core":"^7.2.2","@babel/preset-env":"^7.3.1","@jupyterlab/builder":"^3.0.0","@types/node":"^18.8.3","babel-loader":"^8.0.5","css-loader":"~5.0.2","file-loader":"^6.2.0","fs-extra":"^9.1.0",glob:"~7.1.6","ignore-loader":"^0.1.2","json-loader":"^0.5.7","mini-css-extract-plugin":"~0.9.0","p-limit":"^2.2.2","raw-loader":"^4.0.2",rimraf:"^3.0.2","style-loader":"^2.0.0","svg-url-loader":"^7.1.1","tsc-watch":"^6.0.0",typescript:"~5.0.2","url-loader":"^4.1.1",watch:"^1.0.2",webpack:"^5.24.1","webpack-bundle-analyzer":"^4.4.0","webpack-cli":"^4.5.0","webpack-merge":"^5.7.3","whatwg-fetch":"^3.0.0"},scripts:{build:"yarn run build:lib && webpack --mode=development","build:lib":"tsc","build:prod":"yarn run build:lib && webpack --mode=production",clean:"yarn run clean:lib && rimraf build","clean:lib":"rimraf lib tsconfig.tsbuildinfo",watch:'tsc-watch --onSuccess "webpack --mode=development"'},publishConfig:{access:"public"}}},47002:(e,t,n)=>{"use strict";n.r(t),n(23203),n(8971);var i=n(92233),a=(n(7573),n(36e3),n(94812),n(3860),n(26968),n(78695),n(48157),n(24629),n(4947),n(32886),n(42051)),o=(n(24627),n(59110)),r=n(61864),s=n(36314),l=n(22312),u=n(75238),c=n(73198),d=n(40049),p=n(12299),g=n(35918);const m=n(27693),f="application/vnd.jupyter.widget-view+json";class h extends u.JupyterFrontEnd{constructor(e){var t;if(super(Object.assign(Object.assign({},e),{shell:null!==(t=e.shell)&&void 0!==t?t:new l.VoilaShell})),this.name="Voici",this.namespace=this.name,this.version=m.version,this._widgetManagerPromise=new i.PromiseDelegate,e.mimeExtensions)for(const t of(0,u.createRendermimePlugins)(e.mimeExtensions))this.registerPlugin(t);this._kernelspecs=e.kernelspecs,this._serviceManager=e.serviceManager}get widgetManagerPromise(){return this._widgetManagerPromise}get paths(){return{urls:{base:o.PageConfig.getOption("baseUrl"),notFound:o.PageConfig.getOption("notFoundUrl"),app:o.PageConfig.getOption("appUrl"),static:o.PageConfig.getOption("staticUrl"),settings:o.PageConfig.getOption("settingsUrl"),themes:o.PageConfig.getOption("themesUrl"),doc:o.PageConfig.getOption("docUrl"),translations:o.PageConfig.getOption("translationsApiUrl"),hubHost:o.PageConfig.getOption("hubHost")||void 0,hubPrefix:o.PageConfig.getOption("hubPrefix")||void 0,hubUser:o.PageConfig.getOption("hubUser")||void 0,hubServerName:o.PageConfig.getOption("hubServerName")||void 0},directories:{appSettings:o.PageConfig.getOption("appSettingsDir"),schemas:o.PageConfig.getOption("schemasDir"),static:o.PageConfig.getOption("staticDir"),templates:o.PageConfig.getOption("templatesDir"),themes:o.PageConfig.getOption("themesDir"),userSettings:o.PageConfig.getOption("userSettingsDir"),serverRoot:o.PageConfig.getOption("serverRoot"),workspaces:o.PageConfig.getOption("workspacesDir")}}}registerPluginModule(e){let t=e.default;Object.prototype.hasOwnProperty.call(e,"__esModule")||(t=e),Array.isArray(t)||(t=[t]),t.forEach((e=>{try{this.registerPlugin(e)}catch(e){console.error(e)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}async renderWidgets(){var e,t,n;const i=this._serviceManager;if(!i)return void console.error("Missing service manager");await i.ready;const a=i.sessions;await a.ready;const r=new d.NotebookModel;r.fromString(o.PageConfig.getOption("notebookSrc"));let s=r.metadata.get("kernelspec");s||(s={name:"python"});const l=null===(t=null===(e=this._kernelspecs)||void 0===e?void 0:e.specs)||void 0===t?void 0:t.kernelspecs;let u;if(!l)return void console.error("No kernel available");if(s.name in l)console.log(`${s.name} kernel is available!`),u=l[s.name];else for(const e in l)if(s.language===(null===(n=l[e])||void 0===n?void 0:n.language)){console.log(`${s.name} kernel is not available, fallback to using ${l[e].name}`),u=l[e];break}if(!u)return void console.error(`No kernel available for ${s.language}`);const c=await a.startNew({name:"",path:"",type:"notebook",kernel:u}),m=c.kernel;m?m.connectionStatusChanged.connect((async(e,t)=>{if("connected"===t){window.update_loading_text(0,0,"Starting up kernel...");const e=new p.RenderMimeRegistry({initialFactories:p.standardRendererFactories}),t=new g.KernelWidgetManager(m,e);if(e.removeMimeType(f),e.addFactory({safe:!1,mimeTypes:[f],createRenderer:e=>new g.WidgetRenderer(e,t)},-10),this._widgetManagerPromise.resolve(t),!c.kernel)return;await new Promise((e=>setTimeout(e,500)));let n=!1;m.statusChanged.connect((async(t,i)=>{n||"idle"!==i||(n=!0,await b.executeCells({source:r,rendermime:e,kernel:c.kernel}))}))}})):console.error("Can not start kernel")}}var b;!function(e){e.executeCells=async function(e){var t,n;const{source:i,rendermime:r,kernel:s}=e,l=i.cells.length;for(let e=0;e<l;e++){const u=i.cells.get(e);if(window.update_loading_text(e+1,l,null),"code"!==u.type)continue;const d=new c.OutputAreaModel({trusted:!0});let p;p="true"===o.PageConfig.getOption("include_output_prompt")?new c.OutputArea({model:d,rendermime:r}):new c.SimplifiedOutputArea({model:d,rendermime:r}),p.future=s.requestExecute({code:u.value.text}),await p.future.done;const g=document.querySelector(`[cell-index="${e+1}"]`);if(g&&o.PageConfig.getOption("include_output")&&p.node.childNodes.length>0){null===(t=g.lastElementChild)||void 0===t||t.classList.remove("jp-mod-noOutputs","jp-mod-noInput");const e=document.createElement("div");e.classList.add("jp-Cell-outputWrapper");const i=document.createElement("div");i.classList.add("jp-Collapser","jp-OutputCollapser","jp-Cell-outputCollapser"),e.appendChild(i),null===(n=g.lastElementChild)||void 0===n||n.appendChild(e),p.node.classList.add("jp-Cell-outputArea"),p.node.style.display="flex",p.node.style.flexDirection="column",a.Widget.attach(p,e)}}window.display_cells(),window.dispatchEvent(new Event("resize"))}}(b||(b={}));var w=n(67651),y=n(37782);const v={id:"@voila-dashboards/voici:widget-manager",autoStart:!0,provides:w.IJupyterWidgetRegistry,activate:async e=>{if(!(e instanceof h))throw Error("The Voici Widget Manager plugin must be activated in a VoilaApp");const t=e.widgetManagerPromise;return{registerWidget:async e=>{(await t.promise).register(e)}}}},P={id:"@voila-dashboards/voici:theme-manager",autoStart:!0,optional:[y.IThemeManager],activate:(e,t)=>{if(!t)return;const n=window.location.search,i=new URLSearchParams(n).get("theme"),a=o.PageConfig.getOption("jpThemeName");let r=i?decodeURIComponent(i):a;r=r||"light","dark"!==r&&"JupyterLab Dark"!==r||(r="JupyterLab Dark"),"light"!==r&&"JupyterLab Light"!==r||(r="JupyterLab Light"),t.themeChanged.connect((()=>{t.theme!==r&&t.setTheme(r)}))}},j=[l.pathsPlugin,l.translatorPlugin,v,P];async function C(e,t){try{return(await window._JUPYTERLAB[e].get(t))()}catch(n){throw console.warn(`Failed to create module: package: ${e}; module: ${t}`),n}}function*k(e,t){let n;n=Object.prototype.hasOwnProperty.call(e,"__esModule")?e.default:e;const i=Array.isArray(n)?n:[n];for(const e of i)o.PageConfig.Extension.isDisabled(e.id)||t.includes(e.id)||t.includes(e.id.split(":")[0])||(yield e)}const O=[n.e(6777).then(n.t.bind(n,66777,23))],x=["@jupyter-widgets/jupyterlab-manager:plugin","@jupyter-widgets/jupyterlab-manager:saveWidgetState"];window.addEventListener("load",(async function(){const e=[n(9961).default.filter((e=>["@jupyterlab/apputils-extension:settings","@jupyterlab/apputils-extension:themes"].includes(e.id))),n(4319),n(24132),n(41412),n(99661),n(59601),j],t=[n(60844),n(70851)],i=JSON.parse(o.PageConfig.getOption("federated_extensions")),a=[],u=[],c=[],d=[],p=await Promise.allSettled(i.map((async e=>(await async function(e,t){await function(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.onerror=n,i.onload=t,i.async=!0,document.head.appendChild(i),i.src=e}))}(e),await n.I("default");const i=window._JUPYTERLAB[t];await i.init(n.S.default)}(`${o.URLExt.join(o.PageConfig.getOption("fullLabextensionsUrl"),e.name,e.load)}`,e.name),e))));Object.entries(p).forEach((([e,t])=>{if("rejected"===t.status)return void console.error(t.reason);const n=t.value;n.liteExtension?d.push(C(n.name,n.extension)):(n.extension&&a.push(C(n.name,n.extension)),n.mimeExtension&&u.push(C(n.name,n.mimeExtension)),n.style&&c.push(C(n.name,n.style)))})),(await Promise.allSettled(a)).forEach((t=>{if("fulfilled"===t.status)for(const n of k(t.value,x))e.push(n);else console.error(t.reason)})),(await Promise.allSettled(u)).forEach((e=>{if("fulfilled"===e.status)for(const n of k(e.value,x))t.push(n);else console.error(e.reason)})),(await Promise.allSettled(c)).filter((({status:e})=>"rejected"===e)).forEach((e=>{console.error(e.reason)}));const g=[];(await Promise.all(O)).forEach((e=>{for(const t of k(e,x))g.push(t)})),(await Promise.allSettled(d)).forEach((e=>{if("fulfilled"===e.status)for(const t of k(e.value,x))g.push(t);else console.error(e.reason)}));const m=new s.JupyterLiteServer({shell:null});m.registerPluginModules(g),await m.start();const f=await m.resolveRequiredService(r.IKernelSpecs),b=m.serviceManager,w=new h({serviceManager:b,kernelspecs:f,mimeExtensions:t,shell:new l.VoilaShell});w.registerPluginModules(e),await w.start(),await w.renderWidgets(),window.jupyterapp=w}))}}]);