---
apiVersion: apps/v1
# The kind can be used for Deployment and StatefulSet
kind: {{ target.kind }}
metadata:
  name: {{ target.name }}
spec:
  template:
    spec:
      containers:
      - name: {{ strukt.container or default.container_name }}
        volumeMounts:
          {% for path in (strukt.files or []) %}
         - mountPath: {{ path }}
           name: {{ my.shortname }}
           subPath: {{ path.split("/")[-1] }}
          {% endfor %}
      volumes:
      - name: {{ my.shortname }}
        {% if strukt.secret %}
        secret:
          secretName: {{ my.shortname }}
        {% else %}
        configMap:
          name: {{ my.shortname }}
        {% endif %}
