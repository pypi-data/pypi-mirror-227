{"version":3,"file":"lib_index_js.a63ed14bafb1caa8eb6a.js","mappings":"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","sources":["webpack://jupyter-stack-trace/./style/index.css","webpack://jupyter-stack-trace/./src/index.ts","webpack://jupyter-stack-trace/./style/index.css?0140"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../node_modules/css-loader/dist/cjs.js!./base.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import '../style/index.css';\n\nimport { CodeCell } from '@jupyterlab/cells';\nimport { IDocumentManager } from '@jupyterlab/docmanager';\nimport { IEditorTracker, FileEditor } from '@jupyterlab/fileeditor';\nimport { IOutput } from '@jupyterlab/nbformat';\nimport { NotebookActions } from '@jupyterlab/notebook';\n\nimport {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\n\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\n\n/**\n * Initialization data for the jupyter-stack-trace extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyter-stack-trace:plugin',\n  description: 'A JupyterLab extension to jump to the line in the file of the stack trace.',\n  autoStart: true,\n  requires: [IDocumentManager, IEditorTracker],\n  optional: [ISettingRegistry],\n  activate: (\n    app: JupyterFrontEnd,\n    documentManager: IDocumentManager,\n    editorTracker: IEditorTracker,\n    settingRegistry: ISettingRegistry | null\n  ) => {\n    console.log('JupyterLab extension jupyter-stack-trace is activated!');\n\n    let prefixes: string[] = [];\n    let readOnly = true;\n\n    if (settingRegistry) {\n      settingRegistry\n        .load(plugin.id)\n        .then(settings => {\n          console.log('jupyter-stack-trace settings loaded:', settings.composite);\n          prefixes = settings.get('prefixes').composite as string[];\n          readOnly = settings.get('readOnly').composite as boolean;\n        })\n        .catch(reason => {\n          console.error('Failed to load settings for jupyter-stack-trace.', reason);\n        });\n    }\n\n    document.addEventListener('click', async (event: MouseEvent) => {\n      const targetElement = event.target as HTMLElement;\n\n      if (targetElement.classList.contains('ansi-green-fg')) {\n        let [filename, line] = targetElement.textContent?.split(':') || [];\n\n        for (let prefix of prefixes) {\n          if (filename.startsWith(prefix)) {\n            const path = filename.slice(prefix.length);\n            const widget = documentManager.openOrReveal(path, 'default', undefined, { mode: 'split-bottom' });\n\n            if (widget) {\n              await widget.context.ready;\n\n              if (editorTracker.currentWidget === widget && widget.content instanceof FileEditor) {\n                const editor = (widget.content as FileEditor).editor;\n                let line_number = Number(line) || 1;\n\n                editor.setOption('readOnly', readOnly);\n                editor.setCursorPosition({ line: line_number - 1, column: 0 });\n                editor.setSelection({\n                  start: { line: line_number - 1, column: 0 },\n                  end: { line: line_number, column: 0 }\n                });\n              }\n            }\n\n            break;\n          }\n        }\n      }\n    });\n\n    NotebookActions.executed.connect((_, args) => {\n      const cell: CodeCell = args.cell as CodeCell;\n      const outputs = cell.model.sharedModel.outputs;\n\n      outputs.forEach((output: IOutput) => {\n        if (output.output_type === 'error') {\n          const stackTrace: string[] = output.traceback as string[] ?? [];\n          const searchText = escape(stackTrace[stackTrace.length - 1].replace(/\\x1b\\[(.*?)([@-~])/g, ''));\n          const url = 'https://google.com/search?q=' + searchText + '+site:stackoverflow.com';\n\n          cell.model.outputs.add({\n            output_type: 'display_data',\n            data: {\n              'text/html': '<br><button class=\"stack-trace-stack-overflow-btn\" onclick=\"window.open(\\'' + url + '\\', \\'_blank\\');\">Search Stack Overflow</button>'\n            }\n          });\n        }\n      });\n    });\n\n  }\n}\n\nexport default plugin;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}