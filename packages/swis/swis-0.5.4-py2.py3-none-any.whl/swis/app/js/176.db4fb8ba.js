"use strict";(self["webpackChunkSimple_Web_based_Interface_for_Scanner"]=self["webpackChunkSimple_Web_based_Interface_for_Scanner"]||[]).push([[176],{1176:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var n=i(3673),o=i(2323);const s={key:0,class:"row rounded-borders"},l={key:0,style:{width:"128px",height:"128px",border:"1px solid #eee","vertical-align":"middle","justify-items":"center","align-items":"center",display:"flex","flex-direction":"column","justify-content":"center","align-content":"center"}},r=["href"];function a(e,t,i,a,c,f){const d=(0,n.up)("q-input"),p=(0,n.up)("q-btn"),m=(0,n.up)("q-item-section"),h=(0,n.up)("q-icon"),u=(0,n.up)("q-img"),g=(0,n.up)("q-item"),_=(0,n.up)("q-list"),w=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(w,{class:"col"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:"shadow-2 rounded-borders q-mx-lg q-my-lg",style:{width:"96%"}},{default:(0,n.w5)((()=>[this.pdflist.length>0?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(d,{outlined:"",modelValue:e.pdffilename,"onUpdate:modelValue":t[0]||(t[0]=t=>e.pdffilename=t),label:"Filename (optional)",class:"q-ma-sm"},null,8,["modelValue"]),(0,n.Wm)(p,{label:"Create PDF",icon:"picture_as_pdf",onClick:e.createPdf,class:"q-ma-sm",color:"red"},null,8,["onClick"])])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.items,(t=>((0,n.wg)(),(0,n.j4)(g,{key:t,style:{"border-bottom":"1px solid #eee"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{thumbnail:""},{default:(0,n.w5)((()=>[t.onpdflist||!t.filename.endsWith("png")&&!t.filename.endsWith("jpg")?t.onpdflist?((0,n.wg)(),(0,n.j4)(p,{key:1,onClick:i=>e.removeFromPdfList(t.filename),label:e.getPdfListIndex(t.filename),size:"xs",outline:"",rounded:"",style:{width:"10px","margin-left":"5px"}},null,8,["onClick","label"])):((0,n.wg)(),(0,n.j4)(p,{key:2,size:"xs",flat:"",rounded:"",style:{width:"10px","margin-left":"5px"},disabled:""})):((0,n.wg)(),(0,n.j4)(p,{key:0,onClick:i=>e.addToPdfList(t.filename),icon:"picture_as_pdf",size:"xs",outline:"",rounded:"",style:{width:"10px","margin-left":"5px"}},null,8,["onClick"]))])),_:2},1024),(0,n.Wm)(m,{thumbnail:""},{default:(0,n.w5)((()=>[t.filename.endsWith("pdf")?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(h,{name:"picture_as_pdf",class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px"},size:"64px",color:"red"})])):((0,n.wg)(),(0,n.j4)(u,{key:1,class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px",height:"128px",border:"1px solid #eee"},"img-style":{"min-width":"100%","min-height":"100%","object-fit":"cover"},src:`${t.thumbnail}`,"spinner-color":"black"},null,8,["src"]))])),_:2},1024),(0,n.Wm)(m,{style:{"overflow-wrap":"break-word",hyphens:"auto","word-break":"break-all"}},{default:(0,n.w5)((()=>[(0,n._)("a",{href:t.src,style:{"font-size":"0.9rem"}},(0,o.zw)(t.filename),9,r)])),_:2},1024),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{color:"red",label:"",icon:"delete",size:"sm",onClick:i=>e.removeImage(t.filename)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}i(2100);const c=(0,n.aZ)({name:"PageScanList",data:function(){return{files:[],config:void 0,pdflist:[],pdffilename:""}},created:function(){},computed:{items:function(){return this.files.map((e=>({filename:e.filename,src:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/${e.filename}`,thumbnail:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/${e.thumbnail}`,type:this.getFileType(e.filename),onpdflist:this.pdflist.includes(e.filename)})))}},mounted(){this.getScanList()},methods:{getScanList:function(){this.getJSON("config","config.json").then((e=>{this.config=e,this.$axios.get(`http://${this.config.api_url}:${this.config.api_port}/scans`).then((e=>{200==(null===e||void 0===e?void 0:e.status)?this.files=e.data.filenames:(this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e))})).catch((e=>{this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e)}))}))},addToPdfList:function(e){this.pdflist.push(e)},removeFromPdfList:function(e){this.pdflist=this.pdflist.filter((t=>t!=e))},getPdfListIndex:function(e){return this.pdflist.indexOf(e)+1},createPdf:function(){return new Promise(((e,t)=>{this.$axios.post(`http://${this.config.api_url}:${this.config.api_port}/makepdf`,{target:this.pdffilename,filenames:this.pdflist}).then((e=>{200==(null===e||void 0===e?void 0:e.status)?(this.$q.notify({color:"positive",message:"PDF created",icon:"done"}),this.pdflist=[],this.pdffilename="",this.getScanList(),window.open(`http://${this.config.api_url}:${this.config.api_port}/files/${e.data.filename}`,"_blank")):(this.$q.notify({color:"negative",message:'Error creating PDF. Make sure you have "convert" tool installed on server.',icon:"report_problem"}),console.error(e))}))}))},getJSON:function(e,t){return new Promise(((i,n)=>{this.$axios.get(t).then((t=>{let n=t.data;localStorage.setItem(e,JSON.stringify(n)),i(n)})).catch((e=>{this.$q.notify({color:"negative",message:`Error loading ${t}`,icon:"report_problem"}),console.error(e),n(e)}))}))},getFileType:function(e){let t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png"].includes(t)?"img":"other"},removeImage:function(e){this.$axios.delete(`http://${this.config.api_url}:${this.config.api_port}/scans/${e}`).then((t=>{200==(null===t||void 0===t?void 0:t.status)?this.files=this.files.filter((t=>t.filename!=e)):(this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(t))})).catch((e=>{this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(e)}))}}});var f=i(4260),d=i(4379),p=i(7011),m=i(4842),h=i(4607),u=i(3414),g=i(2035),_=i(4554),w=i(4027),b=i(7518),y=i.n(b);const x=(0,f.Z)(c,[["render",a]]),$=x;y()(c,"components",{QPage:d.Z,QList:p.Z,QInput:m.Z,QBtn:h.Z,QItem:u.Z,QItemSection:g.Z,QIcon:_.Z,QImg:w.Z})}}]);