(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{65338:function(n){n.exports=function(n,e,r,t){for(var o=-1,i=null==n?0:n.length;++o<i;){var u=n[o];e(t,u,r(u),n)}return t}},12825:function(n,e,r){var t=r(24303);n.exports=function(n,e,r,o){return t(n,function(n,t,i){e(o,n,r(n),i)}),o}},36740:function(n,e,r){var t=r(65338),o=r(12825),i=r(68286),u=r(86152);n.exports=function(n,e){return function(r,s){var a=u(r)?t:o,l=e?e():{};return a(r,n,i(s,2),l)}}},96795:function(n,e,r){var t=r(36740)(function(n,e,r){n[r?0:1].push(e)},function(){return[[],[]]});n.exports=t},51927:function(n,e,r){"use strict";r.d(e,{b:function(){return x}});var t=r(73235),o=r(52322),i=r(2784),u=r(35505),s=r(2736),a=r(87323),l=r(92914),c=r(85737);function d(){var n=(0,t._)(["\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  flex-direction: column;\n  height: fit-content;\n"]);return d=function(){return n},n}function f(){var n=(0,t._)(["\n  box-shadow: inset 4px 0 ",";\n  color: ",";\n\n  a:link,\n  a:visited,\n  a:hover,\n  a:active {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return f=function(){return n},n}function h(){var n=(0,t._)(["\n  font-weight: 600;\n"]);return h=function(){return n},n}function p(){var n=(0,t._)(["\n  font-weight: 400;\n"]);return p=function(){return n},n}var x=function(n){var e=n.intent,r=n.title,t=n.description,u=n.onClose,d=i.useMemo(function(){switch(e){case"warning":return{backgroundColor:a.w.Yellow50,borderColor:a.w.Yellow500,icon:"warning",iconColor:a.w.Yellow500,textColor:a.w.Yellow700};case"error":return{backgroundColor:a.w.Red50,borderColor:a.w.Red500,icon:"error",iconColor:a.w.Red500,textColor:a.w.Red700};case"success":return{backgroundColor:a.w.Green50,borderColor:a.w.Green500,icon:"done",iconColor:a.w.Green500,textColor:a.w.Green700};default:return{backgroundColor:a.w.Blue50,borderColor:a.w.Blue500,icon:"info",iconColor:a.w.Blue500,textColor:a.w.Blue700}}},[e]),f=d.backgroundColor,h=d.borderColor,p=d.icon,x=d.iconColor,b=d.textColor;return(0,o.jsx)(g,{background:f,$borderColor:h,$textColor:b,padding:{horizontal:16,vertical:12},children:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,o.jsxs)(l.Z,{direction:"row",spacing:12,alignItems:"flex-start",children:[n.icon||(0,o.jsx)(c.JO,{name:p,color:x}),(0,o.jsxs)(l.Z,{direction:"column",spacing:8,children:[(0,o.jsx)(w,{children:r}),t?(0,o.jsx)(C,{children:t}):null]})]}),u?(0,o.jsx)(v,{onClick:u,children:(0,o.jsx)(c.JO,{name:"close",color:b})}):null]})})};x.defaultProps={intent:"info"};var v=u.ZP.button.withConfig({componentId:"sc-88ccfa38-0"})(d()),g=(0,u.ZP)(s.x).withConfig({componentId:"sc-88ccfa38-1"})(f(),function(n){return n.$borderColor},function(n){return n.$textColor},function(n){return n.$textColor}),w=u.ZP.div.withConfig({componentId:"sc-88ccfa38-2"})(h()),C=u.ZP.div.withConfig({componentId:"sc-88ccfa38-3"})(p())},51269:function(n,e,r){"use strict";r.d(e,{Rp:function(){return d},b$:function(){return l},pI:function(){return c}});var t=r(73235),o=r(52322);r(2784);var i=r(35505),u=r(70399),s=r(85737);function a(){var n=(0,t._)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 16px;\n"]);return a=function(){return n},n}var l=function(n){var e=n.hasPrevCursor,r=n.hasNextCursor,t=n.popCursor,i=n.advanceCursor;return(0,o.jsxs)(d,{children:[(0,o.jsx)(u.zx,{disabled:!e,icon:(0,o.jsx)(s.JO,{name:"arrow_back"}),onClick:t,children:"Previous"}),(0,o.jsx)(u.zx,{disabled:!r,rightIcon:(0,o.jsx)(s.JO,{name:"arrow_forward"}),onClick:i,children:"Next"})]})},c=function(n){var e=n.hasPrevCursor,r=n.hasNextCursor,t=n.popCursor,i=n.advanceCursor;return(0,o.jsxs)(d,{children:[(0,o.jsx)(u.zx,{icon:(0,o.jsx)(s.JO,{name:"arrow_back"}),disabled:!e,onClick:t,children:(0,o.jsx)("span",{className:"hideable-button-text",children:"Newer"})}),(0,o.jsx)(u.zx,{rightIcon:(0,o.jsx)(s.JO,{name:"arrow_forward"}),disabled:!r,onClick:i,children:(0,o.jsx)("span",{className:"hideable-button-text",children:"Older"})})]})},d=i.ZP.div.withConfig({componentId:"sc-7c1d804d-0"})(a())},26977:function(n,e,r){"use strict";r.d(e,{Q1:function(){return _},Qf:function(){return P},zc:function(){return R}});var t=r(85333),o=r(6692),i=r(58467),u=r(73235),s=r(82550),a=r(52322),l=r(40794),c=r(60138),d=r(70399),f=r(87323),h=r(18149),p=r.n(h),x=r(2784),v=r(7267),g=r(35505),w=r(34503),C=r(16369),b=r(37842),m=r(47424);function j(){var n=(0,u._)(["\n  ","\n"]);return j=function(){return n},n}function y(){var n=(0,u._)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]);return y=function(){return n},n}var k=function(n){switch(n){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}},R=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,l.a)(q,{variables:{queuedFilter:(0,o._)((0,t._)({},n),{statuses:Array.from(b.sy)}),inProgressFilter:(0,o._)((0,t._)({},n),{statuses:Array.from(b.Ys)})}}),r=e.data,u=x.useMemo(function(){var n,e;return{queuedCount:(null==r?void 0:null===(n=r.queuedCount)||void 0===n?void 0:n.__typename)==="Runs"?r.queuedCount.count:null,inProgressCount:(null==r?void 0:null===(e=r.inProgressCount)||void 0===e?void 0:e.__typename)==="Runs"?r.inProgressCount.count:null}},[r]),c=u.queuedCount,f=u.inProgressCount,h=(0,i._)((0,m.oD)(),1)[0],p=P(h);(0,w.j)(k(p));var v=function(n){var e=h.filter(function(n){return"status"!==n.token}),r=n.map(function(n){return{token:"status",value:n}});return(0,m.it)((0,s._)(r).concat((0,s._)(e)))};return{tabs:(0,a.jsxs)(d.zH,{children:[(0,a.jsx)(_,{to:v([]),id:"all",$active:"all"===p,children:"All runs"}),(0,a.jsxs)(_,{to:v(Array.from(b.sy)),id:"queued",$active:"queued"===p,children:["Queued (",null!=c?c:"indeterminate",")"]}),(0,a.jsxs)(_,{to:v(Array.from(b.Ys)),id:"in-progress",$active:"in-progress"===p,children:["In progress (",null!=f?f:"indeterminate",")"]}),(0,a.jsx)(_,{to:v(Array.from(b.hd)),id:"failed",$active:"failed"===p,children:"Failed"}),(0,a.jsx)(_,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===p,children:"Scheduled"})]}),queryResult:e}},_=(0,g.ZP)(C.A).withConfig({componentId:"sc-8862b5f1-0"})(j(),function(n){return n.$active&&"\n    background: ".concat(f.w.Gray200,";\n  ")}),P=function(n){var e=(0,v.TH)().pathname;if("/runs/timeline"===e)return"timeline";if("/runs/scheduled"===e)return"scheduled";if("/overview/backfills"===e)return"backfills";var r=new Set(n.filter(function(n){return"status"===n.token}).map(function(n){return n.value}));return p()(b.sy,r)?"queued":p()(b.Ys,r)?"in-progress":p()(b.hd,r)?"failed":"all"},q=(0,c.Ps)(y())},99850:function(n,e,r){"use strict";r.r(e),r.d(e,{RUNS_ROOT_QUERY:function(){return G},RunsRoot:function(){return Y},default:function(){return Z}});var t=r(85333),o=r(58467),i=r(73235),u=r(82550),s=r(52322),a=r(60138),l=r(40794),c=r(2736),d=r(28413),f=r(98353),h=r(62540),p=r(19369),x=r(87323),v=r(51927),g=r(45),w=r(47625),C=r(51269),b=r(96795),m=r.n(b),j=r(2784),y=r(47933),k=r(87905),R=r(63757),_=r(48608),P=r(28316);function q(n){var e=n.node,r=j.useRef(null);return j.useLayoutEffect(function(){var n=r.current;if(e.parentNode!==n){if(null!==e.parentNode&&e.parentNode!==n)throw Error("Cannot render the same node twice");return null==n||n.appendChild(e),function(){null==n||n.removeChild(e)}}},[e]),(0,s.jsx)("div",{ref:r})}var E=r(46806),$=r(75130),F=r(72171),O=r(72224),I=r(26977),S=r(97319),T=r(83221),N=r(47424),A=r(88498);function z(){var n=(0,i._)(["\n  query RunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return z=function(){return n},n}function Q(){var n=(0,i._)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n']);return Q=function(){return n},n}var Y=function(){var n,e,r,i=function(){return(0,s.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[nn,nl]})};(0,_.Px)();var a=(0,o._)((0,N.oD)(),2),l=a[0],b=a[1],k=(0,N.VH)(l),E=(0,$._)(),z=(0,A.l)({nextCursorForResult:function(n){var e;if("Runs"===n.pipelineRunsOrError.__typename)return null===(e=n.pipelineRunsOrError.results[24])||void 0===e?void 0:e.id},getResultArray:function(n){return n&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]},variables:{filter:k},query:G,pageSize:25}),Q=z.queryResult,Y=z.paginationProps,Z=(0,R.C4)(Q,R.dT),B=(0,I.Qf)(l),D="all"!==B,H=(0,o._)(m()(l,function(n){return"status"===n.token}),2),J=H[0],L=H[1],V=j.useCallback(function(n){D?b((0,u._)(J).concat((0,u._)(n))):b(n)},[b,D,J]),M=j.useCallback(function(n){var e=(0,d.HY)(n);L.some(function(n){return(0,d.HY)(n)===e})||V((0,u._)(L).concat([n]))},[L,V]),K=j.useMemo(function(){var n=["tag","snapshotId","id","job","pipeline","backfill"];return D||n.push("status"),n},[D]),W=j.useMemo(function(){return D?l.filter(function(n){return"status"!==n.token}):l},[l,D]),X=(0,I.zc)(k),nn=X.tabs,ne=X.queryResult,nr=(0,R.C4)(ne,R.dT),nt=(0,R.V5)(nr,Z),no=(0,N.Vv)({tokens:W,onChange:V,enabledFilters:K}),ni=no.button,nu=no.activeFiltersJsx,ns=(0,o._)((e=(n=(0,o._)(j.useState(null),2))[0],r=n[1],j.useLayoutEffect(function(){r(function(n){return null===n?document.createElement("div"):n})},[]),[e?(0,P.createPortal)(ni,e):null,e?(0,s.jsx)(q,{node:e}):null]),2),na=ns[0],nl=ns[1];return(0,s.jsxs)(f.T,{children:[(0,s.jsx)(h.m,{title:(0,s.jsx)(p.X6,{children:"Runs"}),right:(0,s.jsx)(R.xi,{refreshState:nt})}),na,"queued"===B&&E?(0,s.jsxs)(c.x,{flex:{direction:"column",gap:8},padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:x.w.KeylineGray},children:[(0,s.jsx)(v.b,{intent:"info",title:(0,s.jsx)(y.rU,{to:"/config#run_coordinator",children:"View queue configuration"})}),(0,s.jsx)(U,{})]}):null,(0,s.jsx)(T.Lw.Provider,{value:{refetch:Q.refetch},children:(0,s.jsx)(F.g,{queryResult:Q,allowStaleData:!0,renderError:function(n){var e=!!((null==n?void 0:n.networkError)&&"statusCode"in n.networkError&&400===n.networkError.statusCode);return(0,s.jsxs)(c.x,{flex:{direction:"column",gap:32},padding:{vertical:8,left:24,right:12},children:[i(),(0,s.jsx)(g.t,{icon:"warning",title:e?"Invalid run filters":"Unexpected error",description:e?"The specified run filters are not valid. Please check the filters and try again.":"An unexpected error occurred. Check the console for details."})]})},children:function(n){var e=n.pipelineRunsOrError;return"Runs"!==e.__typename?(0,s.jsx)(c.x,{padding:{vertical:64},children:(0,s.jsx)(g.t,{icon:"error",title:"Query Error",description:e.message})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.Y,{$top:0,children:(0,s.jsx)(S.AL,{runs:e.results.slice(0,25),onAddTag:M,filter:k,actionBarComponents:i(),belowActionBarComponents:nu.length?(0,s.jsxs)(s.Fragment,{children:[nu,(0,s.jsx)(w.Z,{onClick:function(){V([])},children:"Clear all"})]}):null})}),e.results.length>0?(0,s.jsx)("div",{style:{marginTop:"16px"},children:(0,s.jsx)(C.pI,(0,t._)({},Y))}):null]})}})})]})},Z=Y,G=(0,a.Ps)(z(),S.ZZ,k.B),U=function(){var n=(0,l.a)(B).data,e=j.useContext(E.N).pageTitle,r=null==n?void 0:n.instance.daemonHealth.daemonStatus;return(null==r?void 0:r.required)&&!(null==r?void 0:r.healthy)?(0,s.jsx)(v.b,{intent:"warning",title:"The queued run coordinator is not healthy.",description:(0,s.jsxs)("div",{children:["View ",(0,s.jsx)(y.rU,{to:"/health",children:e})," for details."]})}):null},B=(0,a.Ps)(Q())},88498:function(n,e,r){"use strict";r.d(e,{l:function(){return c}});var t=r(85333),o=r(6692),i=r(58467),u=r(82550),s=r(40794),a=r(2784),l=r(76358);function c(n){var e=(0,i._)(a.useState(function(){return[]}),2),r=e[0],c=e[1],d=(0,i._)((0,l.q)({queryKey:"cursor"}),2),f=d[0],h=d[1],p=(0,o._)((0,t._)({},n.variables),{cursor:f,limit:n.pageSize+1}),x=(0,s.a)(n.query,{skip:n.skip,variables:p,notifyOnNetworkStatusChange:!0}),v=n.getResultArray(x.data),g={hasPrevCursor:!!f,hasNextCursor:v.length===n.pageSize+1,popCursor:function(){var n=(0,u._)(r);h(n.pop()),c(n)},advanceCursor:function(){f&&c(function(n){return(0,u._)(n).concat([f])});var e=x.data&&n.nextCursorForResult(x.data);e&&h(e)},reset:function(){c([]),h(void 0)}};return{queryResult:x,paginationProps:g}}},72171:function(n,e,r){"use strict";r.d(e,{T:function(){return d},g:function(){return c}});var t=r(58467),o=r(52322),i=r(2736),u=r(45),s=r(91588),a=r(2784),l=r(71212),c=function(n){var e=n.children,r=n.purpose,s=n.allowStaleData,c=n.renderError,f=n.queryResult,h=f.error,p=f.data,x=f.loading,v=(0,t._)(a.useState(!0),2),g=v[0],w=v[1],C=!p||x&&!(void 0!==s&&s)||0===Object.keys(p).length;if(a.useEffect(function(){var n;return C?n=setTimeout(function(){return w(!1)},500):w(!0),function(){n&&clearTimeout(n)}},[C]),h){if(c)return(0,o.jsx)(o.Fragment,{children:c(h)});var b=h.networkError;if(!b)return(0,o.jsx)(i.x,{padding:64,flex:{justifyContent:"center"},children:(0,o.jsx)(u.t,{icon:"error",title:"GraphQL Error - see console for details"})});if("statusCode"in b&&l.h.has(b.statusCode)){var m=b.statusCode;return(0,o.jsx)(i.x,{padding:64,flex:{justifyContent:"center"},children:(0,o.jsx)(u.t,{icon:"error",title:"Network error",description:(0,l.F)(m)})})}}return C?g?null:(0,o.jsx)(d,{purpose:r}):(0,o.jsx)(o.Fragment,{children:e(p)})},d=function(n){var e=n.purpose,r="page"===e;return(0,o.jsx)(i.x,{padding:64,flex:{grow:r?1:void 0,justifyContent:"center",alignItems:"center"},style:r?{height:"100%"}:void 0,children:(0,o.jsx)(s.$,{purpose:e})})};c.defaultProps={purpose:"page"}},72224:function(n,e,r){"use strict";r.d(e,{Y:function(){return u}});var t=r(73235),o=r(87323);function i(){var n=(0,t._)(["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the `tr` and we don't want an inset\n   * box-shadow on `th` elements because it will create a double-border on the\n   * bottom of the `thead` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * `th` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"],["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"]);return i=function(){return n},n}var u=r(35505).ZP.div.withConfig({componentId:"sc-518cab7f-0"})(i(),function(n){var e=n.$top;return void 0===e?0:e},o.w.White,o.w.KeylineGray)}}]);
//# sourceMappingURL=850.f02f6b0807849cfb.js.map